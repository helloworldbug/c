function ___objOff(t){var e=currTop=0;if(t.offsetParent){do e+=t.offsetLeft,currTop+=t.offsetTop;while(t=t.offsetParent)}else e+=t.offsetLeft,currTop+=t.offsetTop;return[e,currTop]}function getCacheFilterImage(t,e){if(t._filterDirty){if(!t._filters||0==t._filters.length)return t._filterDirty=!1,t._filterHandling=!1,null;if(!(t._filters&&t._filters.length>0)||t._filterHandling)return t.filters&&0!=t.filters.length&&t._filterHandling||!t._cacheCanvas||1==t._cacheCanvas.width&&1==t._cacheCanvas.height||(t._cacheCanvas.width=1,t._cacheCanvas.height=1,t._filterImage||(t._filterImage=null)),t._filters&&t._filters.length>0&&t._filterImage?t._filterImage:null;t._filterHandling=!0;var i=t.tintedTexture||t.texture.baseTexture.source;if(i.src&&ms.isBase64(i.src)?t.__tempFilterBase64=i.src:(t._cacheCanvas||(t._cacheCanvas=document.createElement("canvas"),t._cacheContext=t._cacheCanvas.getContext("2d")),t._cacheCanvas.width=i.width,t._cacheCanvas.height=i.height,t._cacheContext.drawImage(i,0,0)),e.filterManager.applyFilters(t),t._filterImage)return t._filterImage}else if(t._filters&&t._filters.length>0)return t._filterImage||t._cacheCanvas;return null}this.createjs=this.createjs||{},createjs.extend=function(t,e){"use strict";function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i},this.createjs=this.createjs||{},createjs.promote=function(t,e){"use strict";var i=t.prototype,n=Object.getPrototypeOf&&Object.getPrototypeOf(i)||i.__proto__;if(n){i[(e+="_")+"constructor"]=n.constructor;for(var r in n)i.hasOwnProperty(r)&&"function"==typeof n[r]&&(i[e+r]=n[r])}return t},this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.type=t,this.target=null,this.realTarget=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!e,this.cancelable=!!i,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var e=t.prototype;e.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},e.stopPropagation=function(){this.propagationStopped=!0},e.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},e.remove=function(){this.removed=!0},e.clone=function(){return new t(this.type,this.bubbles,this.cancelable)},e.set=function(t){for(var e in t)this[e]=t[e];return this},e.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){this._listeners=null,this._captureListeners=null}var e=t.prototype;t.initialize=function(t){t.addEventListener=e.addEventListener,t.on=e.on,t.removeEventListener=t.off=e.removeEventListener,t.removeAllEventListeners=e.removeAllEventListeners,t.hasEventListener=e.hasEventListener,t.dispatchEvent=e.dispatchEvent,t._dispatchEvent=e._dispatchEvent,t.willTrigger=e.willTrigger},e.addEventListener=function(t,e,i){var n;n=i?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var r=n[t];return r&&this.removeEventListener(t,e,i),r=n[t],r?r.push(e):n[t]=[e],e},e.on=function(t,e,i,n,r,s){return e.handleEvent&&(i=i||e,e=e.handleEvent),i=i||this,this.addEventListener(t,function(t){e.call(i,t,r),n&&t.remove()},s)},e.removeEventListener=function(t,e,i){var n=i?this._captureListeners:this._listeners;if(n){var r=n[t];if(r)for(var s=0,a=r.length;a>s;s++)if(r[s]==e){1==a?delete n[t]:r.splice(s,1);break}}},e.off=e.removeEventListener,e.removeAllEventListeners=function(t){t?(this._listeners&&delete this._listeners[t],this._captureListeners&&delete this._captureListeners[t]):this._listeners=this._captureListeners=null},e.dispatchEvent=function(t){if("string"==typeof t){var e=this._listeners;if(!e||!e[t])return!1;t=new createjs.Event(t)}else t.realTarget&&t.clone&&(t=t.clone());try{t.realTarget=this}catch(i){}if(t.bubbles&&this.parent){for(var n=this,r=[n];n.parent;)r.push(n=n.parent);var s,a=r.length;for(s=a-1;s>=0&&!t.propagationStopped;s--)r[s]._dispatchEvent(t,1+(0==s));for(s=1;a>s&&!t.propagationStopped;s++)r[s]._dispatchEvent(t,3)}else this._dispatchEvent(t,2);return t.defaultPrevented},e.hasEventListener=function(t){var e=this._listeners,i=this._captureListeners;return!!(e&&e[t]||i&&i[t])},e.willTrigger=function(t){for(var e=this;e;){if(e.hasEventListener(t))return!0;e=e.parent}return!1},e.toString=function(){return"[EventDispatcher]"},e._dispatchEvent=function(t,e){var i,n=1==e?this._captureListeners:this._listeners;if(t&&n){var r=n[t.type];if(!r||!(i=r.length))return;try{t.currentTarget=this}catch(s){}try{t.eventPhase=e}catch(s){}t.removed=!1,r=r.slice();for(var a=0;i>a&&!t.immediatePropagationStopped;a++){var o=r[a];o.handleEvent?o.handleEvent(t):o(t),t.removed&&(this.off(t.type,o,1==e),t.removed=!1)}}},createjs.EventDispatcher=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ticker cannot be instantiated."}t.RAF_SYNCHED="synched",t.RAF="raf",t.TIMEOUT="timeout",t.useRAF=!1,t.timingMode=null,t.maxDelta=0,t.paused=!1,t.removeEventListener=null,t.removeAllEventListeners=null,t.dispatchEvent=null,t.hasEventListener=null,t._listeners=null,createjs.EventDispatcher.initialize(t),t._addEventListener=t.addEventListener,t.addEventListener=function(){return!t._inited&&t.init(),t._addEventListener.apply(t,arguments)},t._inited=!1,t._startTime=0,t._pausedTime=0,t._ticks=0,t._pausedTicks=0,t._interval=50,t._lastTime=0,t._times=null,t._tickTimes=null,t._timerId=null,t._raf=!0,t.setInterval=function(e){t._interval=e,t._inited&&t._setupTick()},t.getInterval=function(){return t._interval},t.setFPS=function(e){t.setInterval(1e3/e)},t.getFPS=function(){return 1e3/t._interval};try{Object.defineProperties(t,{interval:{get:t.getInterval,set:t.setInterval},framerate:{get:t.getFPS,set:t.setFPS}})}catch(e){console.log(e)}t.init=function(){t._inited||(t._inited=!0,t._times=[],t._tickTimes=[],t._startTime=t._getTime(),t._times.push(t._lastTime=0),t.interval=t._interval)},t.reset=function(){if(t._raf){var e=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;e&&e(t._timerId)}else clearTimeout(t._timerId);t.removeAllEventListeners("tick"),t._timerId=t._times=t._tickTimes=null,t._startTime=t._lastTime=t._ticks=0,t._inited=!1},t.getMeasuredTickTime=function(e){var i=0,n=t._tickTimes;if(!n||n.length<1)return-1;e=Math.min(n.length,e||0|t.getFPS());for(var r=0;e>r;r++)i+=n[r];return i/e},t.getMeasuredFPS=function(e){var i=t._times;return!i||i.length<2?-1:(e=Math.min(i.length-1,e||0|t.getFPS()),1e3/((i[0]-i[e])/e))},t.setPaused=function(e){t.paused=e,t._setupTick()},t.getPaused=function(){return t.paused},t.getTime=function(e){return t._startTime?t._getTime()-(e?t._pausedTime:0):-1},t.getEventTime=function(e){return t._startTime?(t._lastTime||t._startTime)-(e?t._pausedTime:0):-1},t.getTicks=function(e){return t._ticks-(e?t._pausedTicks:0)},t._handleSynch=function(){t._timerId=null,t._setupTick(),t._getTime()-t._lastTime>=.97*(t._interval-1)&&t._tick()},t._handleRAF=function(){t._timerId=null,t._setupTick(),t._tick()},t._handleTimeout=function(){t._timerId=null,t._setupTick(),t._tick()},t._setupTick=function(){if(null==t._timerId&&!t.paused){var e=t.timingMode||t.useRAF&&t.RAF_SYNCHED;if(e==t.RAF_SYNCHED||e==t.RAF){var i=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(i)return t._timerId=i(e==t.RAF?t._handleRAF:t._handleSynch),void(t._raf=!0)}t._raf=!1,t._timerId=setTimeout(t._handleTimeout,t._interval)}},t._tick=function(){var e=t.paused,i=t._getTime(),n=i-t._lastTime;if(t._lastTime=i,t._ticks++,e)return t._pausedTicks++,void(t._pausedTime+=n);if(t.hasEventListener("tick")){var r=new createjs.Event("tick"),s=t.maxDelta;r.delta=s&&n>s?s:n,r.paused=e,r.time=i,r.runTime=i-t._pausedTime,t.dispatchEvent(r)}for(t._tickTimes.unshift(t._getTime()-i);t._tickTimes.length>100;)t._tickTimes.pop();for(t._times.unshift(i);t._times.length>100;)t._times.pop()};var i=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);t._getTime=function(){return(i&&i.call(performance)||(new Date).getTime())-t._startTime},createjs.Ticker=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(e,i,n){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=n||{},this.target=e,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=e,this._useTicks=!1,this._inited=!1,i&&(this._useTicks=i.useTicks,this.ignoreGlobalPause=i.ignoreGlobalPause,this.loop=i.loop,i.onChange&&this.addEventListener("change",i.onChange),i.override&&t.removeTweens(e)),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,t.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);t.NONE=0,t.LOOP=1,t.REVERSE=2,t.IGNORE={},t._tweens=[],t._plugins={},t.get=function(e,i,n,r){return r&&t.removeTweens(e),new t(e,i,n)},t.tick=function(e,i){for(var n=t._tweens.slice(),r=n.length-1;r>=0;r--){var s=n[r];i&&!s.ignoreGlobalPause||s._paused||s.tick(s._useTicks?1:e)}},t.handleEvent=function(t){"tick"==t.type&&this.tick(t.delta,t.paused)},t.removeTweens=function(e){if(e.tweenjs_count){for(var i=t._tweens,n=i.length-1;n>=0;n--){var r=i[n];r._target==e&&(r._paused=!0,i.splice(n,1))}e.tweenjs_count=0}},t.removeAllTweens=function(){for(var e=t._tweens,i=0,n=e.length;n>i;i++){var r=e[i];r._paused=!0,r.target.tweenjs_count=0}e.length=0},t.hasActiveTweens=function(e){return e?e.tweenjs_count:t._tweens&&!!t._tweens.length},t.installPlugin=function(e,i){var n=e.priority;null==n&&(e.priority=n=0);for(var r=0,s=i.length,a=t._plugins;s>r;r++){var o=i[r];if(a[o]){for(var h=a[o],c=0,l=h.length;l>c&&!(n<h[c].priority);c++);a[o].splice(c,0,e)}else a[o]=[e]}},t._register=function(e,i){var n=e._target,r=t._tweens;if(i)n&&(n.tweenjs_count=n.tweenjs_count?n.tweenjs_count+1:1),r.push(e),!t._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",t),t._inited=!0);else{n&&n.tweenjs_count--;for(var s=r.length;s--;)if(r[s]==e)return void r.splice(s,1)}},e.wait=function(t,e){if(null==t||0>=t)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:t,p0:i,e:this._linearEase,p1:i,v:e})},e.to=function(t,e,i){return(isNaN(e)||0>e)&&(e=0),this._addStep({d:e||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(t))})},e.call=function(t,e,i){return this._addAction({f:t,p:e?e:[this],o:i?i:this._target})},e.set=function(t,e){return this._addAction({f:this._set,o:this,p:[t,e?e:this._target]})},e.play=function(t){return t||(t=this),this.call(t.setPaused,[!1],t)},e.pause=function(t){return t||(t=this),this.call(t.setPaused,[!0],t)},e.setPosition=function(t,e){0>t&&(t=0),null==e&&(e=1);var i=t,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=t,this._target)if(n)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var s=0,a=this._steps.length;a>s&&!(this._steps[s].t>i);s++);var o=this._steps[s-1];this._updateTargetProps(o,(this._stepPosition=i-o.t)/o.d)}return 0!=e&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==e&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),n&&this.setPaused(!0),this.dispatchEvent("change"),n},e.tick=function(t){this._paused||this.setPosition(this._prevPosition+t)},e.setPaused=function(e){return this._paused===!!e?this:(this._paused=!!e,t._register(this,!e),this)},e.w=e.wait,e.t=e.to,e.c=e.call,e.s=e.set,e.toString=function(){return"[Tween]"},e.clone=function(){throw"Tween can not be cloned."},e._updateTargetProps=function(e,i){var n,r,s,a,o,h;if(e||1!=i){if(this.passive=!!e.v,this.passive)return;e.e&&(i=e.e(i,0,1,1)),n=e.p0,r=e.p1}else this.passive=!1,n=r=this._curQueueProps;for(var c in this._initQueueProps){null==(a=n[c])&&(n[c]=a=this._initQueueProps[c]),null==(o=r[c])&&(r[c]=o=a),s=a==o||0==i||1==i||"number"!=typeof a?1==i?o:a:a+(o-a)*i;var l=!1;if(h=t._plugins[c])for(var u=0,d=h.length;d>u;u++){var g=h[u].tween(this,c,s,n,r,i,!!e&&n==r,!e);g==t.IGNORE?l=!0:s=g}l||(this._target[c]=s)}},e._runActions=function(t,e,i){var n=t,r=e,s=-1,a=this._actions.length,o=1;for(t>e&&(n=e,r=t,s=a,a=o=-1);(s+=o)!=a;){var h=this._actions[s],c=h.t;(c==r||c>n&&r>c||i&&c==t)&&h.f.apply(h.o,h.p)}},e._appendQueueProps=function(e){var i,n,r,s,a;for(var o in e)if(void 0===this._initQueueProps[o]){if(n=this._target[o],i=t._plugins[o])for(r=0,s=i.length;s>r;r++)n=i[r].init(this,o,n);this._initQueueProps[o]=this._curQueueProps[o]=void 0===n?null:n}else n=this._curQueueProps[o];for(var o in e){if(n=this._curQueueProps[o],i=t._plugins[o])for(a=a||{},r=0,s=i.length;s>r;r++)i[r].step&&i[r].step(this,o,n,e[o],a);this._curQueueProps[o]=e[o]}return a&&this._appendQueueProps(a),this._curQueueProps},e._cloneProps=function(t){var e={};for(var i in t)e[i]=t[i];return e},e._addStep=function(t){return t.d>0&&(this._steps.push(t),t.t=this.duration,this.duration+=t.d),this},e._addAction=function(t){return t.t=this.duration,this._actions.push(t),this},e._set=function(t,e){for(var i in t)e[i]=t[i]},createjs.Tween=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(t,e,i){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,i&&(this._useTicks=i.useTicks,this.loop=i.loop,this.ignoreGlobalPause=i.ignoreGlobalPause,i.onChange&&this.addEventListener("change",i.onChange)),t&&this.addTween.apply(this,t),this.setLabels(e),i&&i.paused?this._paused=!0:createjs.Tween._register(this,!0),i&&null!=i.position&&this.setPosition(i.position,createjs.Tween.NONE)}var e=createjs.extend(t,createjs.EventDispatcher);e.addTween=function(t){var e=arguments.length;if(e>1){for(var i=0;e>i;i++)this.addTween(arguments[i]);return arguments[0]}return 0==e?null:(this.removeTween(t),this._tweens.push(t),t.setPaused(!0),t._paused=!1,t._useTicks=this._useTicks,t.duration>this.duration&&(this.duration=t.duration),this._prevPos>=0&&t.setPosition(this._prevPos,createjs.Tween.NONE),t)},e.removeTween=function(t){var e=arguments.length;if(e>1){for(var i=!0,n=0;e>n;n++)i=i&&this.removeTween(arguments[n]);return i}if(0==e)return!1;for(var r=this._tweens,n=r.length;n--;)if(r[n]==t)return r.splice(n,1),t.duration>=this.duration&&this.updateDuration(),!0;return!1},e.addLabel=function(t,e){this._labels[t]=e;var i=this._labelList;if(i){for(var n=0,r=i.length;r>n&&!(e<i[n].position);n++);i.splice(n,0,{label:t,position:e})}},e.setLabels=function(t){this._labels=t?t:{}},e.getLabels=function(){var t=this._labelList;if(!t){t=this._labelList=[];var e=this._labels;for(var i in e)t.push({label:i,position:e[i]});t.sort(function(t,e){return t.position-e.position})}return t},e.getCurrentLabel=function(){var t=this.getLabels(),e=this.position,i=t.length;if(i){for(var n=0;i>n&&!(e<t[n].position);n++);return 0==n?null:t[n-1].label}return null},e.gotoAndPlay=function(t){this.setPaused(!1),this._goto(t)},e.gotoAndStop=function(t){this.setPaused(!0),this._goto(t)},e.setPosition=function(t,e){0>t&&(t=0);var i=this.loop?t%this.duration:t,n=!this.loop&&t>=this.duration;if(i==this._prevPos)return n;this._prevPosition=t,this.position=this._prevPos=i;for(var r=0,s=this._tweens.length;s>r;r++)if(this._tweens[r].setPosition(i,e),i!=this._prevPos)return!1;return n&&this.setPaused(!0),this.dispatchEvent("change"),n},e.setPaused=function(t){this._paused=!!t,createjs.Tween._register(this,!t)},e.updateDuration=function(){this.duration=0;for(var t=0,e=this._tweens.length;e>t;t++){var i=this._tweens[t];i.duration>this.duration&&(this.duration=i.duration)}},e.tick=function(t){this.setPosition(this._prevPosition+t)},e.resolve=function(t){var e=Number(t);return isNaN(e)&&(e=this._labels[t]),e},e.toString=function(){return"[Timeline]"},e.clone=function(){throw"Timeline can not be cloned."},e._goto=function(t){var e=this.resolve(t);null!=e&&this.setPosition(e)},createjs.Timeline=createjs.promote(t,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"Ease cannot be instantiated."}t.linear=function(t){return t},t.none=t.linear,t.get=function(t){return-1>t&&(t=-1),t>1&&(t=1),function(e){return 0==t?e:0>t?e*(e*-t+1+t):e*((2-e)*t+(1-t))}},t.getPowIn=function(t){return function(e){return Math.pow(e,t)}},t.getPowOut=function(t){return function(e){return 1-Math.pow(1-e,t)}},t.getPowInOut=function(t){return function(e){return(e*=2)<1?.5*Math.pow(e,t):1-.5*Math.abs(Math.pow(2-e,t))}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.sineIn=function(t){return 1-Math.cos(t*Math.PI/2)},t.sineOut=function(t){return Math.sin(t*Math.PI/2)},t.sineInOut=function(t){return-.5*(Math.cos(Math.PI*t)-1)},t.getBackIn=function(t){return function(e){return e*e*((t+1)*e-t)}},t.backIn=t.getBackIn(1.7),t.getBackOut=function(t){return function(e){return--e*e*((t+1)*e+t)+1}},t.backOut=t.getBackOut(1.7),t.getBackInOut=function(t){return t*=1.525,function(e){return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}},t.backInOut=t.getBackInOut(1.7),t.circIn=function(t){return-(Math.sqrt(1-t*t)-1)},t.circOut=function(t){return Math.sqrt(1- --t*t)},t.circInOut=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return-(t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e))}},t.elasticIn=t.getElasticIn(1,.3),t.getElasticOut=function(t,e){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=e/i*Math.asin(1/t);return t*Math.pow(2,-10*n)*Math.sin((n-r)*i/e)+1}},t.elasticOut=t.getElasticOut(1,.3),t.getElasticInOut=function(t,e){var i=2*Math.PI;return function(n){var r=e/i*Math.asin(1/t);return(n*=2)<1?-.5*(t*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/e)):t*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/e)*.5+1}},t.elasticInOut=t.getElasticInOut(1,.3*1.5),createjs.Ease=t}(),this.createjs=this.createjs||{},function(){"use strict";function t(){throw"MotionGuidePlugin cannot be instantiated."}t.priority=0,t._rotOffS,t._rotOffE,t._rotNormS,t._rotNormE,t.install=function(){return createjs.Tween.installPlugin(t,["guide","x","y","rotation"]),createjs.Tween.IGNORE},t.init=function(t,e,i){var n=t.target;return n.hasOwnProperty("x")||(n.x=0),n.hasOwnProperty("y")||(n.y=0),n.hasOwnProperty("rotation")||(n.rotation=0),"rotation"==e&&(t.__needsRot=!0),"guide"==e?null:i},t.step=function(e,i,n,r,s){if("rotation"==i&&(e.__rotGlobalS=n,e.__rotGlobalE=r,t.testRotData(e,s)),"guide"!=i)return r;var a,o=r;o.hasOwnProperty("path")||(o.path=[]);var h=o.path;if(o.hasOwnProperty("end")||(o.end=1),o.hasOwnProperty("start")||(o.start=n&&n.hasOwnProperty("end")&&n.path===h?n.end:0),o.hasOwnProperty("_segments")&&o._length)return r;var c=h.length,l=10;if(!(c>=6&&(c-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";o._segments=[],o._length=0;for(var u=2;c>u;u+=4){for(var d,g,m=h[u-2],_=h[u-1],p=h[u+0],f=h[u+1],v=h[u+2],A=h[u+3],E=m,y=_,x=0,b=[],T=1;l>=T;T++){var S=T/l,I=1-S;d=I*I*m+2*I*S*p+S*S*v,g=I*I*_+2*I*S*f+S*S*A,x+=b[b.push(Math.sqrt((a=d-E)*a+(a=g-y)*a))-1],E=d,y=g}o._segments.push(x),o._segments.push(b),o._length+=x}a=o.orient,o.orient=!0;var w={};return t.calc(o,o.start,w),e.__rotPathS=Number(w.rotation.toFixed(5)),t.calc(o,o.end,w),e.__rotPathE=Number(w.rotation.toFixed(5)),o.orient=!1,t.calc(o,o.end,s),o.orient=a,o.orient?(e.__guideData=o,t.testRotData(e,s),r):r},t.testRotData=function(t,e){if(void 0===t.__rotGlobalS||void 0===t.__rotGlobalE){if(t.__needsRot)return;void 0!==t._curQueueProps.rotation?t.__rotGlobalS=t.__rotGlobalE=t._curQueueProps.rotation:t.__rotGlobalS=t.__rotGlobalE=e.rotation=t.target.rotation||0}if(void 0!==t.__guideData){var i=t.__guideData,n=t.__rotGlobalE-t.__rotGlobalS,r=t.__rotPathE-t.__rotPathS,s=n-r;if("auto"==i.orient)s>180?s-=360:-180>s&&(s+=360);else if("cw"==i.orient){for(;0>s;)s+=360;0==s&&n>0&&180!=n&&(s+=360)}else if("ccw"==i.orient){for(s=n-(r>180?360-r:r);s>0;)s-=360;0==s&&0>n&&-180!=n&&(s-=360)}i.rotDelta=s,i.rotOffS=t.__rotGlobalS-t.__rotPathS,t.__rotGlobalS=t.__rotGlobalE=t.__guideData=t.__needsRot=void 0}},t.tween=function(e,i,n,r,s,a,o,h){var c=s.guide;if(void 0==c||c===r.guide)return n;if(c.lastRatio!=a){var l=(c.end-c.start)*(o?c.end:a)+c.start;switch(t.calc(c,l,e.target),c.orient){case"cw":case"ccw":case"auto":e.target.rotation+=c.rotOffS+c.rotDelta*a;break;case"fixed":default:e.target.rotation+=c.rotOffS}c.lastRatio=a}return"rotation"!=i||c.orient&&"false"!=c.orient?e.target[i]:n},t.calc=function(e,i,n){void 0==e._segments&&t.validate(e),void 0==n&&(n={x:0,y:0,rotation:0});for(var r=e._segments,s=e.path,a=e._length*i,o=r.length-2,h=0;a>r[h]&&o>h;)a-=r[h],h+=2;var c=r[h+1],l=0;for(o=c.length-1;a>c[l]&&o>l;)a-=c[l],l++;var u=l/++o+a/(o*c[l]);h=2*h+2;var d=1-u;return n.x=d*d*s[h-2]+2*d*u*s[h+0]+u*u*s[h+2],n.y=d*d*s[h-1]+2*d*u*s[h+1]+u*u*s[h+3],e.orient&&(n.rotation=57.2957795*Math.atan2((s[h+1]-s[h-1])*d+(s[h+3]-s[h+1])*u,(s[h+0]-s[h-2])*d+(s[h+2]-s[h+0])*u)),n},createjs.MotionGuidePlugin=t}(),this.createjs=this.createjs||{},function(){"use strict";var t=createjs.TweenJS=createjs.TweenJS||{};t.version="",t.buildDate=""}();var ms=window.ms;window.ms||(window.ms={}),ms.wkNameSpace={},ms.VERSION=2,window.pixi=PIXI,window.mjs=PIXI,ms.zeroHitArea=function(t){t.hitArea=new PIXI.Rectangle(0,0,0,0),t.interactive=!1},ms.inherit=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},ms.cloneStage=function(t){var e=new ms.Stage;return e.pageLoadManager=t.pageLoadManager,e.page=t.page,e.eventManager=t.eventManager,e},ms.eventManager=new createjs.EventDispatcher,ms.promote=createjs.promote,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,n=function(){},r=function(){return i.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,r.prototype=new n,r}),ms.currentStageSize=null,ms.loadImage=function(t,e){var i=new Image;i.onload=function(){window.utils.loadedImages[t]=i,e(i)},i.src=t},ms.loadTextureImage=function(t,e,i,n){var r=mjs.Texture.fromImage(t);return r.baseTexture.hasLoaded?(i&&i(),ms.eventManager.dispatchEvent({type:RenderEvent.IMAGE_LOADED,target:e})):(r.baseTexture.on("loaded",function(){i&&i(),ms.eventManager.dispatchEvent({type:RenderEvent.IMAGE_LOADED,target:e})}),r.baseTexture.on("error",function(t){n&&n(),this.source&&ms.eventManager.dispatchEvent({type:RenderEvent.IMAGE_LOAD_ERROR,target:e})})),mjs.Texture.removeTextureFromCache(t),r},ms.rgbToHex=function(t,e,i){function n(t){var e=t.toString(16);return 1==e.length?"0"+e:e}if(void 0==e||void 0==i){if("string"==typeof t){var r=/^rgb[a]?\(([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,[ \n]*([\d]+)[ \n]*,?[ \n]*([.\d]+)?[ \n]*\)$/i.exec(t);return ms.rgbToHex(parseInt(r[1]),parseInt(r[2]),parseInt(r[3]))}return void 0==t.r||void 0==t.g||void 0==t.b?null:ms.rgbToHex(t.r,t.g,t.b)}var s=t;return"#"+n(s)+n(e)+n(i)},ms.colorToIntValue=function(t){return-1!=t.indexOf("#")?(t=t.replace("#","0x"),t=parseInt(t,16)):-1!=t.indexOf("rgb")?(t=ms.rgbToHex(t),t=t.replace("#","0x"),t=parseInt(t,16)):0},ms.isRealJsonObject=function(t){if(!t)return!1;try{return ms.toJSON(t),!0}catch(e){return!1}return!1},ms.isJsonObject=function(t){return t?0==t.indexOf("{")&&t.lastIndexOf("}")==t.length-1:!1},ms.toJSON=function(t){return new Function("","return "+t)()},ms.id=0|998*Math.random(),ms.getNewID=function(){return this.id++},ms.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},ms.PIDiv180=Math.PI/180,ms.I80DivPI=180/Math.PI,ms.R_00=0,ms.R_90=90*ms.PIDiv180,ms.R_180=180*ms.PIDiv180,ms.R_270=270*ms.PIDiv180,ms.R_360=360*ms.PIDiv180,ms.isHex=function(t){return/^(#[a-fA-F0-9]{3,6})$/i.test(t)},ms.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},ms.isString=function(t){return"string"==typeof t||"[object String]"==Object.prototype.toString.call(t)},ms.isEmpty=function(t){return t=t.replace(/^\s+|\s+$/,""),0==t.length},ms.trim=function(t){var e,i;for(t=t.replace(/^\s\s*/,""),e=/\s/,i=t.length;e.test(t.charAt(--i)););return t.slice(0,i+1)},ms.isObject=function(t){var e=typeof t;return"function"==e||t&&"object"==e},ms.isBase64=function(t){return t?-1!=t.indexOf("data:"):!1},ms.createEvent=function(t,e){var i=new createjs.Event(t);return i.target=e,i},ms.formatTime=function(t,e){var i=function(t){return(10>t?"0":"")+t};return e.replace(/HH|mm|ss/g,function(e){switch(e){case"mm":return i(Math.floor(t%3600/60));case"HH":return i(Math.floor(t/3600));case"ss":return i(t%60)}})},ms.formatDate=function(t,e){var i=new Date(t),n=function(t){return(10>t?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return n(i.getFullYear());case"MM":return n(i.getMonth()+1);case"mm":return n(i.getMinutes());case"dd":return n(i.getDate());case"HH":return n(i.getHours());case"ss":return n(i.getSeconds())}})},ms.colorToMatrixColor=function(t){var e=t>>16&255,i=t>>8&255,n=255&t;return[e/255,0,0,0,0,i/255,0,0,0,0,n/255,0,0,0,0,1]},ms.hex2rgb=function(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},ms.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},ms.canUseNewCanvasBlendModes=function(){if("undefined"==typeof document)return!1;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=t+"AP804Oa6"+e;var n=new Image;n.src=t+"/wCKxvRF"+e;var r=document.createElement("canvas");r.width=6,r.height=1;var s=r.getContext("2d");s.globalCompositeOperation="multiply",s.drawImage(i,0,0),s.drawImage(n,2,0);var a=s.getImageData(2,0,1,1).data;return 255===a[0]&&0===a[1]&&0===a[2]},function(t){var e={};e.DISPLAYOBJECT_CLICK="render_event_displayobject_click",e.DISPLAYOBJECT_DBLCLICK="render_event_displayobject_dbclick",e.DISPLAYOBJECT_ADDED="render_event_displayobject_added",e.DISPLAYOBJECT_PRESSDOWN="render_event_displayobject_pressdown",e.DISPLAYOBJECT_PRESSUP="render_event_displayobject_pressup",e.DISPLAYOBJECT_REMOVED="render_event_displayobject_removed",e.DISPLAYOBJECT_TAPHOLD="render_event_displayobject_taphold",e.SHOW_TEXT_EDIT="SHOW_TEXT_EDIT",e.SHOW_WATERMARK_EDIT="SHOW_WATERMARK_EDIT",e.SHOW_TEXT_INPUT="SHOW_TEXT_INPUT",e.HIDE_ALL_MENU="hide_all_menu",e.HIDE_MENU_EXCEPT_TILT="hide_menu_except_tilt",e.IMAGE_LOADED="RENDER_IMAGE_LOADED",e.IMAGE_LOAD_ERROR="RENDER_IMAGE_LOAD_ERROR",e.BEGIN_FILTER_HANDLE="render_event_begin_filter_handle",e.ON_MOVE="ON_REMOVE",e.ON_ROTATE="ON_ROTATE",e.ON_SCALE="ON_SCALE",e.FINISH_FILTER_HANDLE="render_event_finish_filter_handle",e.MAGAZINE_TEXT_EDIT="MAGAZINE_TEXT_EDIT",t.RenderEvent=e}(window),ms.Extractor=function(t){this.node=t},ms.Extractor.prototype.toJSON=function(){var t={};if(this.node.userData){var e=this.node.userData;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}var n=this.node.userProperty;t.item_href=void 0===n.item_href?"":n.item_href,t.can_move=!!n.can_move,t.can_scale=!!n.can_scale,t.can_rotate=!!n.can_rotate,t.can_edit=!!n.can_edit,t.bd_radius=this.node.borderRadius,t.bg_color=this.node.backgroundColor,t.bg_opacity=this.node.backgroundAlpha,t.item_border=this.node.border,t.bd_color=this.node.borderColor,t.bd_opacity=this.node.borderAlpha,t.bd_side=this.node.borderSide,t.item_animation=void 0===n.item_animation?"":n.item_animation,t.item_animation_val=void 0===n.item_animation_val?"":n.item_animation_val,t.item_edit_status=void 0===n.item_edit_status?0:n.item_edit_status;var r={},s=this.node.flippedX;s&&(r.flippedX=!0);var a=this.node.flippedY;return a&&(r.flippedY=!0),r.flippedX||r.flippedY?t.item_mirror=JSON.stringify(r):t.item_mirror="",t.item_id||(t.item_id=-1),t},ms.EditTextExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditTextExtractor,ms.Extractor),ms.EditTextExtractor.prototype.toJSON=function(){var t=this.node._content,e=this.node,i=ms.Extractor.prototype.toJSON.call(this);i.item_type=e.getTextType();var n=Math.floor(e.x-t.width*t.scale.x/2),r=Math.floor(e.y-t.height*t.scale.y/2);return i.item_top=r,i.item_left=n,i.item_width=t.width,i.item_height=t.height,i.item_cntype=1,i.item_val=t.getText(),i.item_val_sub=e.getValSub(),i.item_color=e.getColor(),i.item_opacity=100*e.getAlpha(),i.item_angle=!0,i.rotate_angle=e.rotation/ms.PIDiv180,i.rotate_pos="",i.use_mask=!1,i.mask_color="",i.mask_width=0,i.mask_height=0,i.item_filter="",i.item_filter_val="",i.font_size=e.getFontSize(),i.font_family=e.getFontFamily(),i.restart_play=!1,i.auto_play=!1,i.lock_level=0,i.font_dist=e.getLetterSpacing(),i.font_halign=t.getTextAlign(),i.line_height=t.getLineSpacing(),i.font_valight=e.getTextVAlign(),i.font_frame=e.shadowEnable,i.frame_color=e.getShadowColor()||"",i.frame_pixes=e.getShadowBlur(),i.frame_style=0,i.frame_offsetx=e.getShadowOffsetX(),i.frame_offsety=e.getShadowOffsetY(),i.x_scale=t.scale.x,i.y_scale=t.scale.y,i.is_wrap=e.getIsWrap(),i.is_wrap&&e.setFixedSizeWidth(!0),i.fixed_size=e.getFixedSize(),i},ms.EditImageExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditImageExtractor,ms.Extractor),ms.EditImageExtractor.prototype.toJSON=function(){var t=this.node._content,e=ms.Extractor.prototype.toJSON.call(this);e.item_type=18;var i=t.width,n=t.height,r=this.node.getScale(),s=Math.floor(this.node.x-i*r.x/2),a=Math.floor(this.node.y-n*r.y/2);e.item_top=a,e.item_left=s,e.item_width=i,e.item_height=n;var o="";return this.node.base64ImageData?e.base64ImageData=this.node.base64ImageData:(o=this.node.getImageUrl(),e.base64ImageData&&delete e.base64ImageData),e.item_cntype=2,e.item_val=o,e.item_color="",e.item_opacity=100*t.alpha,e.item_angle=!0,e.rotate_angle=Math.floor(this.node.rotation/ms.PIDiv180),e.rotate_pos="",e.use_mask=!1,e.mask_color="",e.mask_width=0,e.mask_height=0,e.item_filter="",e.item_filter_val="",e.font_size="",e.font_family="",e.restart_play=!1,e.auto_play=!1,e.lock_level=0,e.font_dist=0,e.font_halign="",e.font_valight="",e.font_frame=!1,e.frame_color="",e.frame_pixes=0,e.frame_style=0,e.x_scale=r.x,e.y_scale=r.y,e},ms.EditWaterMarkExtractor=function(t){ms.EditImageExtractor.call(this,t)},ms.inherit(ms.EditWaterMarkExtractor,ms.EditImageExtractor),ms.EditWaterMarkExtractor.prototype.toJSON=function(){var t=ms.EditImageExtractor.prototype.toJSON.call(this);return t.item_type=3,t.frame_style=1,t},ms.GPUImageFilter=function(){},ms.GPUImageFilter.prototype.toJSONString=function(){return""},ms.AbstractFilter=function(){this._filterImageType="image/jpeg",this.dirty=!0},ms.AbstractFilter.prototype.constructor=ms.AbstractFilter,Object.defineProperty(ms.AbstractFilter.prototype,"filterImageType",{get:function(){return this._filterImageType},set:function(t){this._filterImageType=t}}),ms.AbstractFilter.prototype.handleBase64=function(t,e,i){
var n=new Image;n.onload=function(){e.drawImage(n,0,0),i&&i()},n.src="data:"+this.filterImageType+";base64,"+t},ms.AbstractFilter.prototype._handled=function(t,e,i){t.putImageData(e,0,0),i&&i()},ms.AbstractFilter.prototype.applyFilter=function(t,e,i,n){},function(t,e){var i=function(){if(!this._content)throw new Error("_content不能为空，_content为显示对象。");this.Container_constructor(),this._initAttr(),this._init()};t.inherit(i,e.Container);var n=i.prototype;n._initAttr=function(){this.id=t.getNewID(),this._selected=!1,this.isRotation=!1,this.isScale=!1,this.isAdd=!1,this.isDelete=!1,this.isDragging=!1,this._isShowDelete=!0,this._isShowScale=!0,this._isShowAdd=!0,this.distance=0,this.deltaX=0,this.deltaY=0,this.userData=null,this.type=i.TYPE,this._isShowEditComponent=!0,this._extractor=null,this._enable=!0,this._isHugeHitArea=!1,this.extractor=null,this._btnDelete=null,this.userProperty={},this._selectBox=null,this._bdSide="",this.MaxScaleSize=5e3,this.MinScaleSize=20},n._init=function(){this._background||(this._background=new t.Background),this.addChild(this._background),this._content.anchor&&(this._content.anchor.x=.5,this._content.anchor.y=.5),t.zeroHitArea(this._content),this.addChild(this._content),this._selectBox=new t.SelectBox,this.addChild(this._selectBox),this._selectBox.visible=!1;var e=this.getBtnDelete();this.addChild(e),e.visible=!1,e.click=e.tap=function(){this._onBnDeleteHandle(),this.onDelete()}.bind(this),e.interactive=!0,this.isShowDelete=!0,this.onInit()},n.setPosition=function(t,e){if(t=void 0===t?this.x:t,e=void 0===e?this.y:e,this.x=t,this.y=e,!this._isSetPosition){var i=this.getRectArea();i.width>1&&i.height>1&&(this.x=t+i.width/2,this.y=e+i.height/2,this._isSetPosition=!0)}},n.getPosition=function(){var t=this.getRectArea();return{x:this.x-t.width/2,y:this.y-t.height/2}},n.setSize=function(t,e){this._content.width=t,this._content.height=e,this.resize()},n.getSize=function(){return{width:this._content.width,height:this._content.height}},n.setScale=function(t,e){this._content.scale.x=t,this._content.scale.y=e,this.resize()},n.getScale=function(){return{x:this._content.scale.x,y:this._content.scale.y}},n.setAlpha=function(t){this._content.alpha=t},n.getAlpha=function(){return this._content.alpha},n.getRecter=function(){return this._selectBox.getBox()},n.getSelectBox=function(){},n.onDelete=function(){},n._onBnDeleteHandle=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.DISPLAYOBJECT_REMOVED,this))},n._pressDownHandle=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.DISPLAYOBJECT_PRESSDOWN,this)),this.onPressDown()},n.onPressDown=function(){},n._pressUpHandle=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.DISPLAYOBJECT_PRESSUP,this)),this.onPressUp()},n.onPressUp=function(){},n._clickHandle=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.DISPLAYOBJECT_CLICK,this)),this.onClick()},n._dblClickHandle=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.DISPLAYOBJECT_DBLCLICK,this)),this.onDBLClick()},n.onDBLClick=function(){},n._tapHoldHandle=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.DISPLAYOBJECT_TAPHOLD,this)),this.onTapHoldHandle()},n.onTapHoldHandle=function(){},n.onClick=function(){},n._pressMoveHandle=function(e){var i=e.x+this.offset.x,n=e.y+this.offset.y,r=15,s=this.msStage,a=s.width,o=s.height,h=this.getRectArea();i-h.width/2>-r&&i-h.width/2<r?i=h.width/2:i+h.width/2>a-r&&i+h.width/2<a+r&&(i=a-h.width/2),n-h.height/2>-r&&n-h.height/2<r?n=h.height/2:n+h.height/2>o-r&&n+h.height/2<o+r&&(n=o-h.height/2),this.x=i,this.y=n,this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.ON_MOVE,this)),this.onPressMove()},n.onPressMove=function(){},n._scaleHandler=function(e,i){var n=this.getRectArea(),r=n.width*e,s=n.height*i;(r>this.MaxScaleSize||s>this.MaxScaleSize)&&(r>n.width||s>n.height)||r<this.MinScaleSize||s<this.MinScaleSize&&(r<n.width||s<n.height)||(this._content.scale.x*=e,this._content.scale.y*=i,this.onScale(e,i),this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.ON_SCALE,this)),this.resize())},n._rotateHandler=function(){this.msStage&&this.msStage.eventManager.dispatchEvent(t.createEvent(RenderEvent.ON_ROTATE,this)),this.onRotate()},n.onRotate=function(){},n.onScale=function(t,e){},n.getRectArea=function(){var t=this._content,e=t.width,i=t.height,n=t.scale.x,r=t.scale.y;return{x:0,y:0,width:e*n,height:i*r}},n.resize=function(){this._resetBackground(),this._resetBox(),this._resetButtons(),this.onResize()},n.onResize=function(){},n._resetBackground=function(){var t=this.getRectArea(),e=this._background;e.setRect(t.x,t.y,t.width,t.height),e.x=-t.width/2,e.y=-t.height/2},n._resetBox=function(){var t=this.getRectArea(),e=this._selectBox;e.setRect(t.x,t.y,t.width,t.height),e.x=-t.width/2,e.y=-t.height/2},n._resetButtons=function(){var t=this.getRectArea(),e=this._btnDelete;e.x=-37-t.width/2,e.y=-37-t.height/2},n.getRecter=function(){return this._selectBox.getBox()},n.onResetButtons=function(){},Object.defineProperty(n,"selected",{get:function(){return this._selected},set:function(t){this._selected=t,this.isHugeHitArea=t,this._resetBackground(),this._resetBox(),this._showBox(),this._showButtons(t)}}),Object.defineProperty(n,"isShowEditComponent",{get:function(){return this._isShowEditComponent},set:function(t){this._isShowEditComponent=t,this._showBox(),this._showButtons()}}),Object.defineProperty(n,"enable",{get:function(){return this._enable},set:function(t){this._enable=t,t||(this.selected=!1)}}),Object.defineProperty(n,"isShowDelete",{get:function(){return this._isShowDelete},set:function(t){this._isShowDelete=t,this._showButtons()}}),Object.defineProperty(n,"isHugeHitArea",{get:function(){return this._background.isLarge},set:function(t){this._background.isLarge=t}}),Object.defineProperties(n,{backgroundColor:{get:function(){return this._background.backgroundColor},set:function(t){this._background.backgroundColor=t}},backgroundAlpha:{get:function(){return this._background.backgroundAlpha},set:function(t){this._background.backgroundAlpha=t}},borderRadius:{get:function(){return this._background.backgroundRadius},set:function(t){this._background.backgroundRadius=t}},border:{get:function(){return this._background.border},set:function(t){this._background.border=t}},borderColor:{get:function(){return this._background.borderColor},set:function(t){this._background.borderColor=t}},borderAlpha:{get:function(){return this._background.borderAlpha},set:function(t){this._background.borderAlpha=t}},borderSide:{get:function(){return this._bdSide},set:function(t){this._bdSide=t}}}),Object.defineProperty(n,"flippedX",{get:function(){return this._content.flippedX},set:function(t){this._content.flippedX=t}}),Object.defineProperty(n,"flippedY",{get:function(){return this._content.flippedY},set:function(t){this._content.flippedY=t}}),n._showButtons=function(){this._btnDelete.visible=this._isShowEditComponent&&this._selected&&this._isShowDelete},n._showBox=function(){this._selectBox.visible=this._isShowEditComponent&&this._selected},n.getBtnDelete=function(){return this._btnDelete||(this._btnDelete=e.Sprite.fromImage(t.ImageConfig.deleteImage))},n.toJSON=function(){return this.extractor.toJSON()},n.isType=function(e){return t.isString(e)?this.type==e:t.isObject(e)?this.type===e.type||this.type===e.TYPE||this.constructor===e||this instanceof e:!1},n.exitEdit=function(t){t?this._selectBox.visible=!1:this.selected&&(this._selectBox.visible=!0)},n.onInit=function(){},n.getLocalPosition=function(){return{x:0,y:0}},n.setSelectBoxOffsetWidth=function(t){this._selectBox&&this._selectBox.setOffsetWidth(t)},n.setSelectBoxOffsetHeight=function(t){this._selectBox&&this._selectBox.setOffsetHeight(t)},n.zeroHitArea=function(){this._background&&t.zeroHitArea(this._background)},n.destroy=function(){this.extractor&&(this.extractor.node=null),this.userData=null,this.userProperty=null,this._btnDelete.click=this._btnDelete.tap=null,this._btnDelete.interactive=!1,this._background.destroy(),this._background=null,this._selectBox.destroy(),this._selectBox=null,this.Container_destroy()},i.TYPE="BaseEdit",t.BaseEdit=t.promote(i,"Container")}(ms,mjs),ms.BaseText=function(t,e,i){this._dimensions={width:0,height:0},this._lineWidths=[],this.canvas=document.createElement("canvas"),this.canvas.width=1,this.canvas.height=1,this.context=this.canvas.getContext("2d"),this._strokeEnabled=!1,this._shadowEnabled=!1,this._strokeSize=0,this._shadowOffset={x:0,y:0},this._strings=[],this._text=t,this._fontClientHeight=20,this._fontStyle="normal",this._fontSize=e||"20px",this._fontWeight="normal",this._fontFamily=i||"Arial",this._vAlignment="top",this._hAlignment="left",this._resetFontStyleStr(),this._contentSize={width:0,height:0},this._fillColor="#000000",this._strokeColor="#000000",this._shadowBlur=0,this._shadowColor="#000000",this._mirrorY=!1,this._mirrorX=!1,this._lineSpacing=0,this._lineHeight=0,this._letterSpacing=0,this._delayDirtyTimer=null,this._tempFont=this._fontFamily,this.resolution=1;var n=PIXI.Texture.fromCanvas(this.canvas);n.trim=new PIXI.Rectangle,PIXI.Sprite.call(this,n),this.setText(t),this._fontClientHeight=ms.BaseText.__getFontHeightByDiv(this._fontFamily,this._fontSize,this._fontStyle)},ms.inherit(ms.BaseText,PIXI.Sprite),ms.BaseText.prototype.setContentSize=function(t,e){this._contentSize.width=t,this._contentSize.height=e},ms.BaseText.prototype.getContentSize=function(){return this._contentSize},ms.BaseText.prototype._measure=function(t){return this.context.measureText(t).width+(t.length-1)*this._letterSpacing},ms.BaseText.prototype._measureConfig=function(){this.context.font=this._fontStyleStr},ms.BaseText.prototype.setText=function(t){this._text=t||"",this._delayDirty(),this._text&&this._fontFamily&&this._loadFont()},ms.BaseText.prototype.getText=function(){return this._text},Object.defineProperty(ms.BaseText.prototype,"width",{get:function(){return this._dirty&&(this._updateTexture(),this._dirty=!1),this._contentSize.width},set:function(t){this.setDimensionsWidth(t)}}),Object.defineProperty(ms.BaseText.prototype,"height",{get:function(){return this._dirty&&(this._updateTexture(),this._dirty=!1),this._contentSize.height},set:function(t){this.setDimensionsHeight(t)}}),ms.BaseText.prototype.setDimensions=function(t,e){this._dimensions.width=t||0,this._dimensions.height=e||0,this._dirty=!0,this._delayDirty()},ms.BaseText.prototype.getDimensions=function(){return this._dimensions},ms.BaseText.prototype.setDimensionsWidth=function(t){this._dimensions.width=t||0,this._delayDirty()},ms.BaseText.prototype.setDimensionsHeight=function(t){this._dimensions.height=t||0,this._delayDirty()},ms.BaseText.prototype._resetFontStyleStr=function(){this._fontStyleStr=this._fontStyle+" "+this._fontWeight+" "+this._fontSize+" "+this._tempFont},ms.BaseText.prototype._delayDirty=function(){this._dirty=!0},ms.BaseText.prototype.getFontSize=function(){return this._fontSize},ms.BaseText.prototype._updateTexture=function(){var t=this.context,e=this.canvas,i=this._contentSize;if(0===this._text.length)return e.width=1,e.height=i.height||1,!0;t.font=this._fontStyleStr,this._updateTTF();var n=i.width,r=i.height,s=e.width==n&&e.height==r;e.width=n,e.height=r,s&&t.clearRect(0,0,n,r),this._drawTTFInCanvas(t);var a=this._texture;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.crop.width=a._frame.width=this.canvas.width/this.resolution,a.crop.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=0,a.trim.y=0,a.trim.width=a._frame.width,a.trim.height=a._frame.height-0,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,a.baseTexture.emit("update",a.baseTexture),this.dirty=!1,this._dirty=!1},ms.BaseText.prototype._drawTTFInCanvas=function(){var t=this.context,e=this._strokeShadowOffsetX,i=this._strokeShadowOffsetY,n=this._contentSize.height-i,r=this._vAlignment,s=this._hAlignment,a=this._lineHeight||this._fontClientHeight,o=this._strokeSize;t.setTransform(1,0,0,1,0+.5*e,n+.5*i),t.font!=this._fontStyleStr&&(t.font=this._fontStyleStr),t.fillStyle=this._fillColor;var h=0,c=0,l=this._strokeEnabled;if(l&&(t.lineWidth=2*o,t.strokeStyle=this._strokeColor),this._shadowEnabled){var u=this._shadowOffset;t.shadowColor=this._shadowColor,t.shadowOffsetX=u.x,t.shadowOffsetY=u.y,t.shadowBlur=this._shadowBlur}t.textBaseline=this._vAlignment,"center"===s&&this._letterSpacing>0?t.textAlign="left":t.textAlign=s;var d=this._contentSize.width-e;h+="right"===s?d:"center"===s?d/2:0;var g=0;if(this._isMultiLine){var m=this._strings.length;"bottom"===r?c=a+n-a*m:"middle"===r&&(c=a/2+(n-a*m)/2);for(var _=0;m>_;_++){var p=this._strings[_],f=0;if(f=m>1?-n+a*_+c:-n+this._fontClientHeight*_+c,this._letterSpacing>0)if(g=h,"right"==s)for(var v=p.length-1;v>=0;v--)l&&t.strokeText(p[v],g,f),t.fillText(p[v],g,f),g-=this._measure(p[v])+this._letterSpacing;else if("center"==s){var A=this._measure(p);g=d/2-A/2;for(var v=0;v<p.length;v++)l&&t.strokeText(p[v],g,f),t.fillText(p[v],g,f),g+=this._measure(p[v])+this._letterSpacing}else for(var v=0;v<p.length;v++)l&&t.strokeText(p[v],g,f),t.fillText(p[v],g,f),g+=this._measure(p[v])+this._letterSpacing;else l&&t.strokeText(p,h,f),t.fillText(p,h,f)}}else"bottom"===r?(l&&t.strokeText(this._text,h,c),t.fillText(this._text,h,c)):"top"===r?(c-=n,l&&t.strokeText(this._text,h,c),t.fillText(this._text,h,c)):(c-=.5*n,l&&t.strokeText(this._text,h,c),t.fillText(this._text,h,c))},ms.BaseText.prototype._updateTTF=function(){var t,e,i=this._dimensions.width,n=this._lineWidths;if(n.length=0,this._isMultiLine=!1,this._measureConfig(),this._strings=this._text.split(/(?:\r\n|\r|\n)/),0!==i){var r=[];for(t=0;t<this._strings.length;t++)this._checkWarp(this._strings,t,i,r);for(t=0,e=this._strings.length;e>t;t++)n.push(this._measure(this._strings[t]))}else for(t=0,e=this._strings.length;e>t;t++)n.push(this._measure(this._strings[t]));this._strings.length>0&&(this._isMultiLine=!0);var s=!1;this._strings.length>1&&(s=!0);var a=(this._contentSize,0),o=0;if(this._strokeEnabled&&(a=o=2*this._strokeSize),this._shadowEnabled){var h=this._shadowOffset;a+=2*Math.abs(h.x),o+=2*Math.abs(h.y)}var c=0,l=0,u=Math.max(this._lineHeight,this._fontClientHeight);0===i?this._isMultiLine?(c=0|Math.max.apply(Math,n)+a,l=0|u*this._strings.length+o):(c=0|this._measure(this._text)+a,l=0|this._fontClientHeight+o):0===this._dimensions.height?this._isMultiLine?(c=0|i+a,l=0|u*this._strings.length+o):(c=0|i+a,l=0|u+o):(c=0|i+a,l=0|this._dimensions.height+o);var d=0|Math.max.apply(Math,n)+a;d>c&&(c=d),this.setContentSize(c,l),this._strokeShadowOffsetX=a,this._strokeShadowOffsetY=o},ms.BaseText.prototype._checkWarp=function(t,e,i,n){var r=t[e],s=this._measure(r);if(s>i&&r.length>1){for(var a,o=r.length*(i/s)|0,h=r.substr(o),c=s-this._measure(h),l=0,u=0;c>i&&u++<100;)o*=i/c,o=0|o,h=r.substr(o),c=s-this._measure(h);for(u=0;i>c&&u++<100;){if(h){var d=ms.BaseText._wordRex.exec(h);l=d?d[0].length:1,a=h}o+=l,h=r.substr(o),c=s-this._measure(h)}o-=l,0===o&&(o=1,a=a?a.substr(1):"");var g=r.substr(0,o);if(ms.BaseText.wrapInspection&&ms.BaseText._symbolRex.test(a||h)){var m=ms.BaseText._lastWordRex.exec(g);o-=m?m[0].length:0,a=r.substr(o),g=r.substr(0,o)}if(ms.BaseText._firsrEnglish.test(a)){var m=ms.BaseText._lastEnglish.exec(g);m&&g!==m[0]&&(o-=m[0].length,a=r.substr(o),g=r.substr(0,o))}t[e]=a||h,g&&t.splice(e,0,g)}},ms.BaseText.prototype._renderWebGL=function(t){this._dirty&&(this.resolution=t.resolution,this._updateTexture(),this._dirty=!1),PIXI.Sprite.prototype._renderWebGL.call(this,t)},ms.BaseText.prototype._renderCanvas=function(t){this._dirty&&(this.resolution=t.resolution,this._updateTexture(),this._dirty=!1),PIXI.Sprite.prototype._renderCanvas.call(this,t)},ms.BaseText._labelTextSpan=document.createElement("span"),ms.BaseText._labelTextBlock=document.createElement("div"),ms.BaseText._labelTextDiv=document.createElement("div"),ms.BaseText._labelTextDiv.appendChild(ms.BaseText._labelTextSpan),ms.BaseText._labelTextDiv.appendChild(ms.BaseText._labelTextBlock),ms.BaseText.__getFontHeightByDiv=function(t,e,i){i=i||"normal";var n=ms.BaseText.__fontHeightCache[t+"."+e+"."+i];if(n>0)return n;var r=ms.BaseText._labelTextSpan;r.style.fontFamily=t,r.style.fontSize=e,r.style.fontStyle=i,r.innerHTML="ABC|MÉq";var s=ms.BaseText._labelTextBlock;s.style.display="inline-block",s.style.width="1px",s.style.height="0px";var a=ms.BaseText._labelTextDiv;a.style.height="0px",a.style.overflow="hidden",document.body.appendChild(a),s.style.verticalAlign="baseline";var o=___objOff(s),h=___objOff(r),c=o[1]-h[1];s.style.verticalAlign="bottom",o=___objOff(s),h=___objOff(r);var l=o[1]-h[1],u=l-c,d=[c,l,u];return document.body.removeChild(a),ms.BaseText.__fontHeightCache[t+"."+e+"."+i]=d[1],d[1]},ms.BaseText.fontPropertiesCache={},ms.BaseText.prototype.setFillColor=function(t){this._fillColor=t,this._delayDirty()},ms.BaseText.prototype.setStrokeColor=function(t){this._strokeColor=t,this._delayDirty()},Object.defineProperty(ms.BaseText.prototype,"shadowEnable",{get:function(){return this._shadowEnabled},set:function(t){this._shadowEnabled=t,this._delayDirty()}}),Object.defineProperty(ms.BaseText.prototype,"strokeEnable",{get:function(){return this._strokeEnabled},set:function(t){this._strokeEnabled=!0,this._delayDirty()}}),ms.BaseText.prototype.getShadowBlur=function(){return this._shadowEnabled?this._shadowBlur:0},ms.BaseText.prototype.getShadowColor=function(){return this._shadowEnabled?this._shadowColor:null},ms.BaseText.prototype.setShadowBlur=function(t){this._shadowBlur=t,this._shadowEnabled&&this._delayDirty()},ms.BaseText.prototype.setShadowColor=function(t){this._shadowColor=t,this._shadowEnabled&&this._delayDirty()},ms.BaseText.prototype.setShadowOffsetX=function(t){this._shadowOffset.x=t,this._shadowEnabled&&this._delayDirty()},ms.BaseText.prototype.getShadowOffsetX=function(){return this._shadowOffset.x},ms.BaseText.prototype.setShadowOffsetY=function(t){this._shadowOffset.y=t,this._shadowEnabled&&this._delayDirty()},ms.BaseText.prototype.getShadowOffsetY=function(t){return this._shadowOffset.y},ms.BaseText.prototype.setFontWeight=function(t){this._fontWeight=t,this._resetFontStyleStr(),this._delayDirty()},ms.BaseText.prototype.getFontWeight=function(){return this._fontWeight},ms.BaseText.prototype.setFontSize=function(t){this._fontSize=t,this._resetFont()},ms.BaseText.prototype.setFontFamily=function(t,e){this._fontFamily=t||"Arial",this._tempFont=t||"Arial",this._fontCallback=e;this._text&&this._fontFamily&&"Arial"!=this._fontFamily&&this._loadFont()},ms.BaseText.prototype._loadFont=function(){var t=this;this._loadTask=ms.CloundFontModule.loadFonts([{text:this._text,fontFamily:this._fontFamily}],function(e){if(t.canvas){e?t._tempFont=e:t._tempFont="Arial";var i=t.width*t.scale.x,n=t.height*t.scale.y;t._resetFont(),t._updateTexture(),t._fontCallback&&t._fontCallback(i,n)}})},ms.BaseText.prototype._resetFont=function(){this._resetFontStyleStr(),this._fontClientHeight=ms.BaseText.__getFontHeightByDiv(this._tempFont,this._fontSize,this._fontStyle),this._dirty=!0},ms.BaseText.prototype.getFontFamily=function(){return this._fontFamily},ms.BaseText.prototype.setTextVAlign=function(t){this._vAlignment=t,this._delayDirty()},ms.BaseText.prototype.getTextVAlign=function(){return this._vAlignment},ms.BaseText.prototype.setTextAlign=function(t){this._hAlignment=t,this._delayDirty()},ms.BaseText.prototype.getTextAlign=function(){return this._hAlignment},ms.BaseText.prototype.setFontStyle=function(t){this._fontStyle=t,this._resetFontStyleStr(),this._delayDirty()},ms.BaseText.prototype.getFontStyle=function(){return this._fontStyle},ms.BaseText.prototype.setAlpha=function(t){this.alpha=t},ms.BaseText.prototype.setMirrorX=function(t){this._mirrorX!=t&&(this._mirrorX=t,this.scale.x=-this.scale.x)},ms.BaseText.prototype.setMirrorY=function(t){this._mirrorY!=t&&(this._mirrorY=t,this.scale.y=-this.scale.y)},ms.BaseText.prototype.setLineSpacing=function(t){this._lineSpacing=t,0!=t?this._lineHeight=this._lineSpacing+parseInt(this._fontSize,10):this._lineHeight=0,this._delayDirty()},ms.BaseText.prototype.setLetterSpacing=function(t){this._letterSpacing=t,this._delayDirty()},ms.BaseText.prototype.getLetterSpacing=function(){return this._letterSpacing},ms.BaseText.prototype.getLineSpacing=function(){return this._lineSpacing},ms.BaseText.prototype.destroy=function(){this.canvas=null,this.context=null,this.texture.baseTexture.destroy(),this._loadTask&&this._loadTask.cancelLoad()},ms.BaseText.__fontHeightCache={},ms.BaseText._wordRex=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]+|\S)/,ms.BaseText._symbolRex=/^[!,.:;}\]%\?>、‘“》？。，！]/,ms.BaseText._lastWordRex=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]+|\S)$/,ms.BaseText._lastEnglish=/[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]+$/,ms.BaseText._firsrEnglish=/^[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôû]/,ms.BaseText.wrapInspection=!0,function(t,e){var i=function(){this._content=new t.BaseText(""),this.BaseEdit_constructor(),this.type=i.TYPE,this.isScale=!0,this.isDelete=!0,this.isRotation=!0,this.isDragging=!0,this._realFontFamily="",this._textColor="#000000",this.extractor=new t.EditTextExtractor(this),this._isWrap=!1,this._fixedSize={width:!1,height:!1}};t.inherit(i,t.BaseEdit);var n=i.prototype;n.getTextWidth=function(t){return this._content._measure(t)},n.setIsWrap=function(t){this._isWrap=t},n.getIsWrap=function(){return this._isWrap},n.setAutoWrapWidth=function(t){var e=this;e._content.setDimensionsWidth(t),e.resize()},n.setString=function(t){this._content.setText(t),this.resize()},n.getString=function(){return this._content.getText()},n.setValSub=function(t){this._val_sub=t},n.getValSub=function(){return this._val_sub},n.setColor=function(e){this._textColor=e,t.isJsonObject(e)&&(e=t.toJSON(e),e=e.colors[0]),this._content.setFillColor(e)},n.getColor=function(){return this._textColor},n.setTextAlign=function(t){this._content.setTextAlign(t)},n.getTextAlign=function(){return this._content.getTextAlign()},n.setTextVAlign=function(t){this._content.setTextVAlign(t)},n.getTextVAlign=function(){return this._content.getTextVAlign()},n.setFontSize=function(t){this._content.setFontSize(t),this.resize()},n.setFontWeight=function(t){this._content.setFontWeight(),this.resize()},n.setFontStyle=function(t){this._content.setFontStyle(t),this.resize()},n.getFontWeight=function(){return this._content.getFontWeight()},n.getFontStyle=function(){return this.getFontStyle()},n.getFontSize=function(){return this._content.getFontSize()},n.getFontFamily=function(){return this._content.getFontFamily()},n.setFontFamily=function(t){var e=this;this._content.setFontFamily(t,function(t,i){var n=e.x,r=e.y,s=n-t/2,a=r-i/2;e.setPosition(s,a),e.resize()})},n.setLineSpacing=function(t){t=~~t,this._content.setLineSpacing(t),this.resize()},n.setLetterSpacing=function(t){t=~~t,this._content.setLetterSpacing(t),this.resize()},n.getLetterSpacing=function(){return this._content.getLetterSpacing()},n.getLineSpacing=function(){return this._content.getLineSpacing()},n.setPosition=function(t,e){var i=this.getRectArea();this.x=t+i.width/2,this.y=e+i.height/2,this._textGHalign&&this.setGlobalHAlign(this._textGHalign),this._textGValign&&this.setGlobalVAlign(this._textGValign)},n.onPressMove=function(){this._textGHalign=null,this._textGValign=null},n.getLocalPosition=function(){var t=this.getRectArea();return{x:this.x-t.width/2,y:this.y-t.height/2}},n.setSize=function(t,e){this._content.width=t,this._content.height=e,this.resize()},n.setTextMirror=function(t){switch(t){case"left":this._content.flippedX=!0;break;case"top":this._content.flippedY=!0;break;case"nleft":this._content.flippedX=!1;break;case"ntop":this._content.flippedY=!1}},n.setGlobalHAlign=function(t){var e=this._content.width,i=0;this.msStage&&(i=this.msStage.width),this._textGHalign=t,"left"==t?this.x=e/2:"center"==t?this.x=i/2:"right"==t&&(this.x=i-e/2)},n.setGlobalVAlign=function(t){var e=0;this.msStage&&(e=this.msStage.height);var i=this._content.height;this._textGValign=t,"top"==t?this.y=i/2:"middle"==t?this.y=e/2:"bottom"==t&&(this.y=e-i/2)},n.destroy=function(){this.BaseEdit_destroy(),this._content.destroy()},n.setTextType=function(t){this._textType=t},n.getTextType=function(){return this._textType?this._textType:2},n.onScale=function(t,e){var i=this._content.getDimensions(),n=i.width/t;this._content.setDimensionsWidth(n)},n.getScale=function(){return this._content.scale},Object.defineProperty(n,"shadowEnable",{get:function(){return this._content.shadowEnable},set:function(t){this._content.shadowEnable=t}}),n.setShadowColor=function(t){this._content.setShadowColor(t)},n.getShadowColor=function(){return this._content.getShadowColor()},n.setShadowBlur=function(t){this._content.setShadowBlur(t)},n.getShadowBlur=function(){return this._content.getShadowBlur()},n.setShadowOffsetX=function(t){this._content.setShadowOffsetX(t)},n.getShadowOffsetX=function(){return this._content.getShadowOffsetX()},n.setShadowOffsetY=function(t){this._content.setShadowOffsetY(t)},n.getShadowOffsetY=function(){return this._content.getShadowOffsetY()},n.setFixedSize=function(t,e){this._fixedSize.width=t,this._fixedSize.height=e},n.setFixedSizeWidth=function(t){this._fixedSize.width=t},n.setFixedSizeHeight=function(t){this._fixedSize.height=t},n.getFixedSize=function(){return JSON.stringify(this._fixedSize)},i.TYPE="EditText",t.EditText=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this.EditText_constructor(),this.type=i.TYPE};t.inherit(i,t.EditText);var n=i.prototype;n.onClick=function(){t.eventManager.dispatchEvent({type:RenderEvent.MAGAZINE_TEXT_EDIT,target:this})},i.TYPE="EditMagazineText",t.EditMagazineText=t.promote(i,"EditText")}(ms,mjs),function(t,e){var i=function(){this.EditMagazineText_constructor(),this.type=i.TYPE,this.extractor=new t.EditInputTextExtractor(this)};t.inherit(i,t.EditMagazineText);i.prototype;i.TYPE="EditInputText",t.EditInputText=t.promote(i,"EditMagazineText")}(ms,mjs),function(t,e){var i=function(){this._content=new e.Sprite(new e.Texture(new e.BaseTexture)),this.BaseEdit_constructor(),this.type=i.TYPE,this.isShowEditComponent=!1,this.base64ImageData=null,this._imageUrl="",this.extractor=new t.EditImageExtractor(this)};t.inherit(i,t.BaseEdit);var n=i.prototype;n.onInit=function(){this.setSelectBoxOffsetWidth(0),this.setSelectBoxOffsetHeight(0)},n.setImageUrl=function(t){this._isReset=!1,this._setUrl(t),this._loadImage(t)},n._loadImage=function(e){var i=this;if(null!=window.device&&window.device.ios&&window.device.ios()&&e.indexOf("file://")>=0)i.getIOSFileImage(e);else{this._destroyTexture(!0);var n=t.loadTextureImage(e,this,function(){i._imageLoaded()});this._content.texture=n}},n.getIOSFileImage=function(t){var e=this;fmantv_read_file_from_local_path(t,function(i){t==e.getImageUrl()&&(i="data:image/png;base64,"+i,e._loadImage(i))},function(t){})},n._imageLoaded=function(){this._isReset?this._handleImageLoaded():this.setPosition(),this.resize(),this._content._filterDirty=!0},n._setUrl=function(e){t.isBase64(e)?(this.base64ImageData=e,this._imageUrl=""):(this.base64ImageData=null,this._imageUrl=e)},n._destroyTexture=function(){var t=this._content.texture;t&&t.destroy(!0),t.baseTexture&&(t.baseTexture.removeAllListeners("loaded"),t.baseTexture.removeAllListeners("error")),this._content.texture=null},n.setFilters=function(t){this._content.setFilters(t)},n.getImageUrl=function(){return this._imageUrl},n.replaceBase64ToUrl=function(t){this.base64ImageData=null,this._imageUrl=t},n.setImageUrlAndReset=function(t){this._isReset=!0,this._setUrl(t),this._loadImage(t)},n._handleImageLoaded=function(){this._content.scale.x=1,this._content.scale.y=1,this.imgSHowAllGeometric(),this.resize()},n.imgSHowAllGeometric=function(){var t=this.msStage,e=this._content,i=e.texture;e.width=i.width,e.height=i.height;var n=0,r=0,s=e.width,a=e.height,o=1,h=1,c=1,l=e.scale.x,u=e.scale.y;t&&(n=t.width,r=t.height),s>n||a>r?(s>n&&(h=n/s),h=Math.max(h,l),a>r&&(c=r/a),c=Math.max(c,u),o=Math.max(h,c)):(h=n/s,h=Math.max(h,l),c=r/a,c=Math.max(c,u),o=Math.max(h,c)),e.scale.x=o,e.scale.y=o,this.x=n/2,this.y=r/2},n.setRotationAndReset=function(){var t=this._content,e=t.texture,i=t.scale.x,n=t.scale.y;t.width!=e.width&&(i=t.width/e.width),t.height!=e.height&&(n=t.height/e.height),t.width=e.width,t.height=e.height,t.scale.x=i,t.scale.y=n,this.resize()},n.destroy=function(){this.BaseEdit_destroy(),this._destroyTexture(!0),this.base64ImageData=null},i.TYPE="EditImage",t.EditImage=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this.EditImage_constructor(),this.type=i.TYPE,this.extractor=new t.EditFingerprintExtractor(this),this._imageType="",this._itemColor="",this._itemImage=""};t.inherit(i,t.EditImage);var n=i.prototype;n.setImageType=function(e){this._imageType=e,"icon-fingerprint"==e&&(this._itemImage=t.ImageConfig.fingerPrintImage,this.resetImage())},n.getImageType=function(){return this._imageType},n.setItemColor=function(t){this._itemColor=t,this.resetImage()},n.getItemColor=function(){return this._itemColor},n.resetImage=function(){var e=this;""!=e._itemColor&&""!=e._itemImage&&e._loadBase64(e._itemImage,function(){t.CanvasTinter.convertTintToImage=!0;var i=t.colorToIntValue(e._itemColor),n=t.CanvasTinter.getTintedTexture(e._content,i),r=n.toDataURL();t.CanvasTinter.convertTintToImage=!1,n=null,e._loadImage(r)})},n._loadBase64=function(e,i){var n=this;n._destroyTexture();var r=t.loadTextureImage(e,n,function(){i&&i()});n._content.texture=r},i.TYPE="EditFingerprint",t.EditFingerprint=t.promote(i,"EditImage")}(ms,mjs),function(t,e){var i=function(){this.EditImage_constructor(),this.type=i.TYPE,this.isDelete=!0,this.isDragging=!0,this.isScale=!0,this.isRotation=!0,this.isShowEditComponent=!0,this._isCenter=!1,this.extractor=new t.EditWaterMarkExtractor(this)};t.inherit(i,t.EditImage);var n=i.prototype;n.onInit=function(){this.setSelectBoxOffsetWidth(20),this.setSelectBoxOffsetHeight(20)},n.setCenter=function(){this._isCenter=!0},n.setPosition=function(e,i){t.EditImage.prototype.setPosition.call(this,e,i);var n=this.msStage;n&&this._isCenter&&(this._isCenter=!1,this.x=n.width/2,this.y=n.height/2)},i.TYPE="EditWaterMark",t.EditWaterMark=t.promote(i,"EditImage")}(ms,mjs),function(t,e){var i=function(){this._content=new PIXI.Graphics,t.BaseEdit.call(this),this.type=i.TYPE,this._content.visible=!1,this.reverseHit=!0,this._borderWidth=0,this._borderColor="#FFFFFF",this._tWidth=0,this._tHeight=0,this._borderType=1,this.isShowEditComponent=!1,this.IconType=1,this.TitleHeight=100,this.ItemHeight=86,this.titleItem=null,this.itemColor="#ffffff",this.fontSize="30px",this.fontFamily="",this.letterSpacing=0,this.lineSpaceing=0,this.vAlignment="",this.hAlignment="",this.radioList=[],this.extractor=new t.EditRadioFrameExtractor(this)};t.inherit(i,t.BaseEdit);var n=i.prototype;n.setLetterSpacing=function(t){this.letterSpacing=~~t,this.resetRadioList()},n.getLetterSpacing=function(){return this.letterSpacing},n.setLineSpacing=function(t){this.lineSpaceing=~~t,this.resetRadioList()},n.getLineSpacing=function(){return this.lineSpaceing},n.setTextVAlign=function(t){this.vAlignment=t},n.getTextVAlign=function(){return this.vAlignment},n.setTextAlign=function(t){this.hAlignment=t},n.getTextAlign=function(){return this.hAlignment},n.setBorderWidth=function(t){this._borderWidth=t,this._setBorderType(1)},n.getBorderWidth=function(){return this._borderWidth},n.setBorderColor=function(t){this._borderColor=t,this._setBorderType(1)},n.getBorderColor=function(){return this._borderColor},n.setHitArea=function(t,e,i,n){this.hitArea=new PIXI.Rectangle(t,e,i,n),this.__passEvent=!0,this._selectBox.visible=!1,this._background.visible=!1},n.setSize=function(t,e){this._tWidth=t,
this._tHeight=e,this._setBorderType(this._borderType)},n.getSize=function(){return{width:this._tWidth,height:this._tHeight}},n._setBorderType=function(t){this._borderType=t,1==t?this._content.visible=!0:this._content.visible=!1},n.setPosition=function(t,e){this.x=t,this.y=e},n.getPosition=function(){return{x:this.x,y:this.y}},n.getEditChildren=function(){for(var e=this.children,i=[],n=0;n<e.length;n++)e[n]instanceof t.BaseEdit&&i.push(e[n]);return i},n.exitEdit=function(t){var e=this;e.BaseEdit_exitEdit(t)},n.destroy=function(){var t=this;t.removeChild(t.titleItem),t.titleItem.destroy(),t.titleItem=null,t.removeRadioList(),t.BaseEdit_destroy()},n.removeRadioList=function(){for(var t,e=this,i=0;i<e.radioList.length;i++)t=e.radioList[i],e.removeChild(t),t.destroy(),t=null},n.setValue=function(t){var e=this;try{e._radioValue=JSON.parse(t),e.initRadioList()}catch(i){e._radioValue=null}},n.getValue=function(){var t,e=this,i={},n=[];i.title=e.titleItem.getValue();for(var r=0;r<e.radioList.length;r++)t=e.radioList[r],n.push(t.getValue());i.options=n,e._radioValue=i;try{return JSON.stringify(i)}catch(s){return""}return""},n.setFontSize=function(t){this.fontSize=t,this.resetRadioList()},n.getFontSize=function(){return this.fontSize},n.setFontFamily=function(t){this.fontFamily=t,this.resetRadioList()},n.getFontFamily=function(){return this.fontFamily},n.initRadioList=function(){var e=this;e.removeRadioList();var i=e._radioValue.title;e.titleItem||(e.titleItem=new t.EditRadioItem,e.addChild(e.titleItem)),e.titleItem.setValue(i),e.titleItem.setFontSize(e.fontSize),e.titleItem.setColor(e.itemColor),e.titleItem.setIconType(0),e.titleItem.setBackGroundColor("#000000"),e.titleItem.setSize(e._tWidth,e.TitleHeight),e.titleItem.setLetterSpacing(e.letterSpacing),e.titleItem.setLineSpacing(e.lineSpaceing);for(var n=e._radioValue.options,r=0;r<n.length;r++){var s=new t.EditRadioItem;s.setValue(n[r]),s.setIconType(e.IconType),s.setFontSize(e.fontSize),s.setSize(e._tWidth,e.ItemHeight),s.setBordColor(e._borderColor),s.setLetterSpacing(e.letterSpacing),s.setLineSpacing(e.lineSpaceing),s.setBorder(1),e.addChild(s),s.y=e.TitleHeight+r*e.ItemHeight,e.radioList.push(s)}},n.setItemColor=function(t){this.itemColor=t,this.titleItem&&this.titleItem.setColor(t)},n.getItemColor=function(){return this.itemColor},n.setBordColor=function(t){this.bordColor=t,this.resetRadioList()},n.getBordColor=function(){return this.bordColor},n.resetRadioList=function(){var t=this;t.titleItem&&(t.titleItem.setFontSize(t.fontSize),t.titleItem.setColor(t.itemColor),t.titleItem.setSize(t._tWidth,t.TitleHeight),t.titleItem.setLetterSpacing(t.letterSpacing),t.titleItem.setLineSpacing(t.lineSpaceing));for(var e,i=0;i<t.radioList.length;i++)e=t.radioList[i],e.setFontSize(t.fontSize),e.setSize(t._tWidth,t.ItemHeight),e.setBordColor(t._borderColor),e.setLetterSpacing(t.letterSpacing),e.setLineSpacing(t.lineSpaceing)},i.TYPE="EditRadioFrame",t.EditRadioFrame=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this.EditRadioFrame_constructor(),this.type=i.TYPE,this.IconType=2,this.extractor=new t.EditCheckFrameExtractor(this)};t.inherit(i,t.EditRadioFrame);i.prototype;i.TYPE="EditCheckFrame",t.EditCheckFrame=t.promote(i,"EditRadioFrame")}(ms,mjs),ms.DisplayObjectManager=function(t){this._render=t,this._currentSelectedObject=null,this._pressDownObject=null,this._selectedTween=null,this._initEvent=!1,this.__eventHandle=this._eventHandle.bind(this)},ms.DisplayObjectManager.prototype={get pageIndex(){return this._render.msStage.pageIndex},get selectedObject(){return this._currentSelectedObject}},ms.DisplayObjectManager.prototype._eventHandle=function(t){var e=t.type,i=t.target;switch(e){case RenderEvent.DISPLAYOBJECT_CLICK:this._displayObjectClick(i);break;case RenderEvent.DISPLAYOBJECT_DBLCLICK:this._displayObjectDblClick(i);break;case RenderEvent.DISPLAYOBJECT_TAPHOLD:this._tapHold(i);break;case RenderEvent.DISPLAYOBJECT_PRESSDOWN:this._displayObjectPressdown(i);break;case RenderEvent.DISPLAYOBJECT_PRESSUP:this._displayObjectPressup(i);break;case RenderEvent.DISPLAYOBJECT_REMOVED:this._displayObjectRemove(i);break;case RenderEvent.ON_MOVE:this._displayObjectOnMove(i);break;case RenderEvent.ON_SCALE:this._displayObjectOnScale(i);break;case RenderEvent.ON_ROTATE:this._displayObjectOnRotate(i)}},ms.DisplayObjectManager.prototype._displayObjectClick=function(t){this.setSelectedObject(t),ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.DISPLAYOBJECT_CLICK,t))},ms.DisplayObjectManager.prototype._displayObjectDblClick=function(t){ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.DISPLAYOBJECT_DBLCLICK,t))},ms.DisplayObjectManager.prototype._displayObjectPressdown=function(t){this._pressDownObject=t},ms.DisplayObjectManager.prototype._displayObjectPressup=function(t){},ms.DisplayObjectManager.prototype._tapHold=function(t){ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.DISPLAYOBJECT_TAPHOLD,t))},ms.DisplayObjectManager.prototype._displayObjectRemove=function(t){ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.DISPLAYOBJECT_REMOVED,t))},ms.DisplayObjectManager.prototype._displayObjectOnMove=function(t){ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.ON_MOVE,t))},ms.DisplayObjectManager.prototype._displayObjectOnScale=function(t){ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.ON_SCALE,t))},ms.DisplayObjectManager.prototype._displayObjectOnRotate=function(t){ms.eventManager.dispatchEvent(ms.createEvent(RenderEvent.ON_ROTATE,t))},ms.DisplayObjectManager.prototype.setSelectedObject=function(t){t==this._currentSelectedObject||(this._currentSelectedObject&&(this._currentSelectedObject.selected=!1),this._currentSelectedObject=t,t&&(t.selected=!0,this.displayObjectSelectedAnimation(t)))},ms.DisplayObjectManager.prototype.displayObjectSelectedAnimation=function(t){this._removeSelectedTween();var e=t.scale.x,i=t.scale.y;t.scale.tweenScaleX=e,t.scale.tweenScaleY=i;if(t.isType(ms.EditMagazineText)){return}else t.scale.x=.818*e,t.scale.y=.818*i,t.alpha=1,this._selectedTween=createjs.Tween.get(t.scale).to({x:e,y:i},1500,createjs.Ease.elasticOut).call(function(t){},[t])},ms.DisplayObjectManager.prototype.setAllDisplayRectAlpha=function(t,e){this._render.setAllDisplayRectAlpha(t)},ms.DisplayObjectManager.prototype.installEvent=function(){if(!this._initEvent){this._initEvent=!0;var t=this._render.eventManager;t.addEventListener(RenderEvent.DISPLAYOBJECT_CLICK,this.__eventHandle),t.addEventListener(RenderEvent.DISPLAYOBJECT_DBLCLICK,this.__eventHandle),t.addEventListener(RenderEvent.DISPLAYOBJECT_TAPHOLD,this.__eventHandle),t.addEventListener(RenderEvent.DISPLAYOBJECT_PRESSDOWN,this.__eventHandle),t.addEventListener(RenderEvent.DISPLAYOBJECT_PRESSUP,this.__eventHandle),t.addEventListener(RenderEvent.DISPLAYOBJECT_REMOVED,this.__eventHandle),t.addEventListener(RenderEvent.ON_MOVE,this.__eventHandle),t.addEventListener(RenderEvent.ON_SCALE,this.__eventHandle),t.addEventListener(RenderEvent.ON_ROTATE,this.__eventHandle)}},ms.DisplayObjectManager.prototype.uninstallEvent=function(){if(this._initEvent){this._initEvent=!1;var t=this._render.eventManager;t.removeEventListener(RenderEvent.DISPLAYOBJECT_CLICK,this.__eventHandle),t.removeEventListener(RenderEvent.DISPLAYOBJECT_DBLCLICK,this.__eventHandle),t.removeEventListener(RenderEvent.DISPLAYOBJECT_TAPHOLD,this.__eventHandle),t.removeEventListener(RenderEvent.DISPLAYOBJECT_PRESSDOWN,this.__eventHandle),t.removeEventListener(RenderEvent.DISPLAYOBJECT_PRESSUP,this.__eventHandle),t.removeEventListener(RenderEvent.DISPLAYOBJECT_REMOVED,this.__eventHandle),t.removeEventListener(RenderEvent.ON_MOVE,this.__eventHandle),t.removeEventListener(RenderEvent.ON_SCALE,this.__eventHandle),t.removeEventListener(RenderEvent.ON_ROTATE,this.__eventHandle)}},ms.DisplayObjectManager.prototype._removeSelectedTween=function(){if(this._selectedTween){var t=this._selectedTween.target;t&&(t.tweenScaleX&&(t.x=t.tweenScaleX,t.y=t.tweenScaleY,delete t.tweenScaleX,delete t.tweenScaleY),createjs.Tween.removeTweens(t)),this._selectedTween=null}},ms.DisplayObjectManager.prototype.getEditSpriteImageData=function(t){var e=t.getImageUrl();return t.base64ImageData&&(e=t.base64ImageData),e},ms.DisplayObjectManager.prototype.getParentByEditPicFrame=function(t){var e=null;return t&&(t.isType(ms.EditPicFrame)?e=t:t.parent&&t.parent instanceof ms.BaseEdit&&t.parent.isType(ms.EditPicFrame)&&(e=t.parent)),e},ms.DisplayObjectManager.prototype.getChildByEditSprite=function(t){var e,i,n=null,r=t.children,s=r.length;for(e=0;s>e;e++)if(i=r[e],i&&i.isType(ms.EditSprite)){n=i;break}return n},ms.DisplayObjectManager.prototype.destroy=function(){this.uninstallEvent(),this._removeSelectedTween(),this._render=null,this.__eventHandle=null,this._currentSelectedObject=null,this._pressDownObject=null},ms.MagazineObjectConfig={1:function(){return ms.EditSprite},2:function(){return ms.EditMagazineText},11:function(){return ms.EditMagazineText},12:function(){return ms.EditMagazineText},13:function(){return ms.EditMagazineText},14:function(){return ms.EditInputText},15:function(){return ms.EditMap},3:function(){return ms.EditWaterMark},4:null,5:null,6:null,7:function(){return ms.EditVoice},8:function(){return ms.EditVideo},9:null,10:function(){return ms.EditBorderFrame},17:function(){return ms.EditPicFrame},18:function(){return ms.EditImage},19:function(){return ms.EditButton},20:function(){return ms.EditRadioFrame},21:function(){return ms.EditCheckFrame},22:function(){return ms.EditVote},24:function(){return ms.EditSmearPic},25:function(){return ms.EditFingerprint},27:function(){return ms.EditShake},28:function(){return ms.EditMagazineText},29:function(){return ms.EditLieText},30:function(){return ms.EditTimeInputText},31:function(){return ms.EditPwInputText},32:function(){return ms.EditDateInputText},33:function(){return ms.EditMakeFrame},38:function(){return ms.EditMark},35:function(){return ms.EditWebButton},42:function(){return ms.EditPwInputText}},ms.MagazinePageRenderer=function(t){this._currentPageIndex=0,this._tpl=t,this._pageTpl=[],t&&(this._pageTpl=t.page_value),this._renderers=[],this._created=[],this._pageStages=[],this._scriptParser=new ms.ScriptParser(t),this._pageStages=this._scriptParser._pageStages,this._pageLoadManager=this._scriptParser.pageLoadManager,this._pageLoadManager.setPageLoadedFn(this._pageLoadHandle,this)},ms.MagazinePageRenderer.prototype={get currentPageIndex(){return this._currentPageIndex},get pageLength(){return this._pageStages.length},get renders(){return this._renderers},get tpl(){return this._tpl},get pageTpl(){return this._pageTpl},get pageLoadManager(){return this._scriptParser.pageLoadManager}},ms.MagazinePageRenderer.prototype.setCurrentPage=function(t){var e=this.pageLength;0!=e&&(0>=t?t=0:t>=e-1&&(t=e-1),this.renders[this._currentPageIndex]&&(this.renders[this._currentPageIndex].editEnable=!1,this.renders[this._currentPageIndex].stop()),this._currentPageIndex=t,this.loadPage(t),this.renders[t]&&(this.renders[t].editEnable=!0,this.renders[t].start()))},ms.MagazinePageRenderer.prototype.getRenderByIndex=function(t){return this.loadPage(t),this.renders[t]},ms.MagazinePageRenderer.prototype.preLoad=function(t){if(!(0>t||t>this.pageLength-1))for(var e=this.pageLength,i=this._currentPageIndex;t-- >0;)i--,0>i&&(i=e-1),this.loadPage(i)},ms.MagazinePageRenderer.prototype.nextLoad=function(t){if(!(0>t||t>this.pageLength-1))for(var e=this.pageLength,i=this._currentPageIndex;t-- >0;)i++,i>e-1&&(i=0),this.loadPage(i)},ms.MagazinePageRenderer.prototype.loadPage=function(t){var e=(this._scriptParser,this.pageLength);0>t?t=0:t>e.length-1&&(t=e.length-1),this._created[t]||this._createRendererAndObjects(t)},ms.MagazinePageRenderer.prototype._createRendererAndObjects=function(t){var e;e=this._createPageRenderer(t),this._created[t]=!0,this._addStageToRenderer(e)},ms.MagazinePageRenderer.prototype.addDisplayObject=function(t,e,i){void 0===e&&(e=this._currentPageIndex),this._renderers[e].addDisplayObject(t,i)},ms.MagazinePageRenderer.prototype.removeDisplayObject=function(t,e){void 0===e&&(e=this._currentPageIndex),this._renderers[e].removeDisplayObject(t)},ms.MagazinePageRenderer.prototype._createPageRenderer=function(t){if(this._renderers[t])return this._renderers[t];var e=this._scriptParser.getPageStageByIndex(t),i=new ms.Renderer(null,e);return this._renderers[t]=i,i},ms.MagazinePageRenderer.prototype.changePageTemplatebyScript=function(t,e,i){this._tpl||(this._tpl={},this._tpl.page_value=[]),this._pageTpl=this._tpl.page_value,this._pageTpl[e]=t,this._scriptParser.changePageValue(this._tpl,e);var n,r=this._scriptParser.getPageStageByIndex(e,i);return this._renderers[e]?(n=this._renderers[e],n.msStage=r):n=new ms.Renderer(null,r),this._created[e]=!0,this._addStageToRenderer(n),this._renderers[e]=n,n},ms.MagazinePageRenderer.prototype.addNewPageRenderer=function(t){(void 0===t||t>this.pageLength-1)&&(t=this.pageLength),this._created.splice(t,0,!1),this._renderers.splice(t,0,null),this._pageStages.splice(t,0,null),this._pageTpl.splice(t,0,null);var e=this._createPageRenderer(t);return this._resetPageIndex(),e},ms.MagazinePageRenderer.prototype.removePageRenderer=function(t){if(!(0>t||t>this.pageLength-1)){this._created.splice(t,1),this._pageTpl.splice(t,1);var e=this._renderers.splice(t,1),i=this._pageStages.splice(t,1);this._resetPageIndex(),e[0]?e[0].destroy(!0):i[0]&&i[0].destroy(),i.length=0,e.length=0,e=null}},ms.MagazinePageRenderer.prototype.insertPageRender=function(t,e){var i,n,r,s;if(i=this._created[t],n=this._renderers[t],r=this._pageTpl[t],s=this._pageStages[t],e>t)for(var a=t;e>=a;a++)a==e?(this._created[a]=i,this._renderers[a]=n,this._pageTpl[a]=r,this._pageStages[a]=s):(this._created[a]=this._created[a+1],this._renderers[a]=this._renderers[a+1],this._pageTpl[a]=this._pageTpl[a+1],this._pageStages[a]=this._pageStages[a+1]);else for(var a=t;a>=e;a--)a==e?(this._created[a]=i,this._renderers[a]=n,this._pageTpl[a]=r,this._pageStages[a]=s):(this._created[a]=this._created[a-1],this._renderers[a]=this._renderers[a-1],this._pageTpl[a]=this._pageTpl[a-1],this._pageStages[a]=this._pageStages[a-1])},ms.MagazinePageRenderer.prototype.swapPageRenderer=function(t,e){return t==e?!1:(this.swapArray(this._created,t,e),this.swapArray(this._renderers,t,e),this.swapArray(this._pageTpl,t,e),this.swapArray(this._pageStages,t,e),t==this._currentPageIndex&&(this._currentPageIndex=e),e==this._currentPageIndex&&(this._currentPageIndex=t),this._resetPageIndex(),!0)},ms.MagazinePageRenderer.prototype.swapArray=function(t,e,i){var n=t[e];t[e]=t[i],t[i]=n},ms.MagazinePageRenderer.prototype._resetPageIndex=function(){var t,e,i=this._pageStages.length;for(t=0;i>t;t++)e=this._pageStages[t],e&&(e.pageIndex=t)},ms.MagazinePageRenderer.prototype._pageLoadHandle=function(t){var e=this.renders[t];e&&setTimeout(function(){e.reRender()},0)},ms.MagazinePageRenderer.prototype._addStageToRenderer=function(t){for(var e=t.msStage,i=e.displayObjects.length,n=e.displayObjects,r=0;i>r;r++)t.addDisplayObject(n[r],void 0),n[r].resetAttribute()},ms.MagazinePageRenderer.prototype.getImageDataByPageIndex=function(t,e,i,n,r,s){function a(){if(t>h.pageLength-1)return void e(null);if(o&&o.msStage){var l=h.pageLoadManager.getPageLoadStatus(t);if(u>=c||l)o.reRender(),o.getImageData(e,i,n,r,s);else{if(u>=c)return void e(null);setTimeout(function(){u++,a()},10)}}}if(0>t||t>this.pageLength-1)e(null);else{this.loadPage(t);var o=this.renders[t],h=this,c=1500;if(o){var l=this.pageLoadManager.getPageLoadStatus(t);if(l)o.reRender(),o.getImageData(e,i,n,r,s);else{var u=0;a()}}}},ms.MagazinePageRenderer.prototype.getLogoImageDataByPageIndex=function(t,e,i,n,r,s,a){var o=this;o.getImageDataByPageIndex(t,function(t){var n,r,s=document.createElement("canvas"),o=s.getContext("2d"),h=new Image;h.crossOrigin="Anonymous",h.onload=function(){n=h.width,r=h.height,s.width=n,s.height=r,o.drawImage(h,0,0,n,r,0,0,n,r);var c=new Image;c.crossOrigin="Anonymous";var l=a.x||0,u=a.y||0;c.onload=function(){o.drawImage(c,l,u),e(s.toDataURL(i)),s=null,o=null},c.onerror=function(){e(t)},c.src=a.src},h.onerror=function(){e(t)},h.src=t},i,n,r,s)},ms.MagazinePageRenderer.prototype.destroy=function(){this._pageLoadHandle=null,this._pageLoadManager=null,this._tpl=null;var t,e=this._renderers.length;for(t=e-1;t>=0;t--)this._renderers[t]&&(this._renderers[t].stop(),this._renderers[t].destroy(!0),this._renderers[t]=null);this._renderers=[],this._created=[],this._pageStages=[],this._scriptParser.destroy(),this._scriptParser=null},ms.magazinePageService={pageRender:null,scriptParser:null,_currentPage:-1,_tpl:null,pageDatas:[],backgroundMusicPath:"",createPageRender:function(t,e){var i=this;t&&(i.pageDatas=t.page_value||t.pages||[],i.backgroundMusicPath=t.tpl_music||null),i._tpl=t,i.pageRender=new ms.MagazinePageRenderer(t),e&&(e(),e=null)},setBackgroundMusicPath:function(t){this.backgroundMusicPath=t},getBackgroundMusicPath:function(){return this.backgroundMusicPath},getCurrentPageIndex:function(){return this._currentPage<0&&(this._currentPage=0),this._currentPage>this.getTotalPage()-1&&(this._currentPage=this.getTotalPage()-1),this._currentPage},getCurrentPageRenderSelectObject:function(){if(this._currentPage>=0){var t=this.getRenderByPage(this._currentPage);return t.selectedObject}return null},getTotalPage:function(){return this.pageRender?this.pageRender.pageLength:0},clearData:function(){createjs.Tween.removeAllTweens(),this.pageDatas=[],this.backgroundMusicPath="",this._tpl=null,this._currentPage=-1,this.pageRender&&this.pageRender.destroy(),this.pageRender=null},nextPage:function(){this._currentPage!=this.getTotalPage()-1&&(this._currentPage++,this.setCurrentPage(this._currentPage))},prePage:function(){this._currentPage<=0||(this._currentPage--,this.setCurrentPage(this._currentPage))},stopEngine:function(){if(0!=this.getTotalPage()){var t=this.pageRender.getRenderByIndex(this._currentPage);t.editEnable=!1,t.stop()}},startEngine:function(){if(0!=this.getTotalPage()){var t=this.pageRender.getRenderByIndex(this._currentPage);t.editEnable=!0,t.start()}},setCurrentPage:function(t){0!=this.getTotalPage()&&(this._currentPage=t,this.pageRender.setCurrentPage(t))},getRenderByPage:function(t){return 0!=this.getTotalPage()?this.pageRender.getRenderByIndex(t):void 0},changeBgColorByPage:function(t,e){if(0!=this.getTotalPage()){var i=this.getRenderByPage(e);i.backgroundColor=t.backgroundColor,i.backgroundImage=t.backgroundImage}},getBgColorByPage:function(t){if(0!=this.getTotalPage()){var e=this.getRenderByPage(t),i={};return i.backgroundImage=e.backgroundImage,i.backgroundColor=e.backgroundColor,i}},addObjectToPage:function(t,e,i){this.pageRender.addDisplayObject(t,e,i)},insertPageRender:function(t,e){this.pageRender.insertPageRender(t,e)},swapPageRender:function(t,e){this.pageRender.swapPageRenderer(t,e)},getBackgroundThumb:function(){var t,e,i,n,r,s=this.pageDatas.length,a=[];for(t=0;s>t;t++)if(r=this.pageDatas[t].page_effect_img,r&&""!=r)n=r,"AV:"==n.substr(0,3)&&(n=n.slice(3)),a.push(n);else for(i=this.pageDatas[t].item_object,e=0;e<i.length;e++)if(1==i[e].item_type){n=i[e].item_val,""==n&&i[e].base64ImageData&&(n=i[e].base64ImageData),"AV:"==n.substr(0,3)&&(n=n.slice(3)),a.push(n);break}return a},getRenderPageEffectImg:function(){for(var t,e,i=[],n=this.pageRender.renders,r=this.pageRender.pageLength,s=0;r>s;s++)e=n[s],e?i[s]=e.pageThumb:(t=this.pageRender.pageTpl[s],i[s]=t.page_effect_img);return i},setRenderPageEffectImg:function(t,e){var i,n,r=this.pageRender.renders;i=r[t],i?i.pageThumb=e:(n=this.pageRender.pageTpl[t],n.page_effect_img=e)},getImageDataByPageIndex:function(t,e,i,n,r,s){this.pageRender.getImageDataByPageIndex(t,e,i,n,r,s)},getLogoImageDataByPageIndex:function(t,e,i,n,r,s,a){this.pageRender.getLogoImageDataByPageIndex()},_createPageJson:function(){var t={};return t.page_no=1,t.size_type=1,t.page_width=0,t.page_height=0,t.color_off=!1,t.color_code="0",t.color_transp=0,t.img_off=!1,t.img_reshow=!1,t.line_off=!1,t.line_witch=0,t.line_color="0",t.line_radius="none",t.filter="none",t.filter_val="none",t.item_int=0,t.item_object=[],t},getPagesToAvos:function(t){var e=this.getPagesToJson(t),i=fmacapi.convert_josn_2_tpldata(e);return i},getPagesToJson:function(t){var e,i,n,r={},s=[];if(!this.pageRender)return null;var a=this.pageRender.renders,o=this.pageRender.pageLength;for(e=0;o>e;e++){if(i=a[e]){if(n=this._createPageJson(),n.page_width=i.stageWidth,n.page_height=i.stageHeight,n.inherit_plate=i.msStage.plate,n.page_effect_img=i.pageThumb,n.img_off=!1,n.color_off=!1,""!=i.backgroundColor&&(n.color_off=!0,n.color_code=i.backgroundColor),i.backgroundImage&&""!=i.backgroundImage&&(n.img_off=!0,n.bg_code=i.backgroundImage),this.pageRender.pageTpl[e]){var h=this.pageRender.pageTpl[e];h.objectId&&(n.objectId=h.objectId)}n.item_object=i.getItemObjectsToJson()}else{n=this.pageRender.pageTpl[e];var c,l,u=n.item_object.length;for(l=0;u>l;l++)c=n.item_object[l],"number"==typeof c.bd_color&&(c.bd_color=c.bd_color+""),"number"==typeof c.bd_radius&&(c.bd_radius=c.bd_radius+"")}n.f_belong_tpl&&delete n.f_belong_tpl,n.f_order_num&&delete n.f_order_num,n.f_tpl_group_id&&delete n.f_tpl_group_id,n.page_no=e+1,t&&(n.userid=t),s.push(n)}return r.pages=s,r},clearTplObjectId:function(){this.clearPageRenderPageTplId(),this.clearRenderObjectId()},clearRenderObjectId:function(){var t,e,i,n=this.pageRender.renders,r=0,s=n.length;for(r=0;s>r;r++)if(t=n[r]){i=t.getEditChildren();for(var a=0;a<i.length;a++)e=i[a],e.userData&&(e.userData.objectId&&delete e.userData.objectId,e.userData.id&&delete e.userData.id)}},clearPageRenderPageTplId:function(){var t,e,i=this.pageRender.pageLength;for(t=0;i>t;t++)if(e=this.pageRender.pageTpl[t]){e.id&&delete e.id,e.objectId&&delete e.objectId;var n,r,s=e.item_object.length;for(r=0;s>r;r++)n=e.item_object[r],n.id&&delete n.id,n.objectId&&delete n.objectId}},getTplVersion:function(){var t=[];this.pageRender.tpl&&t.push(this.pageRender.tpl.render_version||2);for(var e,i=this.pageRender.renders,n=this.pageRender.pageLength,r=0;n>r;r++)e=i[r],e&&t.push(e.pageVersion);return Math.max.apply(null,t)},getTplSize:function(){for(var t,e,i=[],n=[],r=this.pageRender.renders,s=this.pageRender.pageLength,a=0;s>a;a++)t=r[a],t?(i.push(t.stageWidth),n.push(t.stageHeight)):(e=this.pageRender.pageTpl[a],i.push(e.page_width),n.push(e.page_height));var o=Math.max.apply(null,i),h=Math.max.apply(null,n);return[o,h]},addNewPage:function(t){this.pageRender.addNewPageRenderer(t)},changePageTemplatebyScript:function(t,e,i){this.pageRender.changePageTemplatebyScript(t,e,i)},removePage:function(t){0>t||t>=this.pageRender.pageLength||this.pageRender.removePageRenderer(t)},removeDisplayObject:function(t,e){this.pageRender.removeDisplayObject(t,e)}},ms.Renderer=function(t,e){this.stageScene=null,this.msStage=e,this.canvasId="",this.canvas=null,this.context=null,this._renderInited=!1,this.showFps=!1,this.imageGenerator=null,this.tempCanvas=null,this.tempContext=null,this._backgroundImage=null,this._backgroundColor=null,this._displayObjectManager=new ms.DisplayObjectManager(this),this._editEnable=!1,this._initCanvas(),this._init()},ms.Renderer.prototype={set backgroundImage(t){this._backgroundImage=t,t?this.canvas.style.backgroundImage="url('"+t+"')":this.canvas.style.backgroundImage="none"},get backgroundImage(){return this._backgroundImage},set backgroundColor(t){t?this._backgroundColor=t:this._backgroundColor="#FFFFFF",this.canvas.style.backgroundColor=this._backgroundColor},get backgroundColor(){return this._backgroundColor},get stageWidth(){return this.msStage.width},get stageHeight(){return this.msStage.height},set pageVersion(t){this.msStage.pageVersion=t},get pageVersion(){return this.msStage.pageVersion},set pageThumb(t){this.msStage&&(this.msStage.pageThumb=t)},get pageThumb(){return this.msStage.pageThumb},set editEnable(t){this._editEnable=t,t?this._displayObjectManager.installEvent():this._displayObjectManager.uninstallEvent()},get editEnable(){return this._editEnable},get pageTpl(){return this.msStage.pageTpl},get eventManager(){return this.msStage.eventManager},get selectedObject(){return this._displayObjectManager.selectedObject}},ms.Renderer.prototype._init=function(){var t=this.stageWidth,e=this.stageHeight;if(this._renderInited)this.stageWidth==t&&this.stageHeight==e||this.renderer.resize(t,e);else{var i=this.canvas;this._renderInited=!0,this.renderer=new PIXI.CanvasRenderer(t,e,{view:i,transparent:!0})}this.backgroundColor=this.msStage.backgroundColor,this.backgroundImage=this.msStage.backgroundImage},ms.Renderer.prototype.resize=function(t,e){this.stageWidth==t&&this.stageHeight==e||(this.stageWidth=t,this.stageHeight=e,this.msStage.width=t,this.msStage.height=e,this.renderer.resize(t,e))},ms.Renderer.prototype.tick=function(){this.renderer.render(this.stageScene)},ms.Renderer.prototype.start=function(){sharedTicker.add(this.tick,this)},ms.Renderer.prototype.stop=function(){sharedTicker.remove(this.tick,this)},ms.Renderer.prototype.addDisplayObject=function(t,e){void 0!==e?this.stageScene.addChildAt(t,e):this.stageScene.addChild(t),t.msStage=this.msStage},ms.Renderer.prototype.setSelectedObject=function(t){this._displayObjectManager.setSelectedObject(t)},ms.Renderer.prototype.removeDisplayObject=function(t){this.stageScene.removeChild(t)},ms.Renderer.prototype.reRender=function(){this.renderer&&this.stageScene&&this.renderer.render(this.stageScene)},ms.Renderer.prototype._initCanvas=function(){var t=this.canvas=document.createElement("canvas");this.context=t.getContext("2d"),this.tempCanvas=document.createElement("canvas"),this.tempContext=this.tempCanvas.getContext("2d"),this.canvasId="renderCanvas"+ms.getNewID(),t.id=this.canvasId,t.style.backgroundRepeat="repeat",this.stageScene=new PIXI.Container(16777215)},ms.Renderer.prototype.toDataURL=function(t,e){return this.renderer&&this.renderer.view?this.renderer.view.toDataURL(t||"image/png",e||1):null},ms.Renderer.prototype.getImageData=function(t,e,i,n,r){var s=this.canvas,a=null,o=this;if(n=n||s.width,r=r||s.height,this.backgroundColor||this.backgroundImage){var h=this.tempCanvas,c=this.tempContext;if(h.width=n,h.height=r,this.backgroundColor&&(c.fillStyle=this.backgroundColor,c.fillRect(0,0,n,r)),this.backgroundImage){var l=new Image;l.crossOrigin="Anonymous",l.onload=function(){var a=c.createPattern(l,"repeat");c.fillStyle=a,c.fillRect(0,0,n,r),o._handleExitEdit(function(){c.drawImage(s,0,0,s.width,s.height,0,0,n,r)}),l=null,t(h.toDataURL(e,i)),h.width=1,h.height=1,h=null},l.onerror=function(){o._handleExitEdit(function(){c.drawImage(s,0,0,s.width,s.height,0,0,n,r)}),a=h.toDataURL(e,i),h.width=1,h.height=1,h=null,l=null,t(a)},l.src=this.backgroundImage}else o._handleExitEdit(function(){c.drawImage(s,0,0,s.width,s.height,0,0,n,r)}),a=h.toDataURL(e,i),h.width=1,h.height=1,h=null,l=null,t(a)}else o._handleExitEdit(function(){a=o.toDataURL(e,i)}),t(a),t=null},ms.Renderer.prototype.setAllDisplayRectAlpha=function(t){var e,i,n,r=this.stageScene.children,s=r.length;for(e=0;s>e;e++)i=r[e],i.isType&&i.isType(ms.EditMagazineText)&&(n=i.getRecter(),n.alpha=t)},ms.Renderer.prototype.getEditChildren=function(){for(var t=this.stageScene.children,e=[],i=null,n=0;n<t.length;n++)i=t[n],i&&i instanceof ms.BaseEdit&&e.push(i);return e},ms.Renderer.prototype.getItemObjectsToJson=function(){var t,e,i=[],n=this.stageScene.children,r=0,s=[],a=function(){return s.indexOf(r)>=0?(r++,a()):r},o=this.msStage.unknownObject;if(o.length>0){for(u=0;u<o.length;u++)t=o[u],s.push(t.item_layer);i=i.concat(o)}for(var h=0;h<n.length;h++)if(t=n[h],t&&t instanceof ms.BaseEdit)if(e=t.toJSON(),ms.isArray(e))for(var c=0;c<e.length;c++){var l=e[c];l.item_layer=a(),r++,delete l.__key_id,i.push(l)}else e.item_layer=a(),r++,delete e.__key_id,i.push(e);var u,d=this._getBrowseItemObjects();if(d.length>0){for(u=0;u<d.length;u++)t=d[u],t.item_layer=a(),r++;i=i.concat(d)}return i},ms.Renderer.prototype._getBrowseItemObjects=function(){for(var t,e,i,n,r,s=[],a=this.msStage.itemObjects,o=a.length,h=0;o>h;h++)i=a[h],n=i.item_type+"",r=i.group_id,"34"==n&&(t=[],r>0&&(e=this._getItemObjectsByGroup(r),t=t.concat(e)),this._setObjectNewGroupId(t),s=s.concat(t));return s},ms.Renderer.prototype._getItemObjectsByGroup=function(t){for(var e,i=[],n=this.msStage.itemObjects,r=n.length,s=0;r>s;s++)e=n[s],e.group_id==t&&i.push(e);return i},ms.Renderer.prototype._setObjectNewGroupId=function(t){var e,i,n=t.length;i=ms.getNewID();for(var r=0;n>r;r++)e=t[r],e.group_id=i},ms.Renderer.prototype._handleExitEdit=function(t){this._exitEdit(!0),this.reRender(),t(),this._exitEdit(!1),this.reRender()},ms.Renderer.prototype._exitEdit=function(t){for(var e=this.stageScene.children,i=e.length-1;i>=0;i--)e[i].exitEdit&&e[i].exitEdit(t)},ms.Renderer.prototype.destroy=function(t){this.stop(),this._displayObjectManager.destroy(),this._displayObjectManager=null,this.renderer.destroy();for(var e=this.stageScene.children,i=e.length-1;i>=0;i--){var n=e[i];n instanceof ms.BaseEdit&&n.destroy()}this.stageScene.removeChildren(),t&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.msStage.destroy(),this.msStage=null,this.stageScene=null,this.canvasId="",this.canvas=null,this.context=null,this.imageGenerator=null,this.tempCanvas=null,this.tempContext=null,this._backgroundImage=null,this._backgroundColor=null},ms.FontServerConfig="http://agoodme.com:3000",ms.MapBaiduURI="http://api.map.baidu.com/staticimage/v2?ak=VzFAGGC7tDTFzqKKIsTI7GRV&copyright=1&center=",ms.ImageConfig={deleteImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAEO0lEQVRYw82ZTWhcVRTHf5OXN5rGVImCzWlaP2pcZDXTh7QuYtCA6KIVJCQxuJIOoWY3oqSruKtmo0KGAZEmIajgwoWV6KZBRDJ0htuIgSxqKzSm3kojgk1SLJJx8e4kmcl8vPdmJtP/bt67577fO3PfOefeE6IKOY7TAkSA48DTwFHgUaDFDLkL/AWsAL8Bi8CiUupu0GeGAkCGgOeBU8ALwAM+p/gX+BG4CKSUUtm6ATuO8xJwBng2qIcKdBX4VCn1Q02BHcfpBM4BJ2oEWqjLwHml1GqlgZYH2JeBj4Gn6gQL0AmcEpE/tNbXyw0s6WGzVs8Cb9URtJguAMlSa7uohw3su8Cb+wwLEAUeE5GftNZ7bjaVMBoFBhoAm9PrhmGP9njYrNl3GgibU0REbhSu6bw1bKLB50Bro2mNNoHh3dGjcEmcu49gAQ4Ypm1tA5ukUK84W41OGLYdYBMVznixnpiYeDKVSkVHRkYeD0oQj8cllUodHx8fP+LRJGYYtz18Eo/ptqenp9227aZYLNY5Ojp6yC/s2NjY4eHh4Q7btkO9vb3tHs26cOsXN0qIyNvAMS+Wzc3NW47jHASIRqMHbdvOZjKZda+w/f39hwCy2SzJZPL3paWlTY/Qltb6kmVKxHE8pGkApdRGOBzORiIRX9CFsIlEYmV2dnbN6z8DHBGRLywReQ63VPSsdDq97ge6GOz09PRtP880Dl20ROQ13HToS+l0et227Ww0Gi0LXSPYnP60ROQN4Ikg1plMpix0jWEB7lgiEgMeCTpDKei+vr6HawwLkLVEZAR4sJpZikF3d3c/VGNYgJAlImfxGCH8QNcBFsBqqn6OHbW1teW9eCgUorW1tWpn5BGLyDBVLgnY+4GFQm4h6De5VNC6JSKnqeKjKwY7OTm5sry8vF4p5AXQLUtEThIwrJWCnZmZuV0p5AXUL5aIPEOAxFEONne/DtDzlojYwKu1hq0T9JQlImu4u2PPX7NX2BpD3wM+tLTW/4nIMTyWl/F4XAYHBzu8wpaDBraUUhsegeeVUt/n4vC3Xl9zYGDAs2cLlUgkbk1NTd3M/R4aGvKzAbgIOwX8KvAi7lFpWYlIc0dHRziZTK76rGe3PQ1sdXV1tczNza0tLCzc8WD2K/CJ1npnm282ehN+AfZJ7yml5mHXrtlcuNxosiJK52DzgI3O4x5e3C/aNEzbygtlWut/ROQm0NdoUqP3lVJXSgIb6OsiEsbtXTRS00qpLwsvliovE8BXDYT92jDsUdHsprVGRBaAZgLWGVXoAvBRqQPtij0Ox3FeYX8OCTeAD5RS35UbVLF+0FpfE5FLuH24w3WCTQNxpZSqNDBI2yuGe9ZVC10FPtsdZ2sKbKBzjcXTuI3FsM8p7uE2Fr+h3o3FIvAHcMNfFLfaOwq04x5Egxv4/wZu4LZurwA/K6UCJ6f/AfF9C+zq4FCyAAAAAElFTkSuQmCC",playImage:"data:image/png;base64,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",
voiceImage:"data:image/png;base64,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",loveImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAk1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////ROyVeAAAAMHRSTlMAk5YFkAMJ07yqjXsb6sm2w7ByVUI2FZs7LCHkpKKeh11LKg/59oJrZ2MH38zLbC5Ut7GgAAABQUlEQVQ4y+3U2XKCMBQG4JMFAhoQAVncFZdqt7z/0/VkSilQldN7/4t/4MwHhMlM4JlbKWQYmECtEvdn4ia5Cg6L6DTr0TSM4lkG2efWD87CTkQc+JcyE7oYv3lt7kiTNDd7FmkAHcp5M9qajdNYnwloZfyq54txe1KxFdTZMKyOVirujXj9cGoq6KUs+xNtCrAJEyBkG9lOPSAlKrD4Cw3HEkuVNDwLsY4uDWcBlgFa3CPW4UrDeoGl9v9Yc36h4TPD2k1o2EuxHLWj2OQdi/hq177YhsthzEb1hfBGQ3Y0dZpvDGk5cbFpWk5FZ/2TB5r5aLtaUi3mek+zpfN3KKbypl2jJWqeo6VpwTn2He2z7l/bvSXqij/eK2f5qzO+waZpzU/YA3r1ref2dBvWa0a2VnPYmxiIybn5IFLC+UfJF13xD4R8xJZYAAAAAElFTkSuQmCC",starImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAApVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+4/eNVAAAANnRSTlMABHT9tRTlgkUk9+6tkI1LNRr68unIf29lUSEJ0L66oZVbVU9CPQzZy6abiGJfLhB7OTEp3JLBAldcAAABcklEQVQ4y72VWZaCMBBFE4JhEgUUFUTAGRFw6GH/S+sjGsBOQvLT/T6gKB45GW4V4H+lT6e6tPkYbI+y3t0KgFh26OEGgGAo53U9CAD0XCnzTCNXsSB26/ExlDAHw2bmYsV6sydCGYhE6ENoHikkmtsi79IakPBiLQXmMmnjvBCYfaeNnazfO1a7T+qYXpL53Yi8Jp+2b8xRnZoOgIQGVn3TTnuxd396sbKZKCKvMlmTMPTtS5/1YPthh7QzCnrQQmf4XkpY4/KNdWq1amowwUpV1m7NzQWdLDzO4u+YgjLEDuBo/sUFltaVWqR25SN3+51xfO7xIzqHeO1jkdO5nN4hgi8XcJoAs6m5qmpq0jwwzVvSC29JFBFseb0mKV+7/cBxTbBdJywvfFbM0s6MmonMPjwbAmTVwqqeCxrBBtvt477a8VrRrPsz0fGM15iOBgjT2H07pTgNgfHJME/uJY2j4hWVyTo/K2Lg6ETWAvy9fgBpIRieGSeZ2QAAAABJRU5ErkJggg==",flagImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMAEe7ylvZwVkAm3dzKuqyKIgkDTvlo0wAAAGVJREFUOMvt1UkOgCAQRNFmFJy17n9XE1aaToeQ6ELgr19qW/Rlg4HQyrEJwsoJYoGkmsCHSu0qhy0Ap1MjPMNy0RVgQsfVYItHVsZ8HX/EqgBvGqzlhvN1XAU2gfxc8INTpNe7APMjC6OtgOwdAAAAAElFTkSuQmCC",voteImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMAljIJ9r2GQBnq5cVb3tabjnp2Y1QOBM7KwrKeiiAV+at8cWVLOSodtpNsJBNGW5wrAAABCElEQVQ4y+3Q527DIBSG4Rcc7xXHibP36OT+b6/Fsqo0xdjqj1SV8giE4HxIcLiHlTKaYRJuMFGW0z8Lq4bASKhGc7WXX4aF/RniW1jZP6j+dXjg6GkLO4N6atkF5r4t7M/hkqEND5DMnfawEydwGKLJmb4x9V2MXH+qczNJbecBY3eMSVPwds32PR3RYZRNaKyz1QSLyWr6dLXzBp6/wWjjfxYdrgWFGwoMROgWgeF8UfBDscAsiI7cOEYBLWQ4umlCKGm1jpdXVbmM19iU6SKp2/T2+pyWdKhOy0iASF9OFX2oesAjDJQ55CW9nLcS5PZMD0GU6CWJAjpV8Z7aPq7okqsvOXfzAcsgHm2+JtVxAAAAAElFTkSuQmCC",smearImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAq1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8AAADEkN71AAAAN3RSTlMAEDJLY3qIkZkfVYEIRoAKTI4BOo0WdhUzVARuYlIUkHWMB4MjVoIRNE9oiYaVEo9NC1Nkk5aFovZW5QAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAG4SURBVFjDrZfpdoIwEIVHBBkVlMW674p7q9W2vv+bVfG0KiGQyXj/wv0OyZDJHQCJCkbRtEo2ol2yzKJRAJLKlSomVK2UVd2OW8NU1VxHwV73fJTK9+o59iBsYKYaYZDlf2tirpotub9t5/svZWnLPr+jYr+qk7qMrqnqRzS7Kf6euh+xJxCCPsWP2E+uYkDzIw6e/QbVj/hUi+GIDhgNHzZgTPcjju/bEOr4EcP/8zMRH57P51zA5O9keagHQO/mn/q6AP/WH1zUBaAbl2CmD5hdCzFHfQDOL4CIA4gugCoHsABYYiYgD7SUHSNVwArW6c4EQMpZw4YH2IDFA1iw5QF2YFMAIscH5AHe+QD2EkibKAJ2tDKKAEv2I2Vj79rIfmVVwBpWSgDpw5VwnImAD4AFB7AQWxoNEIlNlQaYi22dBIjbeuJiIQHiiwWcfeKdTD2+u3dSLlcK4JB2vRMAk89XBQwIFCKyqOZD0mvphKyn0N2mAxKR+0j1H18dddlhmx/3+QMHsEce4A9d/LHverIOWYPnIW/wjPsDb/SNVY6E+DqLlIfvmwqGd7K2X/i9/7FOnnz8/wWr77G0VqRAGAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNi0wNC0wOFQxNDo0MTo1MyswODowMCziOKgAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTYtMDQtMDhUMTQ6NDE6NTMrMDg6MDBdv4AUAAAAAElFTkSuQmCC",fingerPrintImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH4AAAB+CAMAAADV/VW6AAAAYFBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////98JRy6AAAAH3RSTlMAf3oEdXANCGtaRCI2OxFmVWNJXhUZJi1RTR0/MSrfp2dJagAAD/1JREFUaN7sltmypEYMRCXVvu8FFGD//18axuFXj+P2HfvFGTQB1RF9KiUlNPz+N/otwcdKv/0dAX6H/1D/4/+5/sf/j/8f/1/ilw9nKkv1db9yQ/2LeFeDG30YxJJzbqUZjrxVx/694qvLQl/wl+QIhlCHfwGvVjCcL3nnYn64L7lOeNS37Zfjx04ocvV9P5ba7vPY7nsZTMd5d/WLi682g8JvDB4xOaydboz4UONl90bJiH38MjzbON8VAzbuzNEcR7XBGoEo8vUaZwAxcHH9Enw8RHPvzBmibIL8k/eel/ebRjLWbhFYKOX8BfgSAGAaxON80CpemZCnlEz1cynWnbtPgTm+bfl+PHuLnrC+lmXQqHe/TffoDtWI5/Z6oOzUlDf1S4q/I88eIJ4JzVRv0Td/2nBt470OjXRgAKNysuq78aMif2fKF+Q2vpsgQm6O4zACyYT+TkUTFwNgt+En+1b8xOYZRJ+wPISZiUr2HR5JBmragqJKFTcSPr6L3rhvxM+ygG0Fm2PAvNB1MgB3NyEQMVUnmboPocl1r1Hbdweufxt+BQZeZL8AluXavi0O6QHbKVm8a9HCnJecRm8A10GYx/f23mm6ANiVqCoAVzXi0d8MrNtJYAB3QzpWxVPBWx881DfidywRmKXX1fIa9y2qh30bsWtEQmz3UOPUgiOaCQCek/9H+N/gp5JGO5Be4Bs7g+RXDHzKA0WTAFEyF/aEVN6edy/wbYGyWH46/Q88/ZwuPIMLaeswLkIzfIMZdiyLrSs8upx8eFtBzMEreR8o7nejFX6mBD9XzjAapgUjY9o6gAsGRXZwcyQhBCFiCQuAxVCQjg5T4y4BJHyHvLqILhgGtZVgxp/PVWe4vW8Gj5SSL7eOblWvhCaCMnQy+BaxHXOHimYByB27j6CuxOsNMDa719PPzn4UP5kQJdsaZcYsivkd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",shakeImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAACqCAMAAAAKqCSwAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc2QTBGRkZDMTE5RjExRTZBRENERDI4NkVGMzZEOTdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjc2QTBGRkZEMTE5RjExRTZBRENERDI4NkVGMzZEOTdBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzZBMEZGRkExMTlGMTFFNkFEQ0REMjg2RUYzNkQ5N0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzZBMEZGRkIxMTlGMTFFNkFEQ0REMjg2RUYzNkQ5N0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz75r5jkAAAABlBMVEX///8AAABVwtN+AAAAAnRSTlP/AOW3MEoAAAMWSURBVHja7N3BesQgCARg5v1fupee+jUKOAOayLnd/WtYQWO2hmPCLvVSL/VSL/VS69/6Nw6ierV7UF3YXagO7D5UO4hqB1HtIKrtXAIOokbmrC0Kq8+6Rw9wENXVEGzTWc2t+zSBPVQbYPLDapLRSVlqqSPN9FNeSB1P5fOJfjrqRRXSUUArqI6+w9OXyKn2b2RaUy3VHiPR7umoNoxEuzedIRTO6XQ1niOIVHNEottjU80b4XbPqLlqgZi+hpBqsUDUSqJaIqKNAqOzslxEO9PlftXSEe2/lqgpnWtB90zNrK2yg5jOgOSoLlzsSupqTmanqyiV8NEpoXI+4dmCFZlXOTORp+yUUd0lIzbsoWpFYAaoS6sAAtOTrGpqqlfMUV2tNYG5kAHTqxFfWcoz4GlLI7qxUEK1EJWyPRDcnJqsaINFUUodW7VUi/4lwz5IQc0P68hqwVaDSo1ZDY3JGrOKqYvWAqp/WANWQ0eyuu8bjNZWRVSvtZJKtIqokcXg0DpaXFdlwKyKNlAXrQXUyN6Vc1hbqVijFiary1pJteRfVEf1vs5BVEx2FIf7q6XJuhfVaU3MAF0Z8HJqU7J2UpemK0+7chYVB1JLa+uUr6QiTbU9qTagYkpFR3s9/T1Dc7K6B1VLTd7EdO0EllP9l398gLdw62peaKdUqTV4B7uTGn2t46k4kLqR9QVUfJhqeuo+w/oGKr5H5VkNx2TAK6j4HpV3eXBMBryDiu9RaUt1HJMB4T2ad1NJ1gIq6fQeTDsanPOQDurasJKOmKqpjMPFBVTWOegc1RhMLTU0rIxnCgqolMc09FTSs20sqjGYWqr3AO/GVMXTjQLq0NFI/WOdG7agRh9jZFsJM2bw5xup2IYaTr6NqWXDSqfaGVRtESB8P0C0fjVSDTWlVfetC/XVikkV7q5QratbNFVUEKKAClLQ1qJip5oKasiooIeGCkUIviMIoiBTIQwmFdqgUSEP51t0MzlUVMUiFYWxQEVxeN+w25mloiXCVLRF7N4JOiNARXPcf25yqZd6qZd6qfvHjwADALHaWmOJv/DCAAAAAElFTkSuQmCC",markBgImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkMAAAA0CAMAAAC+X8z5AAAAP1BMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzJYIvAAAAFXRSTlOzAK2mKgWdPRNTinxzDpNoSTYfXxkPTCiJAAAA/ElEQVR42u3dyZGDQBBFQdQLOxIg+W/rOKCDYv4104Z3IOjuqgF+UZ/7eTy+GuBX5XVoiNDYNESoTBoiVC4NESpNQ4TqR0OExkNDhNauIUK7hki9NUTq1BCpS0OEStMQofrREKHx0BChtWuI0NY1ROilIVKLhkhNGiJUmoYI1VlDhDYNkZoHyEwDaIhE7h4gsvqmJtQ0RGbxj5HMy1kHma1riMizO7cnMs7uDxGpt7uwREpzJ5/M5G0Qmbc3imR2b6XJrF1DRJ7d3A8i42z+EJF6m4NGpDQzPclcZguTOc04J7PYtUBmsfOFSJ3sniJR9tkOPP6tjNsyP776AzceBPuvY8suAAAAAElFTkSuQmCC"},function(){function t(t){var e=t*ms.I80DivPI,i=1;0>e&&(i=-1),e=Math.abs(e%360);var n=t;return t=e,t>_[0]&&t<_[1]?_[2]*i:t>p[0]&&t<p[1]?p[2]*i:t>f[0]&&t<f[1]?f[2]*i:t>v[0]&&t<v[1]?v[2]*i:t>A[0]&&t<A[1]?A[2]*i:n}function e(t,e){return e.offset?Math.abs(t.x-e.offset.startX)<h&&Math.abs(t.y-e.offset.startY)<h:!1}function i(){a&&(window.clearTimeout(a),a=null,o=!1)}var n=function(){},r=0,s=(ms.containsTouchLocation,600),a=null,o=!1,h=10,c=!1,l=2,u=!0,d=(Math.PI/180,!1),g=window.TouchEvent,m=window.MouseEvent;n.touchesBegan=function(t,e){if(e.enable){var h=t.data;e.isPressDown=!0,r++;var c=(h.global,h.originalEvent);if(e._background.__passEvent=!1,(c.constructor!==g||c.touches&&1!=c.touches.length||d)&&c.constructor!==m){if(e.isScale&&c.constructor===g&&c.touches.length>1){d=!0,i(),o=!1;var l=c.touches[0],u=c.touches[1],_=Math.sqrt(Math.pow(u.clientY-l.clientY,2)+Math.pow(u.clientX-l.clientX,2));e.distance=_,e.deltaX=(l.clientX+u.clientX)/2-e.x,e.deltaY=(l.clientY+u.clientY)/2-e.y,e.deltaAngle=Math.atan2(u.clientY-l.clientY,u.clientX-l.clientX)}}else{if(n.setOffset(h,e),!e.selected)return e.isPressDown=!1,void(e._background.__passEvent=!0);a=setTimeout(function(){o=!0,a=null,e._tapHoldHandle()},s)}return r>1&&i(),e.selected?void e._pressDownHandle():(e.isPressDown=!1,void(e._background.__passEvent=!0))}},n.setOffset=function(t,e){var i=t.global,n=t.getLocalPosition(e.parent);return e.offset={x:e.x-n.x,y:e.y-n.y,startX:i.x,startY:i.y,currX:e.x,currY:e.y},e.offset},n.touchesMoved=function(t,r){if(r.enable&&r.isDragging){var s=t.data;if(r.isPressDown){if(!r.selected)return void(r.isPressDown=!1);var a=s.originalEvent;if(a.constructor===g&&1==a.touches.length&&!d||a.constructor===m){var o=s.global;if(c||e(o,r)||(c=!0,u=!1,i()),c&&r.isDragging){var h=s.getLocalPosition(r.parent);r._pressMoveHandle(h)}}else if(a.constructor===g&&a.touches.length>1&&d){var l=a.touches[0],_=a.touches[1];r.isScale&&n.touchesScale(l.clientX,l.clientY,_.clientX,_.clientY,r),r.isRotation&&n.touchesRotation(l.clientX,l.clientY,_.clientX,_.clientY,r)}}}},n.touchEndOutside=function(t,e){d&&setTimeout(function(){d=!1},150),r=0,e.isPressDown=!1,c=!1,i(),setTimeout(function(){u=!0},0)},n.touchesScale=function(t,e,i,n,r){if(r.enable&&r.isScale){var s=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),a=s/r.distance;r.distance=s,r._scaleHandler(a,a)}},n.touchesScale2=function(t,e){if(e.enable&&e.isScale){var i=e._bnScale,n=t.getLocalPosition(e.parent),r=Math.sqrt(Math.pow(i.y,2)+Math.pow(i.x,2)),s=Math.sqrt(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2)),a=s/r;e._scaleHandler(a,a)}},n.touchesScale3=function(t,e){if(e.enable&&e.isScale){var i=t.originalEvent,n=i.wheelDelta,r=1;r=0>n?.9:1.1,e._scaleHandler(r,r)}};var _=[0-l,0+l,0],p=[90-l,90+l,90*ms.PIDiv180],f=[180-l,180+l,180*ms.PIDiv180],v=[270-l,270+l,270*ms.PIDiv180],A=[360-l,360+l,360*ms.PIDiv180];n.touchesRotation=function(e,i,n,r,s){if(s.enable&&s.isRotation){var a=Math.atan2(r-i,n-e),o=a-s.deltaAngle;o=t(s.rotation+o),s.rotation=o,s.deltaAngle=a,s._rotateHandler()}},n.touchesRotation2=function(e,i){if(i.enable&&i.isRotation){var n=i._bnScale,r=e.getLocalPosition(i.parent),s=Math.atan2(n.y,n.x),a=Math.atan2(r.y-i.y,r.x-i.x),o=a-s;o=t(o),i.rotation=o,i._rotateHandler()}},n.changeWidth=function(t,e){e._changeWidthHandle(t)},n.touchesEnd=function(t,e){t.data;r--,d&&setTimeout(function(){d=!1},150),r=0,e.isPressDown=!1,c=!1,e.enable&&e._pressUpHandle(),i(),setTimeout(function(){u=!0},0)};var E;n.tap=function(t,e){var n=t.data;n.global;if(u&&!o&&!d){return void(E?(e.enable&&e._dblClickHandle(),clearTimeout(E),E=null):E=setTimeout(function(){e.enable&&e._clickHandle(),E=null},200))}i(),o=!1},ms.BaseEditEvent=n}(),ms.addImageToLoad=function(t){var e=t.msStage;e.pageLoadManager.addLoad(t)},function(t){var e=function(){this._loadObjects=[];var e=this;this._loadFn=function(t){var i=t.target;e.removeLoad(i)},this._loadErrorFn=function(t){var i=t.target;e.removeLoad(i)},this.onPageLoaded=null,this.pageLoadedContext=null,t.eventManager.addEventListener(RenderEvent.IMAGE_LOADED,this._loadFn),t.eventManager.addEventListener(RenderEvent.IMAGE_LOAD_ERROR,this._loadErrorFn)};e.prototype.addLoad=function(t){if(t.msStage){var e=this._loadObjects;if(e.indexOf(t)<0){this._loadObjects.push(t);for(var i=!1,n=t.msStage.pageIndex,r=e.length-1;r>=0;r--){var s=e[r],a=s.msStage.pageIndex;if(n===a){i=!0;break}}i||this.onStartPageLoad&&this.onStartPageLoad(n)}}},e.prototype.getPageLoadStatus=function(t){for(var e=this._loadObjects,i=e.length-1;i>=0;i--){var n=e[i];if(n&&n.msStage&&n.msStage.pageIndex===t)return!1}return!0},e.prototype.removeLoad=function(t){if(t.msStage){var e=t.msStage.pageIndex,i=this._loadObjects,n=i.indexOf(t);if(n>=0){i.splice(n,1);for(var r=!1,s=i.length-1;s>=0;s--){var a=i[s];if(a.msStage.pageIndex===e){r=!0;break}}r||this.onPageLoaded&&this.onPageLoaded.call(this.pageLoadedContext,e)}}},e.prototype.destroy=function(){t.eventManager.removeEventListener(RenderEvent.IMAGE_LOADED,this._loadFn),t.eventManager.removeEventListener(RenderEvent.IMAGE_LOAD_ERROR,this._loadErrorFn),this._loadObjects=[],this._loadFn=null,this._loadErrorFn=null,this.pageLoadedContext=null,this.onPageLoaded=null},e.prototype.setPageLoadedFn=function(t,e){this.onPageLoaded=t,this.pageLoadedContext=e},e.prototype.onStartPageLoad=null,t.PageLoadManager=e}(ms),ms.CloundFontModule={loadedMap:{},loadQueue:[],loadFont:function(t,e,i){var n=new ms.LoadFontTask(t,e,i);return n.loadFont()},_applyFont:function(t,e,i){},loadFonts:function(t,e){var i,n,r,s=this.loadedMap;for(i=t.length-1;i>=0;i--)n=t[i],"兰亭细黑"!=n.fontFamily&&"microsoft yahei"!=n.fontFamily.toLowerCase()||t.splice(i,1);var a=[];for(i=t.length-1;i>=0;i--){n=t[i],r=n.text.replace(/\n/g,"");for(var o in s)(-1!=o.indexOf(r)&&-1!=o.indexOf(n.fontFamily)||"兰亭细黑"==n.fontFamily)&&(a.push(s[o]),t.splice(i,1))}return 0==t.length?(e&&(e(a[0]),e=null),null):(t=this.unique(t),this.loadedCount=t.length,this.loadFont(t[0].text,t[0].fontFamily,e))},unique:function(t){for(var e,i,n=[],r={},s=t.length-1;s>=0;s--)i=t[s],r[i.fontFamily]?(e=r[i.fontFamily],e.text.length+i.text.length>100?(n.push(i),r[i.fontFamily]=i):e.text+=i.text):(n.push(i),r[i.fontFamily]=i);return n},clearFont:function(){this.loadedMap=null},getFontFamily:function(t,e){if("兰亭细黑"==e||"microsoft yahei"==e.toLowerCase())return"兰亭细黑";var i=e;if(this.loadedMap)for(var n in this.loadedMap)if(t=t.replace(/\n/g,""),-1!=n.indexOf(t)&&-1!=n.indexOf(e)){i=this.loadedMap[n];break}return i}},ms.LoadFontTask=function(t,e,i){this.fontFamily=e,this.callback=i,this.text=t,this.fontPrefix="engine-font-",this._xhr=null,this._eventId="FontEvent"+ms.getNewID(),this.__loadFontCallback=this._loadFontCallback.bind(this),ms.eventManager.addEventListener(this._eventId,this.__loadFontCallback)},ms.LoadFontTask.prototype._loadFontCallback=function(t){var e=this;if(t.target){var i=t.target.fontObj,n=t.target.fontFamily,r=t.target.fontServer,s=t.target.text;if("undefined"!=i.src&&i.src){var a=e.fontPrefix+ms.getNewID();ms.CloundFontModule.loadedMap[s+"-"+n]=a,e._applyFont(a,r+i.src,i.type)}else e._loadOver(null)}else e._loadOver(null)},ms.LoadFontTask.prototype.loadFont=function(){var t=this.text.replace(/\n/g,""),e=ms.FontServerConfig;window.app&&window.app.appConfig&&app.appConfig.get("font_server")&&(e=app.appConfig.get("font_server"));var i=this,n=i._eventId,r=i.fontFamily;fmacapi.cfs_loadfont(e,"fixed",i.fontFamily,t,function(i){var s={};s.fontObj=i,s.fontServer=e,s.fontFamily=r,s.text=t,ms.eventManager.dispatchEvent(ms.createEvent(n,s))},function(){ms.eventManager.dispatchEvent(ms.createEvent(n,null))})},ms.LoadFontTask.prototype._applyFont=function(t,e,i){var n=document.createElement("style");n.type="text/css";var r="";r+="@font-face {\n",r+="  font-family: '"+t+"';\n",r+="  src: url('"+e+"') format('"+i+"');\n",r+="}\n",n.innerHTML=r,document.head.appendChild(n);var s=document.createElement("div");s.innerHTML="中M",s.style.fontFamily=t,s.style.position="absolute",s.style.left="-1000px",s.style.top="-1000px",document.body.appendChild(s);var a=this;setTimeout(function(){var i=a._xhr=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){a._loadOver(t),document.body.removeChild(s)},i.onerror=function(t){a._loadOver(null)},i.send(null)},50)},ms.LoadFontTask.prototype._loadOver=function(t){this.callback&&this.callback(t),this.clear()},ms.LoadFontTask.prototype.clear=function(){ms.eventManager.removeEventListener(this._eventId,this.__loadFontCallback),this.callback=null,this.fontFamily=null,this.text=null,this._xhr=null,this.__loadFontCallback=null},ms.LoadFontTask.prototype.cancelLoad=function(){this.xhr&&this.xhr.abort(),this.clear()},window.filterPlugin={isIOS:function(){var t=navigator.userAgent;return!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},isAndroid:function(){var t=navigator.userAgent;return t.indexOf("Android")>-1||t.indexOf("Linux")>-1}},window.__supportNativeFilter=!1,window.cordova&&window.cordova.exec&&(filterPlugin.isAndroid()?(window.__supportNativeFilter=!0,filterPlugin.meFilterPlugin=function(t,e,i){return cordova.exec(e,i,"MEFilterPlugin","apply",t)}):filterPlugin.isIOS()&&(window.__supportNativeFilter=!0,filterPlugin.meFilterPlugin=function(t,e,i){var n=navigator.contacts.create();n.apply(e,i,t)}));var ms=window.ms;ms||(ms=window.ms={}),ms.CanvasFilterManager=function(){this.offsetX=0,this.offsetY=0},ms.CanvasFilterManager.prototype.constructor=ms.CanvasFilterManager,ms.CanvasFilterManager.prototype.applyFilters=function(t){var e=t.filters;if(window.__supportNativeFilter){for(var i=[],n=0;n<e.length;n++){var r=e[n];r instanceof ms.GPUImageFilter&&i.push("{"+r.toJSONString()+"}")}if(i.length>0){var s,a=t._cacheContext,o=t._cacheCanvas;if(t.__tempFilterBase64?(s=t.__tempFilterBase64.substring(t.__tempFilterBase64.indexOf(",")+1),t.__tempFilterBase64=null):(s=o.toDataURL("image/jpeg",1),s=s.substring(s.indexOf(",")+1)),i="["+i.join(",")+"]",!s)return t._filterHandling=!1,void(t._filterDirty=!0);filterPlugin.meFilterPlugin([s,i],function(e){var n=new Image;i.length=0;var r="data:image/jpeg;base64,"+e;n.onload=function(){t._filterImage=n,t._filterHandling=!1,t._filterDirty=!1,o&&(o.width=1,o.height=1,o=null),s=null,a=null,t.parent&&t.parent.isType&&t.parent.isType(ms.EditSprite)&&(t.parent.base64ImageData&&(t.parent.base64ImageData.length=0),t.parent.base64ImageData=r,t.parent.isImage=!1,t=null),r=null,n=null},n.src=r},function(){})}}},ms.CanvasFilterManager.prototype.applyFilter=function(t,e,i){if(e++,e>=t.length)return i._filterHandling=!1,i._filterDirty=!1,void ms.eventManager.dispatchEvent({type:RenderEvent.FINISH_FILTER_HANDLE,target:i});var n=t[e],r=i._cacheCanvas,s=i.filterArea||{x:0,y:0,width:r.width,height:r.height},a=this;n.applyFilter(i,s,function(){e<=t.length-1&&a.applyFilter(t,e,i)})},PIXI.BLEND_MODES.SOURCE_ATOP=998,PIXI.blendModesCanvas||(PIXI.blendModesCanvas=[]),PIXI.blendModesCanvas[PIXI.BLEND_MODES.SOURCE_ATOP]="source-atop",function(t){function e(){return i++}var i=1,n=t.Ticker=function(){this._fnToContext={},this._run=!1,createjs.Ticker.setPaused(!0)};n.prototype.add=function(t,i){i=i||window;var n=this.getKey(t,i);if(!n){n=e()+"";var r=t.bind(i);this._fnToContext[n]={fn:t,context:i,bindFn:r},createjs.Ticker.addEventListener("tick",r)}if(!this._run){var s=createjs.Ticker._listeners;s.tick.length>0&&(this._run=!0,this.setPaused(!1))}},n.prototype.remove=function(t,e){e=e||window;var i=this.getKey(t,e);if(i){var n=this._fnToContext[i];createjs.Ticker.removeEventListener("tick",n.bindFn),this._fnToContext[i]=null,delete this._fnToContext[i]}var r=createjs.Ticker._listeners;r.tick&&0==r.tick.length&&this._run&&(this.setPaused(!0),this._run=!1)},n.prototype.getKey=function(t,e){var i=this._fnToContext;for(var n in i){var r=i[n];if(t==r.fn&&e==r.context)return n}return null},n.prototype.setFPS=function(t){createjs.Ticker.setFPS(30)},n.prototype.getPaused=function(){return createjs.Ticker.getPaused()},n.prototype.setPaused=function(t){createjs.Ticker.setPaused(t)},t.ticker.shared=new t.Ticker,window.sharedTicker=t.ticker.shared}(PIXI),function(t,e){var i=function(){this.EditImage_constructor(),this.type=i.TYPE,this.interactive=!1,this._background.visible=!1,this.enable=!1,t.zeroHitArea(this),this.extractor=new t.EditBorderFrameExtractor(this)};t.inherit(i,t.EditImage);i.prototype;i.TYPE="EditBorderFrame",t.EditBorderFrame=t.promote(i,"EditImage")}(ms,mjs),function(t,e){var i=function(){this.EditText_constructor(),this.type=i.TYPE,this.extractor=new t.EditButtonExtractor(this)};t.inherit(i,t.EditText);i.prototype;i.TYPE="EditButton",t.EditButton=t.promote(i,"EditText")}(ms,mjs),function(t,e){var i=function(){this.EditText_constructor(),this.type=i.TYPE,this.extractor=new t.EditWebButtonExtractor(this),this._url=""};t.inherit(i,t.EditText);var n=i.prototype;n.setUrl=function(t){this._url=t},n.getUrl=function(){return this._url},i.TYPE="EditWebButton",t.EditWebButton=t.promote(i,"EditText")}(ms,mjs),function(t,e){var i=function(){this.Container_constructor(),this._bgWidth=0,this._bgHeight=0,this._bgRadius="0",this._bgGraphics=null,this._bgImage=null,this.hitArea=new e.Rectangle(0,0,0,0),this._realHitArea=new e.Rectangle(0,0,0,0),this._tempHitAreaObj={x:-999999,y:-999999,width:1999998,height:1999998},this._isLarge=!1,this._backgroundImage=null,this._backgroundColor=null,this._bgAlpha=1,this._offsetWidth=this._offsetHeight=20,this._border=0,this._borderColor="",this._borderAlpha=1,this._initEvent()};t.inherit(i,e.Container);var n=i.prototype;n._initEvent=function(){var e=t.BaseEditEvent;this.mousedown=this.touchstart=function(t){e.touchesBegan(t,this.parent)},this.mousemove=this.touchmove=function(t){e.touchesMoved(t,this.parent)},this.mouseup=this.mouseupoutside=this.touchend=this.touchendoutside=function(t){e.touchesEnd(t,this.parent)},this.click=this.tap=function(t){e.tap(t,this.parent)},this.mousewheel=function(t){this.parent.selected&&e.touchesScale3(t.data,this.parent)},this.interactive=!0},n.setRect=function(t,e,i,n){var r=this._realHitArea;r.x=t-this._offsetWidth,r.y=e-this._offsetHeight,r.width=i+2*this._offsetWidth,r.height=n+2*this._offsetHeight,this._bgWidth=i,this._bgHeight=n,this._resetHitArea(),this._reset()},n._resetHitArea=function(){var t;t=this._isLarge?this._tempHitAreaObj:this._realHitArea;var e=this.hitArea;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},Object.defineProperty(n,"isLarge",{get:function(){return this._isLarge},set:function(t){this._isLarge=t,this._resetHitArea()}}),Object.defineProperties(n,{backgroundColor:{get:function(){return this._backgroundColor},set:function(t){this._backgroundImage=null,this._backgroundColor=t,this._resetBackgroundColor()}},backgroundAlpha:{get:function(){return this._bgAlpha},set:function(t){this._bgAlpha=t,this._resetBackgroundColor()}},backgroundRadius:{get:function(){return this._bgRadius+""},set:function(t){this._bgRadius=t,this._resetBackgroundColor()}},border:{get:function(){return this._border},set:function(t){this._border=t,this._resetBackgroundColor()}},borderColor:{get:function(){return this._borderColor+""},set:function(t){this._borderColor=t,this._resetBackgroundColor()}},borderAlpha:{get:function(){return this._borderAlpha},set:function(t){this._borderAlpha=t,this._resetBackgroundColor()}}}),Object.defineProperty(n,"backgroundImage",{get:function(){return this._backgroundImage},set:function(t){this._backgroundImage=t,this._backgroundColor=null,this._resetBackgroundImage()}}),n._reset=function(){this._resetBackgroundColor(),this._resetBackgroundImage()},n._resetBackgroundColor=function(){var e=this._backgroundColor,i=parseInt(this._bgRadius),n=this._bgAlpha,r=this._border,s=this._borderColor,a=this._borderAlpha,o=this._bgWidth,h=this._bgHeight,c=this._getBgGraphics();c.clear(),r>0&&s&&(s=t.colorToIntValue(s),c.lineStyle(r,s,a)),e?(e=t.colorToIntValue(e),c.beginFill(e,n)):c.beginFill(16777215,0),i>0?c.drawRoundedRect(0,0,o,h,i):c.drawRect(0,0,o,h),e&&c.endFill(),c.parent||this.addChild(c)},n._resetBackgroundImage=function(){},n._getBgGraphics=function(){return this._bgGraphics||(this._bgGraphics=new e.Graphics)},n.destroy=function(){this.Container_destroy(),this.mousedown=this.touchstart=null,this.mousemove=this.touchmove=null,this.mouseup=this.mouseupoutside=this.touchend=this.touchendoutside=null,
this.click=this.tap=null,this.mousewheel=null,this._bgGraphics=null,this.hitArea=null,this._realHitArea=null,this._tempHitAreaObj=null},t.Background=t.promote(i,"Container")}(ms,mjs),ms.CanvasTinter={},ms.CanvasTinter.cacheStepsPerColorChannel=8,ms.CanvasTinter.convertTintToImage=!1,ms.CanvasTinter.roundColor=function(t){var e=ms.CanvasTinter.cacheStepsPerColorChannel,i=ms.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),ms.rgb2hex(i)},ms.CanvasTinter.canUseMultiply=ms.canUseNewCanvasBlendModes(),ms.CanvasTinter.tintWithMultiply=function(t,e,i){var n=i.getContext("2d"),r=t.crop;i.width=r.width,i.height=r.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},ms.CanvasTinter.tintWithPerPixel=function(t,e,i){var n=i.getContext("2d"),r=t.crop;i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height);for(var s=utils.hex2rgb(e),a=s[0],o=s[1],h=s[2],c=n.getImageData(0,0,r.width,r.height),l=c.data,u=0;u<l.length;u+=4)l[u+0]*=a,l[u+1]*=o,l[u+2]*=h;n.putImageData(c,0,0)},ms.CanvasTinter.tintMethod=ms.CanvasTinter.canUseMultiply?ms.CanvasTinter.tintWithMultiply:ms.CanvasTinter.tintWithPerPixel,ms.CanvasTinter.getTintedTexture=function(t,e){var i=t.texture;e=ms.CanvasTinter.roundColor(e);var n="#"+("00000"+(0|e).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var r=ms.CanvasTinter.canvas||document.createElement("canvas");if(ms.CanvasTinter.tintMethod(i,e,r),ms.CanvasTinter.convertTintToImage){var s=new Image;s.src=r.toDataURL(),i.tintCache[n]=s}else i.tintCache[n]=r,ms.CanvasTinter.canvas=null;return r},function(t,e){var i=function(){this.Container_constructor(),this._boxGraphics=new e.Graphics,this.addChild(this._boxGraphics),t.zeroHitArea(this),this._offsetWidth=20,this._offsetHeight=20,this._lineColor=3977268,this._lineWidth=4,this._rect=new e.Rectangle(0,0,0,0)};t.inherit(i,e.Container);var n=i.prototype;n.setOffsetWidth=function(t){this._offsetWidth=t},n.setOffsetHeight=function(t){this._offsetHeight=t},n._resetBox=function(){var t=this._boxGraphics,e=this._rect;t.clear(),t.lineStyle(this._lineWidth,this._lineColor,1),t.drawRect(-this._offsetWidth+this._lineWidth/2,-this._offsetHeight+this._lineWidth/2,e.width+2*this._offsetWidth-this._lineWidth,e.height+2*this._offsetHeight-this._lineWidth)},n.setRect=function(t,e,i,n){var r=this._rect;r.x=t,r.y=e,r.width=i,r.height=n,this._resetBox()},n.getBox=function(){return this._boxGraphics},n.destroy=function(){this.Container_destroy(),this._boxGraphics=null,this._rect=null},t.SelectBox=t.promote(i,"Container")}(ms,mjs),ms.Stage=function(){this.page={pageIndex:-1},this.size={width:640,height:1008},this._backgroundColor=null,this._backgroundImage=null,this._plate="",this._displayObjects=[],this._unknownObject=[],this._itemObjects=[],this._pageTpl=null,this._pageVersion=2,this._pageThumb=null,this.eventManager=new createjs.EventDispatcher,this.pageLoadManager=null},ms.Stage.prototype={get pageIndex(){return this.page.pageIndex},set pageIndex(t){this.page.pageIndex=t},get width(){return this.size.width},set width(t){this.size.width=t},get height(){return this.size.height},set height(t){this.size.height=t},get backgroundColor(){return this._backgroundColor},set backgroundColor(t){this._backgroundColor=t},get backgroundImage(){return this._backgroundImage},set backgroundImage(t){this._backgroundImage=t},get plate(){return this._plate},set plate(t){this._plate=t},get unknownObject(){return this._unknownObject},set unknownObject(t){this._unknownObject=t},get displayObjects(){return this._displayObjects},set displayObjects(t){this._displayObjects=t},get itemObjects(){return this._itemObjects},set itemObjects(t){this._itemObjects=t},get pageTpl(){return this._pageTpl},set pageTpl(t){this._pageTpl=t},get pageVersion(){return this._pageVersion},set pageVersion(t){this._pageVersion=t},get pageThumb(){return this._pageThumb},set pageThumb(t){this._pageThumb=t}},ms.Stage.prototype.destroy=function(){this.pageLoadManager=null,this.eventManager=null,this._displayObjects=null,this._unknownObject=null,this._itemObjects=null},function(t,e){var i=function(){this._content=new PIXI.Graphics,t.BaseEdit.call(this),this.type=i.TYPE,this._content.visible=!1,this.isShowEditComponent=!1,this._tWidth=0,this._tHeight=0,this.extractor=new t.EditMakeFrameExtractor(this),this._unknownObjectList=[]};t.inherit(i,t.BaseEdit);var n=i.prototype;n.addUnknownObject=function(t){this._unknownObjectList.push(t)},n.getUnknownObject=function(){return this._unknownObjectList},n.setSize=function(t,e){this._tWidth=t,this._tHeight=e},n.getSize=function(){return{width:this._tWidth,height:this._tHeight}},n.setHitArea=function(t,e,i,n){this.hitArea=new PIXI.Rectangle(t,e,i,n),this.__passEvent=!0,this._selectBox.visible=!1,this._background.visible=!1},n.getEditChildren=function(){for(var e=this.children,i=[],n=0;n<e.length;n++)e[n]instanceof t.BaseEdit&&i.push(e[n]);return i},n.exitEdit=function(t){this.BaseEdit_exitEdit(t);for(var e=this.getEditChildren(),i=0;i<e.length;i++)e[i].exitEdit(t)},n.destroy=function(){for(var t=this.getEditChildren(),e=0,i=t.length;i>e;e++)t[e].msStage.destroy(),t[e].msStage=null,t[e].destroy();this._unknownObjectList=null,this.BaseEdit_destroy(),this._sprite&&this._sprite.texture.baseTexture.destroy()},i.TYPE="EditMakeFrame",t.EditMakeFrame=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this._content=new PIXI.Graphics,this.reverseHit=!0,this._tWidth=0,this._tHeight=0,this._itemValSub="",this._markBg=null,this._iconSprite=new e.Sprite(new e.Texture(new e.BaseTexture)),this._markTxt=new t.EditText,this._direction="left",this.tmpIconWidth=32,this.tmpIconHeight=40,this.markRadio=10,this.gap=10,this.BaseEdit_constructor(),this._maskLayer=new PIXI.Graphics,this._maskLayer.beginFill(0),this._maskLayer.drawRoundedRect(0,0,1,1,this.markRadio),this.mask=this._maskLayer,this.extractor=new t.EditMarkExtractor(this)};t.inherit(i,t.BaseEdit);var n=i.prototype;n.onInit=function(){var i=this;i._markBg=new e.Sprite(new e.Texture(new e.BaseTexture)),i._markBg.anchor.x=.5,i._markBg.anchor.y=.5;var n=t.loadTextureImage(t.ImageConfig.markBgImage,i,function(){i._resetBg()});i._markBg.texture=n,i.addChild(i._markBg),i.addChild(i._iconSprite),i.addChild(i._markTxt),i._markTxt.setPosition(0,0)},n.setItemValSub=function(t){this._itemValSub=t;try{var e="";t=JSON.parse(t);for(var i in t)e=t[i];this._setIconUrl(e)}catch(n){}},n.getItemValSub=function(){return this._itemValSub},n.setDirection=function(t){this._direction=""==t||null==t?"left":t,this._resetAll()},n.getDirection=function(){return this._direction},n.setString=function(t){this._markTxt.setString(t),this._resetMarkText()},n.getString=function(){return this._markTxt.getString()},n.setColor=function(t){this._markTxt.setColor(t)},n.getColor=function(){return this._markTxt.getColor()},n.setFontFamily=function(t){this._markTxt.setFontFamily(t)},n.getFontFamily=function(){return this._markTxt.getFontFamily()},n.setFontSize=function(t){this._markTxt.setFontSize(t),this._resetMarkText()},n.getFontSize=function(){return this._markTxt.getFontSize()},n.setTextAlign=function(t){this._markTxt.setTextAlign(t)},n.getTextAlign=function(){return this._markTxt.getTextAlign()},n.setTextVAlign=function(t){this._markTxt.setTextVAlign(t)},n.getTextVAlign=function(){return this._markTxt.getTextVAlign()},n._setIconUrl=function(t){this._loadImage(t)},n._loadImage=function(e){var i=this;if(null!=window.device&&window.device.ios&&window.device.ios()&&e.indexOf("file://")>=0)i.getIOSFileImage(e);else{i._destroyTexture(i._iconSprite);var n=t.loadTextureImage(e,this,function(){i._imageLoaded()});i._iconSprite.texture=n}},n.getIOSFileImage=function(t){var e=this;fmantv_read_file_from_local_path(t,function(i){t==e.getImageUrl()&&(i="data:image/png;base64,"+i,e._loadImage(i))},function(t){})},n._imageLoaded=function(){this._iconSprite.width=this.tmpIconWidth,this._iconSprite.height=this.tmpIconHeight},n._resetAll=function(){this._resetIcon(),this._resetBg(),this._resetMarkText()},n._resetBg=function(){var t=this;if(t._markBg){var e,i=t._markBg.texture,n=i.width/2,r=i.height;"left"==t._direction?(t._markBg.scale.x=-1,e=t.tmpIconWidth+n+t.gap,t._markBg.x=e):(t._markBg.scale.x=1,e=t._tWidth-t.tmpIconWidth-t.gap-n,t._markBg.x=e),t._markBg.y=r/2}},n._resetIcon=function(){var t=this;t._iconSprite&&("left"==t._direction?t._iconSprite.x=0:t._iconSprite.x=t._tWidth-t.tmpIconWidth,t._iconSprite.y=(t._tHeight-t.tmpIconHeight)/2)},n._resetMarkText=function(){var t=this;if(t._markTxt){var e,i=t._markTxt.getSize(),n=i.width/2;"left"==t._direction?(e=t.tmpIconWidth+n+t.gap,t._markTxt.x=e):(e=n,t._markTxt.x=e),t._markTxt.y=t._tHeight/2}},n.setSize=function(t,e){var i=this;i._tWidth=t,i._tHeight=e;var n=t-i.tmpIconWidth-i.gap;i._markTxt.setSize(n,e),i._resetMask()},n.getSize=function(){return{width:this._tWidth,height:this._tHeight}},n.setPosition=function(t,e){this.x=t,this.y=e,this._maskLayer.x=t,this._maskLayer.y=e,this._resetMask()},n.getPosition=function(){return{x:this.x,y:this.y}},n._resetMask=function(){this._tWidth>0&&this._tHeight>0&&(this._maskLayer.clear(),this._maskLayer.beginFill(0),this._maskLayer.drawRoundedRect(this.x,this.y,this._tWidth,this._tHeight,this.markRadio))},n._destroyTexture=function(t){if(t){var e=t.texture;e&&e.destroy(!0),e.baseTexture&&(e.baseTexture.removeAllListeners("loaded"),e.baseTexture.removeAllListeners("error")),t.texture=null}},n.destroy=function(){var t=this;t.BaseEdit_destroy(),t._destroyTexture(t._markBg),t._destroyTexture(t._iconSprite),t._markBg=null,t._iconSprite=null,t._maskLayer=null,t._markTxt.destroy(),t._markTxt=null},i.TYPE="EditMark",t.EditMark=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this.Container_constructor(),this.radioTxt=null,this.radioIcon=null,this.bgGraphics=null,this._width=0,this._height=0,this._bgColor=null,this._border=0,this._bdColor=null,this._fontSize="30px",this.init()};t.inherit(i,e.Container);var n=i.prototype;n.init=function(){var i=this;i.bgGraphics=new e.Graphics,i.addChild(i.bgGraphics),i.radioIcon=new e.Graphics,i.addChild(i.radioIcon),i.radioIcon.x=10,i.radioTxt=new t.EditMagazineText,i.radioTxt.setTextType(2),i.radioTxt.setFontSize(i._fontSize),i.radioTxt.setLineSpacing(1),i.radioTxt.isDragging=!1,i.radioTxt.isScale=!1,i.radioTxt.isRotation=!1;var n=i.radioTxt.userProperty;n.can_rotate=!1,n.can_scale=!1,n.can_move=!1,n.item_edit_status=1,n.can_edit=!0,i.addChild(i.radioTxt)},n.setIconType=function(t){var e=this;e.radioIcon.clear(),1==t?(e.radioIcon.beginFill(0),e.radioIcon.drawCircle(20,0,10),e.radioTxt.setPosition(50,0)):2==t?(e.radioIcon.beginFill(0),e.radioIcon.drawRect(10,-10,20,20),e.radioTxt.setPosition(50,0)):e.radioTxt.setPosition(20,0)},n.setValue=function(t){this.radioTxt.setString(t),this.resize()},n.getValue=function(){return this.radioTxt.getString()},n.setFontSize=function(t){this._fontSize=t,this.radioTxt.setFontSize(t),this.resize()},n.getFontSize=function(){return this._fontSize},n.setColor=function(t){this.radioTxt.setColor(t)},n.getColor=function(){return this.radioTxt.getColor()},n.setSize=function(t,e){this._width=t,this._height=e,this.resize()},n.setBorder=function(t){this._border=t,this.resize()},n.setBordColor=function(t){this._bdColor=t,this.resize()},n.setBackGroundColor=function(t){this._bgColor=t,this.resize()},n.setLetterSpacing=function(t){this.radioTxt.setLetterSpacing(t)},n.getLetterSpacing=function(){return this.radioTxt.getLetterSpacing()},n.setLineSpacing=function(t){this.radioTxt.setLineSpacing(t)},n.getLineSpacing=function(){return this.radioTxt.getLineSpacing()},n.resize=function(){var e=this;if(e.bgGraphics.clear(),e._bgColor&&(e.bgGraphics.beginFill(e._bgColor),e.bgGraphics.drawRect(0,0,e._width,e._height),e.bgGraphics.endFill()),e._border&&e._bdColor){var i=t.colorToIntValue(e._bdColor);e.bgGraphics.lineStyle(e._border,i,1),e.bgGraphics.drawRect(0,0,e._width,e._height)}var n=e.radioTxt.getRectArea(),r=(e._height-n.height)/2;if(r>0){var s=e.radioTxt.getPosition();e.radioTxt.setPosition(s.x,r)}e.radioIcon.y=(e._height-5)/2},n.destroy=function(){this.radioTxt&&(this.radioTxt.destroy(),this.radioTxt=null)},i.TYPE="EditRadioItem",t.EditRadioItem=t.promote(i,"Container")}(ms,mjs),function(t,e){var i=function(){this._content=new PIXI.Graphics,t.BaseEdit.call(this),this.type=i.TYPE,this._maskLayer=new PIXI.Graphics,this._maskLayer.beginFill(0),this._maskLayer.drawRect(0,0,1,1),this._content.visible=!1,this.reverseHit=!0,this._sprite=null,this.mask=this._maskLayer,this._borderWidth=0,this._borderColor="#FFFFFF",this._imageUrl="",this._tWidth=0,this._tHeight=0,this._borderType=1,this.isShowEditComponent=!1,this.extractor=new t.EditPicFrameExtractor(this),this._unknownObjectList=[]};t.inherit(i,t.BaseEdit);var n=i.prototype;n.addUnknownObject=function(t){this._unknownObjectList.push(t)},n.getUnknownObject=function(){return this._unknownObjectList},n.setBorderWidth=function(t){this._borderWidth=t,this._setBorderType(1)},n.getBorderWidth=function(){return this._borderWidth},n.setBorderColor=function(t){this._borderColor=t,this._setBorderType(1)},n.getBorderColor=function(){return this._borderColor},n.setHitArea=function(t,e,i,n){this.hitArea=new PIXI.Rectangle(t,e,i,n),this.__passEvent=!0,this._selectBox.visible=!1,this._background.visible=!1},n.setImageUrl=function(t){this._content.visible=!1,this._imageUrl=t,this._setBorderType(2)},n.getImageUrl=function(){return this._imageUrl},n.setSize=function(t,e){this._tWidth=t,this._tHeight=e,this._setBorderType(this._borderType)},n.getSize=function(){return{width:this._tWidth,height:this._tHeight}},n._resetGraphics=function(){if(this._content.clear(),this._tWidth>0&&this._tHeight>0&&this._borderWidth>0){var e=t.colorToIntValue(this._borderColor);this._content.lineStyle(this._borderWidth,e,this._borderWidth),this._content.drawRect(this._borderWidth/2,this._borderWidth/2,this._tWidth-this._borderWidth,this._tHeight-this._borderWidth),this._resetMask()}},n._resetMask=function(){this._tWidth>0&&this._tHeight>0&&(this._maskLayer.clear(),this._maskLayer.beginFill(0),this._maskLayer.drawRect(this.x,this.y,this._tWidth,this._tHeight))},n._setBorderType=function(t){this._borderType=t,1==t?(this._content.visible=!0,this._sprite&&(this._sprite.visible=!1),this._resetGraphics()):(this._content.visible=!1,this._sprite&&(this._sprite.visible=!0)),this._resetMask()},n.setPosition=function(t,e){this.x=t,this.y=e,this._maskLayer.x=t,this._maskLayer.y=e,this._resetMask()},n.getPosition=function(){return{x:this.x,y:this.y}},n.getEditChildren=function(){for(var e=this.children,i=[],n=0;n<e.length;n++)e[n]instanceof t.BaseEdit&&i.push(e[n]);return i},n.exitEdit=function(t){this.BaseEdit_exitEdit(t);for(var e=this.getEditChildren(),i=0;i<e.length;i++)e[i].exitEdit(t)},n.destroy=function(){for(var t=this.getEditChildren(),e=0,i=t.length;i>e;e++)t[e].msStage.destroy(),t[e].msStage=null,t[e].destroy();this._unknownObjectList=null,this.BaseEdit_destroy(),this._sprite&&this._sprite.texture.baseTexture.destroy()},i.TYPE="EditPicFrame",t.EditPicFrame=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this.EditImage_constructor(),this.type=i.TYPE,this.extractor=new t.EditMapExtractor(this),this._mapValue=""};t.inherit(i,t.EditImage),i.TYPE="EditMap",t.EditMap=t.promote(i,"EditImage");var n=i.prototype;n.setMapValue=function(e){if(this._mapValue=e,t.isRealJsonObject(e)){var i=t.toJSON(e),n=this.getSize();if(i.hasOwnProperty("lng")&&i.hasOwnProperty("lat")&&i.hasOwnProperty("zoom")){var r=t.MapBaiduURI+i.lng+","+i.lat+"&zoom="+i.zoom+"&markers="+i.lng+","+i.lat+"&width="+n.width+"&height="+n.height;this.setImageUrl(r)}}},n.getMapValue=function(){return this._mapValue}}(ms,mjs),function(t,e){var i=function(){this.EditFingerprint_constructor(),this.type=i.TYPE,this.extractor=new t.EditShakeExtractor(this)};t.inherit(i,t.EditFingerprint),i.TYPE="EditShake",t.EditShake=t.promote(i,"EditFingerprint");var n=i.prototype;n.setImageType=function(e){this._imageType=e,this._itemImage=t.ImageConfig.shakeImage,this.resetImage()}}(ms,mjs),function(t,e){var i=function(){this.EditImage_constructor(),this.type=i.TYPE,this.extractor=new t.EditSmearPicExtractor(this),this._itemHref="",this._tX=0,this._tY=0,this._tWidth=0,this._tHeight=0,this._textAlign="",this._textVAlign="",this._fontSize="",this._frameColor="",this._framePixes=0,this._frameStyle=0,this._itemColor="",this._itemValue="",this._cnType=0};t.inherit(i,t.EditImage);var n=i.prototype;n.setTextAlign=function(t){this._textAlign=t},n.getTextAlign=function(){return this._textAlign},n.setTextVAlign=function(t){this._textVAlign=t},n.getTextVAlign=function(){return this._textVAlign},n.setFontSize=function(t){this._fontSize=t},n.getFontSize=function(){return this._fontSize},n.setFrameColor=function(t){this._frameColor=t},n.getFrameColor=function(){return this._frameColor},n.setFramePixes=function(t){this._framePixes=t},n.getFramePixes=function(){return this._framePixes},n.setFrameStyle=function(t){this._frameStyle=t},n.getFrameStyle=function(){return this._frameStyle},n.setItemColor=function(t){this._itemColor=t},n.getItemColor=function(){return this._itemColor},n.setItemVal=function(t){this._itemValue=t},n.getItemVal=function(){return this._itemValue},n.setCnType=function(t){this._cnType=t},n.getCnType=function(){return this._cnType},n.setItemHref=function(t){this._itemHref=t},n.getItemHref=function(){return this._itemHref},n.setSize=function(t,e){this._tWidth=t,this._tHeight=e},n.getSize=function(){return{width:this._tWidth,height:this._tHeight}},n.setPosition=function(t,e){this._tX=t,this._tY=e},n.getPosition=function(){return{x:this._tX,y:this._tY}},n.resize=function(){t.EditImage.prototype.resize.call(this);var e=this.msStage;e&&(this.x=e.width-54,this.y=e.height-54)},i.TYPE="EditSmearPic",t.EditSmearPic=t.promote(i,"EditImage")}(ms,mjs),function(t,e){var i=function(){this.EditImage_constructor(),this.type=i.TYPE,this.extractor=new t.EditSpriteExtractor(this)};t.inherit(i,t.EditImage),i.TYPE="EditSprite",t.EditSprite=t.promote(i,"EditImage")}(ms,mjs),function(t,e){var i=function(){this.EditInputText_constructor(),this.type=i.TYPE,this.item_val="",this.extractor=new t.EditDateInputTextExtractor(this)};t.inherit(i,t.EditInputText);var n=i.prototype;n.setString=function(e){this.item_val=e;var i=parseInt(e);i||(i=0),this._content.setText(t.formatDate(i,"yyyy/MM/dd HH:mm")),this.resize()},n.getString=function(){return this.item_val+""},i.TYPE="EditDateInputText",t.EditDateInputText=t.promote(i,"EditInputText")}(ms,mjs),function(t,e){var i=function(){this.EditMagazineText_constructor(),this.type=i.TYPE};t.inherit(i,t.EditMagazineText);i.prototype;i.TYPE="EditLieText",t.EditLieText=t.promote(i,"EditMagazineText")}(ms,mjs),function(t,e){var i=function(){this.EditInputText_constructor(),this.type=i.TYPE,this._val="",this._val_sub="",this.extractor=new t.EditPwInputTextExtractor(this)};t.inherit(i,t.EditInputText);var n=i.prototype;n.setPwText=function(t){this._content.setText(t),this.resize()},n.setString=function(t){this._val=t},n.getString=function(){return this._val},i.TYPE="EditPwInputText",t.EditPwInputText=t.promote(i,"EditInputText")}(ms,mjs),function(t,e){var i=function(){this.EditInputText_constructor(),this.type=i.TYPE,this.item_val="",this.extractor=new t.EditTimeInputTextExtractor(this)};t.inherit(i,t.EditInputText);var n=i.prototype;n.setString=function(e){this.item_val=e;var i=parseInt(e);i||(i=0),this._content.setText(t.formatTime(i,"mm:ss")),this.resize()},n.getString=function(){return this.item_val},i.TYPE="EditTimeInputText",t.EditTimeInputText=t.promote(i,"EditInputText")}(ms,mjs),function(t,e){var i=function(){this._content=new e.Sprite(new e.Texture(new e.BaseTexture)),this.BaseEdit_constructor(),this._playButton=null,this._bg=null,this.isShowEditComponent=!1,this.base64ImageData=null,this._imageUrl="",this._videoUrl="",this._width=0,this._height=0,this.type=t.EditVideo.TYPE,this.extractor=new t.EditVideoExtractor(this)};t.inherit(i,t.BaseEdit);var n=i.prototype;n.onInit=function(){this._playButton=e.Sprite.fromImage(t.ImageConfig.playImage),this._playButton.anchor.x=.5,this._playButton.anchor.y=.5,this.addChild(this._playButton),t.zeroHitArea(this._playButton),this.setSelectBoxOffsetWidth(0),this.setSelectBoxOffsetHeight(0)},n.onResize=function(){var t=this.getRectArea();this._playButton&&(this._playButton.x=t.width/2,this._playButton.y=t.height/2)},n._resetBackground=function(){var t=this._background;t.setRect(0,0,this._width,this._height),t.x=-this._width/2,t.y=-this._height/2},n.setSize=function(t,e){this._width=t,this._height=e,this._content.width=t,this._content.height=e,this.resize()},n.getSize=function(){return{width:this._width,height:this._height}},n.setVideoUrl=function(t){this._videoUrl=t},n.getVideoUrl=function(){return this._videoUrl},n.setImageUrlAndReset=function(t){this._isReset=!0,this._setUrl(t),this._loadImage(t)},n.setImageUrl=function(t){this._isReset=!1,this._setUrl(t),this._loadImage(t)},n.getImageUrl=function(){return this._imageUrl},n._loadImage=function(e){var i=this;if(null!=window.device&&window.device.ios&&window.device.ios()&&e.indexOf("file://")>=0)i.getIOSFileImage(e);else{i._destroyTexture(!0);var n=t.loadTextureImage(e,this,function(){i._imageLoaded()});i._content.texture=n}},n.getIOSFileImage=function(t){var e=this;fmantv_read_file_from_local_path(t,function(i){t==e.getImageUrl()&&(i="data:image/png;base64,"+i,e._loadImage(i))},function(t){})},n._imageLoaded=function(){this._isReset?this._handleImageLoaded():this.setPosition(),this.resize(),this._content._filterDirty=!0},n._setUrl=function(e){t.isBase64(e)?(this.base64ImageData=e,this._imageUrl=""):(this.base64ImageData=null,this._imageUrl=e)},n._handleImageLoaded=function(){this._content.scale.x=1,this._content.scale.y=1,this.imgSHowAllGeometric(),this.resize()},n._destroyTexture=function(){var t=this._content.texture;t&&t.destroy(!0),t.baseTexture&&(t.baseTexture.removeAllListeners("loaded"),t.baseTexture.removeAllListeners("error")),this._content.texture=null},n.imgSHowAllGeometric=function(){var t=this._content,e=t.texture;t.width=e.width,t.height=e.height;var i=this._width,n=this._height,r=t.width*t.scale.x,s=t.height*t.scale.y,a=1,o=1,h=1;r>i||s>n?(r>i&&(o=i/r),s>n&&(h=n/s),a=Math.min(o,h)):(o=i/r,h=n/s,a=Math.min(o,h)),t.width=~~(r*a),t.height=~~(s*a)},n.destroy=function(){this.BaseEdit_destroy(),this._destroyTexture(!0)},i.TYPE="EditVideo",t.EditVideo=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this._content=new e.Sprite(new e.Texture(new e.BaseTexture)),this.BaseEdit_constructor(),this.isShowEditComponent=!1,this._voiceUrl="",this._voiceTime="",this.voiceLocalFile=null,this.type=i.TYPE,this.extractor=new t.EditVoiceExtractor(this)};t.inherit(i,t.BaseEdit);var n=i.prototype;n.onInit=function(){var e=this,i=t.loadTextureImage(t.ImageConfig.voiceImage,this,function(){e.resize()});this._content.texture=i},n.setVoiceUrl=function(t){this._voiceUrl=t,""!=t&&(this.voiceLocalFile=null)},n.getVoiceUrl=function(){return this._voiceUrl},n.setVoiceTime=function(t){this._voiceTime=t+""},n.getVoiceTime=function(){return this._voiceTime},n._destroyTexture=function(){var t=this._content.texture;t&&t.destroy(!0),this._content.texture=null},n.destroy=function(){this.BaseEdit_destroy(),this._destroyTexture(!0)},i.TYPE="EditVoice",t.EditVoice=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this._content=new e.Sprite(new e.Texture(new e.BaseTexture)),this._iconType="",this._iconImage="",this._iconColor="",this._iconSprite=null,this._txtItem=null,this.type=i.TYPE,this.BaseEdit_constructor(),this.extractor=new t.EditVoteExtractor(this),this.isShowEditComponent=!0,this.isShowDelete=!1};t.inherit(i,t.BaseEdit);var n=i.prototype;n.onInit=function(){var i=this;i._iconSprite=new e.Sprite(new e.Texture(new e.BaseTexture)),i._iconSprite.anchor.x=.5,i._iconSprite.anchor.y=.5,i._content.addChild(i._iconSprite),i._iconSprite.x=-20,i._txtItem=new t.EditMagazineText,i._txtItem.setFontSize("50px"),i._txtItem.setTextType(2),i._txtItem.setLineSpacing(1),i._txtItem.isDragging=!1,i._txtItem.isScale=!1,i._txtItem.isRotation=!1;var n=i._txtItem.userProperty;n.can_rotate=!1,n.can_scale=!1,n.can_move=!1,n.can_edit=!1,i._content.addChild(i._txtItem),i._txtItem.setPosition(20,2),i._txtItem.setString("0"),i._txtItem.zeroHitArea(),i.setSelectBoxOffsetWidth(0),i.setSelectBoxOffsetHeight(0)},n.setIconType=function(e){var i=this;switch(i._iconType=e,e){case"icon-love":i._iconImage=t.ImageConfig.loveImage;break;case"icon-star":i._iconImage=t.ImageConfig.starImage;break;case"icon-flag":i._iconImage=t.ImageConfig.flagImage;break;case"icon-vote":i._iconImage=t.ImageConfig.voteImage;break;default:i._iconImage=t.ImageConfig.loveImage}i.resetIcon()},n.getIconType=function(){return this._iconType},n.setIconColor=function(t){this._iconColor=t,this.resetIcon(),this.resetTextColor()},n.getIconColor=function(){return this._iconColor},n.resetTextColor=function(){this._txtItem.setColor(this._iconColor)},n.resetIcon=function(){var e=this;""!=e._iconColor&&""!=e._iconImage&&e._loadImage(e._iconImage,function(){t.CanvasTinter.convertTintToImage=!0;var i=t.colorToIntValue(e._iconColor),n=t.CanvasTinter.getTintedTexture(e._iconSprite,i),r=n.toDataURL();t.CanvasTinter.convertTintToImage=!1,n=null,e._loadImage(r)})},n._loadImage=function(e,i){var n=this;n._destroyTexture();var r=t.loadTextureImage(e,n,function(){i&&i()});n._iconSprite.texture=r},n._destroyTexture=function(){var t=this._iconSprite.texture;t&&t.destroy(!0),t.baseTexture&&(t.baseTexture.removeAllListeners("loaded"),t.baseTexture.removeAllListeners("error")),this._iconSprite.texture=null},n.destroy=function(){var t=this;t._destroyTexture(),t._txtItem.destroy(),t._txtItem=null,t.BaseEdit_destroy()},i.TYPE="EditVote",t.EditVote=t.promote(i,"BaseEdit")}(ms,mjs),function(t,e){var i=function(){this.EditWaterMark_constructor(),this.type=i.TYPE,this.extractor=new t.EditShapeExtractor(this)};t.inherit(i,t.EditWaterMark),i.TYPE="EditShape",t.EditShape=t.promote(i,"EditWaterMark")}(ms,mjs),function(t,e){var i=function(){this.EditWaterMark_constructor(),this.type=t.EditSignature.TYPE,this.extractor=new t.EditSignatureExtractor(this)};t.inherit(i,t.EditWaterMark),i.TYPE="EditSignature",t.EditSignature=t.promote(i,"EditWaterMark")}(ms,mjs),ms.WaterMarkText=function(t,e){ms.BaseText.call(this,t,e),this.type=ms.WaterMarkText.TYPE},ms.inherit(ms.WaterMarkText,ms.BaseText),ms.WaterMarkText.TYPE="WaterMarkText",ms.EditBorderFrameExtractor=function(t){ms.EditImageExtractor.call(this,t)},ms.inherit(ms.EditBorderFrameExtractor,ms.EditImageExtractor),ms.EditBorderFrameExtractor.prototype.toJSON=function(){var t=ms.EditImageExtractor.prototype.toJSON.call(this);return t.item_type=10,t},ms.EditButtonExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditButtonExtractor,ms.EditTextExtractor),ms.EditButtonExtractor.prototype.toJSON=function(){var t=ms.EditTextExtractor.prototype.toJSON.call(this);return t.item_type=19,t},ms.EditWebButtonExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditWebButtonExtractor,ms.EditTextExtractor),ms.EditWebButtonExtractor.prototype.toJSON=function(){var t=this.node._content,e=this.node,i=ms.EditTextExtractor.prototype.toJSON.call(this);return i.item_type=35,i.item_val=e.getUrl(),i.item_val_sub=t.getText(),i},ms.EditMakeFrameExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditMakeFrameExtractor,ms.Extractor),ms.EditMakeFrameExtractor.prototype.toJSON=function(){var t=ms.Extractor.prototype.toJSON.call(this),e=this.node,i=ms.getNewID();t.item_type=33;var n=this.node.x,r=this.node.y;t.item_top=r,t.item_left=n;var s=e.getSize();t.item_width=s.width,t.item_height=s.height,t.item_opacity=100,t.item_angle=!1,t.rotate_angle=0,t.rotate_pos="",t.rotate_pos="",t.item_mirror="",t.use_mask=!1,t.mask_color="",t.mask_width=0,t.mask_height=0,t.item_filter="",t.item_filter_val="",t.font_size="",t.font_family="",t.restart_play=!1,t.auto_play=!1,t.lock_level=0,t.font_dist=0,t.font_halign="",t.font_valight="",t.font_frame=!1,t.frame_color="",t.frame_pixes=0,t.frame_style=0,t.x_scale=1,t.y_scale=1,t.group_id=i;for(var a,o=[],h=e.getEditChildren(),c=0;c<h.length;c++)a=h[c].toJSON(),a.group_id=i,o.push(a);o.push(t);var l=e.getUnknownObject()||[];for(c=0;c<l.length;c++)a=l[c],a.group_id=i,o.push(a);return o.sort(function(t,e){var i=t.item_layer||999,n=e.item_layer||999;return i>n?1:-1}),o},ms.EditMarkExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditMarkExtractor,ms.Extractor),ms.EditMarkExtractor.prototype.toJSON=function(){var t=ms.Extractor.prototype.toJSON.call(this),e=this.node;t.item_val=e.getString(),t.font_family=e.getFontFamily(),t.font_size=e.getFontSize(),t.item_color=e.getColor(),t.font_valight=e.getTextVAlign(),t.font_halign=e.getTextAlign(),t.ext_attr=e.getDirection();var i=e.getSize();t.item_width=i.width,t.item_height=i.height;var n=e.getPosition();return t.item_left=n.x,t.item_top=n.y,t.item_val_sub=e.getItemValSub(),t},ms.EditPicFrameExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditPicFrameExtractor,ms.Extractor),ms.EditPicFrameExtractor.prototype.toJSON=function(){var t=ms.Extractor.prototype.toJSON.call(this),e=this.node,i=ms.getNewID();t.item_type=17;var n=this.node.x,r=this.node.y;t.item_top=r,t.item_left=n;var s=e.getSize();t.item_width=s.width,t.item_height=s.height,t.item_cntype=2,t.item_val=1==e._borderType?"":e.getImageUrl(),t.item_color=e.getBorderColor(),t.item_opacity=100,t.item_angle=!1,t.rotate_angle=0,t.rotate_pos="",t.rotate_pos="",t.item_mirror="",t.use_mask=!1,t.mask_color="",t.mask_width=0,t.mask_height=0,t.item_filter="",t.item_filter_val="",t.font_size="",t.font_family="",t.restart_play=!1,t.auto_play=!1,t.lock_level=0,t.font_dist=0,t.font_halign="",t.font_valight="",t.font_frame=!1,t.frame_color="",t.frame_pixes=0,t.frame_style=0,t.x_scale=1,t.y_scale=1,t.item_border=e.getBorderWidth(),t.group_id=i;var a,o,h=[],c=e.getEditChildren();for(o=0;o<c.length;o++)a=c[o].toJSON(),a.group_id=i,h.push(a);h.push(t);var l=e.getUnknownObject()||[];for(o=0;o<l.length;o++)a=l[o],a.group_id=i,h.push(a);return h.sort(function(t,e){var i=t.item_layer||999,n=e.item_layer||999;return i>n?1:-1}),h},ms.EditCheckFrameExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditCheckFrameExtractor,ms.Extractor),ms.EditCheckFrameExtractor.prototype.toJSON=function(){var t=ms.EditRadioFrameExtractor.prototype.toJSON.call(this);return t.item_type=21,t},ms.EditRadioFrameExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditRadioFrameExtractor,ms.Extractor),ms.EditRadioFrameExtractor.prototype.toJSON=function(){var t=ms.Extractor.prototype.toJSON.call(this),e=this.node;t.item_type=20;var i=this.node.x,n=this.node.y;t.item_top=n,t.item_left=i;var r=e.getSize();return t.item_width=r.width,t.item_height=r.height,t.item_val=e.getValue(),t.item_color=e.getItemColor(),t.item_opacity=100,t.item_angle=!1,t.rotate_angle=0,t.rotate_pos="",t.rotate_pos="",t.use_mask=!1,t.mask_color="",t.mask_width=0,t.mask_height=0,t.item_filter="",t.item_filter_val="",t.font_size=e.getFontSize(),t.font_family=e.getFontFamily(),t.font_dist=e.getLetterSpacing(),t.line_height=e.getLineSpacing(),t.font_valight=e.getTextVAlign(),t.font_halign=e.getTextAlign(),t.restart_play=!1,t.auto_play=!1,t.lock_level=0,t.x_scale=1,t.y_scale=1,t.item_border=e.getBorderWidth(),t.bd_color=e.getBorderColor(),t},ms.EditFingerprintExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditFingerprintExtractor,ms.Extractor),ms.EditFingerprintExtractor.prototype.toJSON=function(){
var t=ms.EditImageExtractor.prototype.toJSON.call(this),e=this,i=e.node;return t.item_type=25,t.item_cntype=0,t.item_val=i.getImageType(),t.item_color=i.getItemColor(),t},ms.EditMapExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditMapExtractor,ms.Extractor),ms.EditMapExtractor.prototype.toJSON=function(){var t=ms.EditImageExtractor.prototype.toJSON.call(this);t.item_type=15;var e=this.node.getMapValue();return t.item_val=e,t},ms.EditShakeExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditShakeExtractor,ms.Extractor),ms.EditShakeExtractor.prototype.toJSON=function(){var t=ms.EditFingerprintExtractor.prototype.toJSON.call(this);return t.item_type=27,t},ms.EditSmearPicExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditSmearPicExtractor,ms.Extractor),ms.EditSmearPicExtractor.prototype.toJSON=function(){var t=ms.EditImageExtractor.prototype.toJSON.call(this);t.item_type=24;var e=this.node;t.base64ImageData&&delete t.base64ImageData,t.font_halign=e.getTextAlign(),t.font_valight=e.getTextVAlign(),t.font_size=e.getFontSize(),t.frame_color=e.getFrameColor(),t.frame_pixes=e.getFramePixes(),t.frame_style=e.getFrameStyle(),t.item_color=e.getItemColor(),t.item_val=e.getItemVal(),t.item_cntype=e.getCnType();var i=e.getSize();t.item_width=i.width,t.item_height=i.height;var n=e.getPosition();return t.item_left=n.x,t.item_top=n.y,t.item_angle=!1,t},ms.EditSpriteExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditSpriteExtractor,ms.Extractor),ms.EditSpriteExtractor.prototype.toJSON=function(){var t=ms.EditImageExtractor.prototype.toJSON.call(this);return t.item_type=1,t},ms.EditDateInputTextExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditDateInputTextExtractor,ms.Extractor),ms.EditDateInputTextExtractor.prototype.toJSON=function(){var t=ms.EditInputTextExtractor.prototype.toJSON.call(this),e=this.node;return t.item_val=e.getString(),t},ms.EditInputTextExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditInputTextExtractor,ms.Extractor),ms.EditInputTextExtractor.prototype.toJSON=function(){var t=ms.EditTextExtractor.prototype.toJSON.call(this),e=this.node;return t.font_family=e.getFontFamily(),t.item_color=e.getColor(),t},ms.EditPwInputTextExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditPwInputTextExtractor,ms.Extractor),ms.EditPwInputTextExtractor.prototype.toJSON=function(){var t=ms.EditInputTextExtractor.prototype.toJSON.call(this),e=this.node;return t.item_val=e.getString(),t.item_val_sub=e.getValSub(),t},ms.EditTimeInputTextExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditTimeInputTextExtractor,ms.Extractor),ms.EditTimeInputTextExtractor.prototype.toJSON=function(){var t=ms.EditInputTextExtractor.prototype.toJSON.call(this),e=this.node;return t.item_val=e.getString(),t},ms.EditVoiceExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditVoiceExtractor,ms.Extractor),ms.EditVoiceExtractor.prototype.toJSON=function(){var t=this.node._content,e=ms.Extractor.prototype.toJSON.call(this);e.item_type=7;var i=t.width,n=t.height,r=this.node.getScale(),s=Math.floor(this.node.x-i*r.x/2),a=Math.floor(this.node.y-n*r.y/2);e.item_top=a,e.item_left=s,e.item_width=i,e.item_height=n;var o=this.node.voiceLocalFile;o&&(e.voiceLocalFile=o);var h=this.node.getVoiceUrl();return e.item_cntype=2,e.item_val=h,e.item_val_sub=this.node.getVoiceTime(),e.item_layer=1,e.item_color="",e.item_opacity=100*t.alpha,e.item_angle=!0,e.rotate_pos=this.node.rotation/ms.PIDiv180,e.item_angle=!0,e.rotate_angle=this.node.rotation/ms.PIDiv180,e.rotate_pos="",e.item_mirror="",e.use_mask=!1,e.mask_color="",e.mask_width=0,e.mask_height=0,e.item_filter="",e.item_filter_val="",e.font_size="",e.font_family="",e.restart_play=!1,e.auto_play=!1,e.lock_level=0,e.font_dist=0,e.font_halign="",e.font_valight="",e.font_frame=!1,e.frame_color="",e.frame_pixes=0,e.frame_style=0,e.x_scale=r.x,e.y_scale=r.y,e},ms.EditVoteExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditVoteExtractor,ms.Extractor),ms.EditVoteExtractor.prototype.toJSON=function(){var t=this.node,e=ms.Extractor.prototype.toJSON.call(this);return e.item_type=22,e.item_val=t.getIconType(),e.item_color=t.getIconColor(),e},ms.EditShapeExtractor=function(t){ms.EditWaterMarkExtractor.call(this,t)},ms.inherit(ms.EditShapeExtractor,ms.EditWaterMarkExtractor),ms.EditShapeExtractor.prototype.toJSON=function(){var t=ms.EditWaterMarkExtractor.prototype.toJSON.call(this);return t.frame_style=3,t},ms.EditSignatureExtractor=function(t){ms.EditWaterMarkExtractor.call(this,t)},ms.inherit(ms.EditSignatureExtractor,ms.EditWaterMarkExtractor),ms.EditSignatureExtractor.prototype.toJSON=function(){var t=ms.EditWaterMarkExtractor.prototype.toJSON.call(this);return t.frame_style=2,t},ms.EditVideoExtractor=function(t){ms.Extractor.call(this,t)},ms.inherit(ms.EditVideoExtractor,ms.Extractor),ms.EditVideoExtractor.prototype.toJSON=function(){var t=this.node._content,e=ms.Extractor.prototype.toJSON.call(this);e.item_type=8;var i=this.node.getSize(),n=i.width,r=i.height,s=this.node.getScale(),a=Math.floor(this.node.x-n*s.x/2),o=Math.floor(this.node.y-r*s.y/2);e.item_top=o,e.item_left=a,e.item_width=n,e.item_height=r,this.node.voiceLocalFile?e.voiceLocalFile=this.node.voiceLocalFile:e.hasOwnProperty("voiceLocalFile")&&delete e.voiceLocalFile,e.item_cntype=2;var h=this.node.getImageUrl();e.item_val=h;var c=this.node.getVideoUrl();return e.item_href=c,e.item_layer=1,e.item_color="",e.item_opacity=100*t.alpha,e.item_angle=!0,e.rotate_pos=this.node.rotation/ms.PIDiv180,e.item_angle=!0,e.rotate_angle=this.node.rotation/ms.PIDiv180,e.rotate_pos="",e.item_mirror="",e.use_mask=!1,e.mask_color="",e.mask_width=0,e.mask_height=0,e.item_filter="",e.item_filter_val="",e.font_size="",e.font_family="",e.restart_play=!1,e.auto_play=!1,e.lock_level=0,e.font_dist=0,e.font_halign="",e.font_valight="",e.font_frame=!1,e.frame_color="",e.frame_pixes=0,e.frame_style=0,e.x_scale=s.x,e.y_scale=s.y,e},function(t){t.ScriptParser=function(e){this._tpl=e,this._pageStages=[];var i=[];e&&(i=this._tpl.page_value),this.__currentTplData=null,this.__currentStage=null,this.__currentPageObjects=null,this.pageLoadManager=new t.PageLoadManager,this._pageStages=new Array(i.length)},t.ScriptParser.prototype.changePageValue=function(t,e){return t&&(this._tpl=t),this._pageStages[e]?this._pageStages[e]=null:void 0},t.ScriptParser.prototype.getPageStageByIndex=function(e,i){var n=null;if(i)n=this._pageStages[e]?this._pageStages[e]:new t.Stage;else{if(this._pageStages[e])return this._pageStages[e];n=new t.Stage}n.pageLoadManager=this.pageLoadManager,n.pageIndex=e;var r=this._tpl?this._tpl.page_value:[],s=r[e];if(s){var a=s.page_width,o=s.page_height,h=s.inherit_plate;h=h||"";var c=this._tpl.render_version||2,l=s.color_code,u=s.bg_code||"",d=s.page_effect_img;if(s.color_off&&(n.backgroundColor=l),s.img_off&&(""==u?n.backgroundImage=l:n.backgroundImage=u),n.pageTpl=s,n.width=a,n.height=o,n.plate=h,n.pageVersion=c,n.pageThumb=d,n.itemObjects=s.item_object,n.displayObjects.length>0)return n;this.__currentTplData=n.pageTpl,this.__currentStage=n;var g=n.itemObjects;g&&g.length>0&&(n.displayObjects=this._getItemDisplayObjects(g),n.unknownObject=this._getUnknownPageObjects(g))}return this.__currentTplData=null,this.__currentStage=null,this.__currentPageObjects=null,this._pageStages[e]=n,n},t.ScriptParser.prototype._getItemDisplayObjects=function(t){this.__currentPageObjects=t;var e;t.length;t=t.sort(function(t,e){var i=parseInt(t.item_layer),n=parseInt(e.item_layer);return i-n});var i,n=[],r=t.length;for(e=0;r>e;e++){i=t[e];var s=this._getItemDisplayObject(i,t);s&&n.push(s)}return n},t.ScriptParser.prototype._getItemDisplayObject=function(t){var e=t.group_id,i=t.item_type+"";if(e>0){if("3"==i&&2==t.frame_style)return null;if(17==i){var n=this._createDisplayObject(t,this);return n}return 33==i?this._createDisplayObject(t,this):null}return this._createDisplayObject(t,this)},t.ScriptParser.prototype._createDisplayObject=function(e){var i=e.item_type+"";e.__key_id=this.__currentTplData.key_id;var n=t.MagazineObjectConfig[i];if(!n||n.constructor!==Function)return null;if(n=n(),!n)return null;if(!n.createObject)return null;var r=null;return r=n.createObject(e,this),r&&(r.userData=e,r.msStage=this.__currentStage),r},t.ScriptParser.prototype._getUnknownDisplayObject=function(e){var i=this.__currentPageObjects,n=e.item_type+"";e.__key_id=this.__currentTplData.key_id;var r=t.MagazineObjectConfig[n];return r&&r.constructor===Function?(r=r(),r&&r.createObject?i:null):null},t.ScriptParser.prototype._getUnknownPageObjects=function(t){var e,i,n,r,s=t.length,a=[];for(e=0;s>e;e++)i=t[e],n=i.group_id||0,0==n&&(r=this._getUnknownDisplayObject(i,this),null==r&&a.push(i));return a},t.ScriptParser.prototype.destroy=function(){this.pageLoadManager.destroy(),this.pageLoadManager=null,this._pageStages=[],this._tpl=null}}(ms),ms.GPUImageBrightnessFilter=function(t){ms.GPUImageFilter.call(this),this.brightness=void 0===t?0:t},ms.inherit(ms.GPUImageFilter,ms.GPUImageBrightnessFilter),ms.GPUImageBrightnessFilter.prototype.toJSONString=function(){return'"BrightnessFilter":{"brightness":'+this.brightness+"}"},ms.GPUImageColorInvertFilter=function(){ms.GPUImageFilter.call(this)},ms.inherit(ms.GPUImageColorInvertFilter,ms.GPUImageFilter),ms.GPUImageColorInvertFilter.prototype.toJSONString=function(){return'"ColorInvertFilter":{}'},ms.GPUImageContrastFilter=function(t){ms.GPUImageFilter.call(this),this.contrast=void 0===t?1:t},ms.inherit(ms.GPUImageContrastFilter,ms.GPUImageFilter),ms.GPUImageContrastFilter.prototype.toJSONString=function(){return'"ContrastFilter":{"contrast":'+this.contrast+"}"},ms.GPUImageExposureFilter=function(t){ms.GPUImageFilter.call(this),this.exposure=t||0},ms.inherit(ms.GPUImageExposureFilter,ms.GPUImageFilter),ms.GPUImageExposureFilter.prototype.toJSONString=function(){return'"ExposureFilter":{"exposure":'+this.exposure+"}"},ms.GPUImageGammaFilter=function(t){ms.GPUImageFilter.call(this),this.gamma=void 0===t?1:t},ms.inherit(ms.GPUImageGammaFilter,ms.GPUImageFilter),ms.GPUImageGammaFilter.prototype.toJSONString=function(){return'"GammaFilter":{"gamma":'+this.gamma+"}"},ms.GPUImageGaussianBlurFilter=function(t){ms.GPUImageFilter.call(this),this.blur=void 0===t?1:t},ms.inherit(ms.GPUImageGaussianBlurFilter,ms.GPUImageFilter),ms.GPUImageGaussianBlurFilter.prototype.toJSONString=function(){return'"GaussianBlurFilter":{"blur":'+this.blur+"}"},ms.GPUImageGrayscaleFilter=function(){ms.GPUImageFilter.call(this)},ms.inherit(ms.GPUImageGrayscaleFilter,ms.GPUImageFilter),ms.GPUImageGrayscaleFilter.prototype.toJSONString=function(){return'"GrayscaleFilter":{}'},ms.GPUImageHazeFilter=function(t){ms.GPUImageFilter.call(this),this.distance=t||0},ms.inherit(ms.GPUImageHazeFilter,ms.GPUImageFilter),ms.GPUImageHazeFilter.prototype.toJSONString=function(){return'"HazeFilter":{"distance":'+this.distance+"}"},ms.GPUImageHueFilter=function(t){ms.GPUImageFilter.call(this),this.hue=void 0===t?90:t},ms.inherit(ms.GPUImageHueFilter,ms.GPUImageFilter),ms.GPUImageHueFilter.prototype.toJSONString=function(){return'"HueFilter":{"hue":'+this.hue+"}"},ms.GPUImageMonochromeFilter=function(t,e){ms.GPUImageFilter.call(this),this.intensity=void 0===identity?1:identity,this.colors=e||[.6,.45,.3]},ms.inherit(ms.GPUImageMonochromeFilter,ms.GPUImageFilter),ms.GPUImageMonochromeFilter.prototype.toJSONString=function(){return'"MonochromeFilter":{"intensity":'+this.intensity+',"colors":['+this.colors.join(",")+"]}"},ms.GPUImageRGBFilter=function(t,e,i){ms.GPUImageFilter.call(this),this.r=void 0===t?1:t,this.g=void 0===e?1:e,this.b=void 0===i?1:i},ms.inherit(ms.GPUImageRGBFilter,ms.GPUImageFilter),ms.GPUImageRGBFilter.prototype.toJSONString=function(){return'"RGBFilter":{"r":'+this.r+',"g":'+this.g+',"b":'+this.b+"}"},ms.GPUImageSaturationFilter=function(t){ms.GPUImageFilter.call(this),this.saturation=void 0===t?1:t},ms.inherit(ms.GPUImageSaturationFilter,ms.GPUImageFilter),ms.GPUImageSaturationFilter.prototype.toJSONString=function(){return'"SaturationFilter":{"saturation":'+this.saturation+"}"},ms.GPUImageSepiaFilter=function(t){ms.GPUImageFilter.call(this),this.sepia=void 0===t?1:t},ms.inherit(ms.GPUImageSepiaFilter,ms.GPUImageFilter),ms.GPUImageSepiaFilter.prototype.toJSONString=function(){return'"SepiaFilter":{"sepia":'+this.sepia+"}"},ms.GPUImageSharpenFilter=function(t){ms.GPUImageFilter.call(this),this.sharpen=void 0===t?0:t},ms.inherit(ms.GPUImageSharpenFilter,ms.GPUImageFilter),ms.GPUImageSharpenFilter.prototype.toJSONString=function(){return'"SharpenFilter":{"sharpen":'+this.sharpen+"}"},ms.GPUImageVignetteFilter=function(t,e,i,n){ms.GPUImageFilter.call(this),this.vignetteCenter=t||[.5,.5],this.vignetteColor=e||[0,0,0],this.vignetteStart=i||.3,this.vignetteEnd=void 0===n?.75:n},ms.inherit(ms.GPUImageVignetteFilter,ms.GPUImageFilter),ms.GPUImageVignetteFilter.prototype.toJSONString=function(){return'"VignetteFilter":{"vignetteStart":'+this.vignetteStart+',"vignetteEnd":'+this.vignetteEnd+',"vignetteCenter":['+this.vignetteCenter.join(",")+'],"vignetteColor":['+this.vignetteColor.join(",")+"]}"},ms.GPUImageWhiteBalanceFilter=function(t){ms.GPUImageFilter.call(this),this.temperature=void 0===t?5e3:t},ms.inherit(ms.GPUImageWhiteBalanceFilter,ms.GPUImageFilter),ms.GPUImageWhiteBalanceFilter.prototype.toJSONString=function(){return'"WhiteBalanceFilter":{"temperature":'+this.temperature+"}"},ms.BaseEdit.prototype.resetAttribute=function(){if(this.userData){var t=this,e=this.userData,i=!!e.can_rotate,n=!!e.can_move,r=!!e.can_scale,s=!!e.can_edit,a=e.item_edit_status,o=e.item_href;e.item_val=e.item_val||"";var h=t.userProperty;h.can_rotate=i,h.can_scale=r,h.can_move=n,h.item_animation=e.item_animation,h.item_animation_val=e.item_animation_val,h.item_edit_status=a,h.can_edit=s,h.item_href=o;var c=e.x_scale,l=e.y_scale,u=~~e.item_width,d=~~e.item_height,g=e.item_left,m=e.item_top;u&&d&&t.setSize(u,d),t.setScale(c,l),t.setPosition(g,m),t.setAlpha(e.item_opacity/100),t.rotation=e.rotate_angle*ms.PIDiv180,t.isDragging=n,t.isScale=r,t.isRotation=i,t.borderRadius=e.bd_radius,t.backgroundColor=e.bg_color,t.backgroundAlpha=e.bg_opacity||100,t.border=e.item_border,t.borderColor=e.bd_color,t.borderAlpha=e.bd_opacity||1,t.borderSide=e.bd_side;var _=e.item_mirror||"";if(""!=_)try{_=JSON.parse(_),t.flippedX=_.flippedX||!1,t.flippedY=_.flippedY||!1}catch(p){}}},ms.EditBorderFrame.createObject=function(t){var e=new ms.EditBorderFrame;return e.userData=t,e},ms.EditBorderFrame.prototype.resetAttribute=function(){if(ms.EditImage.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_width,n=e.item_height,r=this.msStage.width,s=this.msStage.height;0==i&&(i=r||0),0==n&&(n=s||0),t.setSize(i,n),t._isSetPosition=!1,t.setPosition(0,0),ms.addImageToLoad(t),t.setImageUrl(e.item_val)}},ms.EditButton.createObject=function(t){var e=new ms.EditButton;return e.userData=t,e},ms.EditButton.prototype.resetAttribute=function(){ms.EditMagazineText.prototype.resetAttribute.call(this)},ms.EditCheckFrame.createObject=function(t){var e=new ms.EditCheckFrame;return e.userData=t,e},ms.EditCheckFrame.prototype.resetAttribute=function(){ms.EditRadioFrame.prototype.resetAttribute.call(this)},ms.EditDateInputText.createObject=function(t){var e=new ms.EditDateInputText;return e.userData=t,e},ms.EditDateInputText.prototype.resetAttribute=function(){ms.EditInputText.prototype.resetAttribute.call(this)},ms.EditFingerprint.createObject=function(t){var e=new ms.EditFingerprint;return e.userData=t,e},ms.EditFingerprint.prototype.resetAttribute=function(){if(ms.EditImage.prototype.resetAttribute.call(this),this.userData){var t=this,e=t.userData,i=e.item_val;t.setImageType(i);var n=e.item_color;t.setItemColor(n);var r=!0,s=!0,a=!0,o=!0,h=t.userProperty;h.can_rotate=r,h.can_scale=a,h.can_move=s,h.can_edit=o,t.isDragging=s,t.isScale=a,t.isRotation=r,t.border=0}},ms.EditImage.createObject=function(t){var e=new ms.EditImage;return e.userData=t,e},ms.EditImage.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_cntype,n="";2==i?n=e.item_val:3==i&&(n=e.item_val),ms.addImageToLoad(t),""==n&&e.base64ImageData&&(n=e.base64ImageData),e.isReset?t.setImageUrlAndReset(n):t.setImageUrl(n),delete e.isReset}},ms.EditInputText.createObject=function(t){var e=new ms.EditInputText;return e.userData=t,e},ms.EditInputText.prototype.resetAttribute=function(){ms.EditMagazineText.prototype.resetAttribute.call(this)},ms.EditLieText.createObject=function(t){var e=new ms.EditLieText;return e.userData=t,e},ms.EditLieText.prototype.resetAttribute=function(){ms.EditMagazineText.prototype.resetAttribute.call(this)},ms.EditMagazineText.createObject=function(t){var e=new ms.EditMagazineText;return e.userData=t,e},ms.EditMagazineText.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t,e=this,i=this.userData,n=i.font_size,r=~~i.item_width||0,s=~~i.item_height||0,a=i.fixed_size;if(a)try{t=JSON.parse(a),t&&(0==t.width&&(i.item_width=0,r=0),0==t.height&&(i.item_height=0,s=0))}catch(o){t={},t.width=!1,t.height=!1}else t={},t.width=!1,t.height=!1,r>0&&(t.width=!0),s>0&&(t.height=!0);e.setFixedSize(t.width,t.height),e.setSize(r,s);var h=i.item_type;e.setTextType(h),e.setColor(i.item_color);var c=i.item_val,l=i.font_family;e.setFontSize(n),e.setFontFamily(l);var u=parseInt(i.font_dist),d=parseInt(i.line_height);e.setLetterSpacing(u),e.setLineSpacing(d),e.userData=i,c.indexOf("\n")==c.length-1&&(c=c.substr(0,c.length-1)),e.setString(c),e.setValSub(i.item_val_sub);var g=i.font_halign;"mid"==g&&(g="center"),e.setTextAlign(g);var m=i.frame_color,_=i.frame_pixes,p=i.font_frame,f=i.frame_offsetx||0,v=i.frame_offsety||0;e.shadowEnable=p,e.setShadowColor(m),e.setShadowBlur(_),e.setShadowOffsetX(f),e.setShadowOffsetY(v),e.setPosition(i.item_left,i.item_top),void 0===i.can_move?e.isDragging=!0:e.isDragging=i.can_move;var A=i.font_valight;"mid"==A&&(A="middle"),A=A||"middle",e.setTextVAlign(A);var E=i.global_halign,y=i.global_valign;e.setGlobalHAlign(E),e.setGlobalVAlign(y),e._isSetPosition=!1,e.setPosition(i.item_left,i.item_top);var x=i.is_wrap;e.setIsWrap(x),x&&e.setAutoWrapWidth(r)}},ms.EditMakeFrame.createObject=function(t,e){var i,n,r=t.group_id,s=e.__currentPageObjects,a=[];for(n=s.length-1;n>=0;n--)i=s[n],i.group_id==r&&i!=t&&t.item_type!=i.item_type&&a.push(i);a=a.sort(function(t,e){var i=parseInt(t.item_layer),n=parseInt(e.item_layer);return i-n});var o=new ms.EditMakeFrame;o.userData=t;var h=t.item_width,c=t.item_height,l=e.__currentStage,u=ms.cloneStage(l);if(u.width=h,u.height=c,e.__currentStage=u,a.length>0){var d=null;for(n=a.length-1;n>=0;n--){var g=a[n];d=e._createDisplayObject(g),d?o.addChildAt(d,0):o.addUnknownObject(g)}}return e.__currentStage=l,o},ms.EditMakeFrame.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_width,n=e.item_height,r=(e.item_border,e.item_color,e.item_val,e.item_left),s=e.item_top;t.interactive=!0,t.setHitArea(0,0,i,n),t.setPosition(r,s)}for(var a=this.children,o=0;o<a.length;o++)a[o].resetAttribute&&a[o].resetAttribute()},ms.EditMap.createObject=function(t){var e=new ms.EditMap;return e.userData=t,e},ms.EditMap.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData;ms.addImageToLoad(t);var i=e.item_val;t.setMapValue(i)}},ms.EditMark.createObject=function(t,e){var i=new ms.EditMark;return i.userData=t,i},ms.EditMark.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_val,n=e.font_family,r=e.font_size,s=e.item_color,a=e.font_valight,o=e.font_halign,h=e.ext_attr,c=e.item_width,l=e.item_height,u=e.item_left,d=e.item_top,g=e.item_val_sub;t.setDirection(h),t.setPosition(u,d),t.setSize(c,l),t.setItemValSub(g),t.setString(i),t.setColor(s),t.setFontSize(r),t.setFontFamily(n),"mid"==a&&(a="middle"),a=a||"middle",t.setTextVAlign(a),"mid"==o&&(o="center"),t.setTextAlign(o)}},ms.EditPicFrame.createObject=function(t,e){var i,n,r=t.group_id,s=e.__currentPageObjects,a=[];for(n=s.length-1;n>=0;n--)i=s[n],i.group_id==r&&i!=t&&t.item_type!=i.item_type&&a.push(i);a=a.sort(function(t,e){var i=parseInt(t.item_layer),n=parseInt(e.item_layer);return i-n});var o=new ms.EditPicFrame;o.userData=t;var h=t.item_width,c=t.item_height,l=e.__currentStage,u=ms.cloneStage(l);if(u.width=h,u.height=c,e.__currentStage=u,a.length>0){var d=null;for(n=a.length-1;n>=0;n--){var g=a[n];d=e._createDisplayObject(g),d?(d.isDragging=!0,o.addChildAt(d,0)):o.addUnknownObject(g)}}return e.__currentStage=l,o},ms.EditPicFrame.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_width,n=e.item_height,r=e.item_border,s=e.item_color,a=e.item_val,o=e.item_left,h=e.item_top;a&&"none"!=a?t.setImageUrl(a):(t.setBorderColor(s),t.setBorderWidth(r)),t.interactive=!0,t.setHitArea(0,0,i,n),t.setPosition(o,h)}for(var c=this.children,l=0;l<c.length;l++)c[l].resetAttribute&&c[l].resetAttribute()},ms.EditPwInputText.createObject=function(t){var e=new ms.EditPwInputText;return e.userData=t,e},ms.EditPwInputText.prototype.resetAttribute=function(){if(ms.EditInputText.prototype.resetAttribute.call(this),this.userData){var t=this.userData,e=this;e.setPwText(t.item_href),e._isSetPosition=!1,e.setPosition(t.item_left,t.item_top)}},ms.EditRadioFrame.createObject=function(t){var e=new ms.EditRadioFrame;return e.userData=t,e},ms.EditRadioFrame.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_width,n=e.item_height,r=e.item_left,s=e.item_top,a=e.font_size;t.setFontSize(a);var o=e.font_family;t.setFontFamily(o);var h=e.bd_color;t.setBorderColor(h);var c=e.item_border;t.setBorderWidth(c);var l=parseInt(e.font_dist),u=parseInt(e.line_height);t.setLetterSpacing(l),t.setLineSpacing(u);var d=e.font_valight;"mid"==d&&(d="middle"),d=d||"middle",t.setTextVAlign(d);var g=e.font_halign||"";"mid"==g&&(g="center"),t.setTextAlign(g),t.interactive=!0,t.setHitArea(0,0,i,n),t.setPosition(r,s);var m=e.item_color;t.setItemColor(m);var _=e.item_val;t.setValue(_)}},ms.EditShake.createObject=function(t){var e=new ms.EditShake;return e.userData=t,e},ms.EditShake.prototype.resetAttribute=function(){ms.EditFingerprint.prototype.resetAttribute.call(this)},ms.EditSmearPic.createObject=function(t){var e=new ms.EditSmearPic;return e.userData=t,e},ms.EditSmearPic.prototype.resetAttribute=function(){ms.EditImage.prototype.resetAttribute.call(this);var t=this;if(t.userData){var e=t.userData;t.setImageUrl(ms.ImageConfig.smearImage);var i=e.font_halign;"mid"==i&&(i="center"),t.setTextAlign(i);var n=e.font_valight;"mid"==n&&(n="middle"),n=n||"middle",t.setTextVAlign(n);var r=e.font_size;t.setFontSize(r);var s=e.frame_color||"";t.setFrameColor(s);var a=e.frame_pixes||0;t.setFramePixes(a);var o=e.frame_style||0;t.setFrameStyle(o);var h=e.item_color||"";t.setItemColor(h);var c=e.item_val||"";t.setItemVal(c);var l=e.item_cntype||0;t.setCnType(l)}},ms.EditSprite.createObject=function(t){var e=new ms.EditSprite;return e.userData=t,e},ms.EditSprite.prototype.resetAttribute=function(){ms.EditImage.prototype.resetAttribute.call(this)},ms.EditTimeInputText.createObject=function(t){var e=new ms.EditTimeInputText;return e.userData=t,e},ms.EditTimeInputText.prototype.resetAttribute=function(){ms.EditInputText.prototype.resetAttribute.call(this)},ms.EditVideo.createObject=function(t){var e=new ms.EditVideo;return e.userData=t,e},ms.EditVideo.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_val,n=e.item_href,r=~~e.item_width,s=~~e.item_height;r&&s&&t.setSize(r,s),ms.addImageToLoad(t),t.setImageUrlAndReset(i),t.setVideoUrl(n)}},ms.EditVoice.createObject=function(t){var e=new ms.EditVoice;return e.userData=t,e},ms.EditVoice.prototype.resetAttribute=function(){if(ms.BaseEdit.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_val;ms.addImageToLoad(t),e.voiceLocalFile&&(t.voiceLocalFile=e.voiceLocalFile),t.setVoiceUrl(i),t.setVoiceTime(e.item_val_sub)}},ms.EditVote.createObject=function(t){var e=new ms.EditVote;return e.userData=t,e},ms.EditVote.prototype.resetAttribute=function(){ms.BaseEdit.prototype.resetAttribute.call(this);var t=this;if(t.userData){ms.addImageToLoad(t);var e=t.userData,i=e.item_val;t.setIconType(i);var n=e.item_color;t.setIconColor(n),t.isDragging=!0}},ms.EditWaterMark.createObject=function(t){var e=t.frame_style,i=null;return i=2==e?new ms.EditSignature:3==e?new ms.EditShape:new ms.EditWaterMark,i.userData=t,i},ms.EditWaterMark.prototype.resetAttribute=function(){ms.EditImage.prototype.resetAttribute.call(this)},ms.EditWebButton.createObject=function(t){var e=new ms.EditWebButton;return e.userData=t,e},ms.EditWebButton.prototype.resetAttribute=function(){if(ms.EditMagazineText.prototype.resetAttribute.call(this),this.userData){var t=this,e=this.userData,i=e.item_val_sub;i.indexOf("\n")==i.length-1&&(i=i.substr(0,i.length-1)),t.setString(i);var n=e.item_val;t.setUrl(n),t.setTextVAlign("middle")}};